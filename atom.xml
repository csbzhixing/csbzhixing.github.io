<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å­¦æµ·æ— æ¶¯</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://csbzhixing.github.io/"/>
  <updated>2017-01-08T08:19:03.000Z</updated>
  <id>http://csbzhixing.github.io/</id>
  
  <author>
    <name>csbzhixing</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æŒä¹…åŒ–å­¦ä¹ ç³»åˆ—1</title>
    <link href="http://csbzhixing.github.io/2017/01/08/%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%971/"/>
    <id>http://csbzhixing.github.io/2017/01/08/æŒä¹…åŒ–å­¦ä¹ ç³»åˆ—1/</id>
    <published>2017-01-08T08:16:57.000Z</published>
    <updated>2017-01-08T08:19:03.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;code&gt;SPTPersistentCache&lt;/code&gt;æ˜¯&lt;strong&gt;spotify&lt;/strong&gt;å¼€æºçš„ä¸€å¥—æŒä¹…åŒ–æ¡†æ¶ã€‚&lt;code&gt;SPTPersistentCache&lt;/code&gt;ä¸»è¦è§£å†³&lt;code&gt;NSData&lt;/code&gt;å­˜å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿçš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;äº®ç‚¹&quot;&gt;&lt;a href=&quot;#äº®ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;äº®ç‚¹&quot;&gt;&lt;/a&gt;äº®ç‚¹&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;åŸºäºLRU&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹å®‰å…¨&lt;/li&gt;
&lt;li&gt;å¯è§†åŒ–å·¥å…·&lt;/li&gt;
&lt;li&gt;ç±»HTTPè®¾è®¡&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;æˆå‘˜åˆ†æ&quot;&gt;&lt;a href=&quot;#æˆå‘˜åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;æˆå‘˜åˆ†æ&quot;&gt;&lt;/a&gt;æˆå‘˜åˆ†æ&lt;/h2&gt;&lt;p&gt;å…ˆä»Public Apiæ¥è¿›è¡Œåˆ†æ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../media/14824843501540.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SPTPersistentCache&lt;/code&gt;æ˜¯æ ¸å¿ƒï¼ŒåŒæ¯”ä¸ºmanagerçš„è§’è‰²ã€‚&lt;br&gt;&lt;code&gt;SPTPersistentCacheOptions&lt;/code&gt;æ˜¯é…ç½®é€‰é¡¹ï¼Œ&lt;br&gt;&lt;code&gt;SPTPersistentCacheHeader&lt;/code&gt;æ˜¯&lt;code&gt;SPTPersistentCache&lt;/code&gt;çš„ä¸€å¤§è®¾è®¡çš„ç‰¹è‰²ï¼Œæ•°æ®è¡¨å¤´&lt;br&gt;&lt;code&gt;SPTPersistentCacheRecord&lt;/code&gt;ä¸ºæ•°æ®å•å…ƒã€‚&lt;br&gt;&lt;code&gt;SPTPersistentCacheResponse&lt;/code&gt;ä¸ºæ“çºµæ•°æ®çš„åŸºæœ¬å•ä½ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ¬¡åˆ†ææ‰“ç®—ä»ä¸‹å¾€ä¸Šï¼Œå…ˆä»åŸºæœ¬çš„æ•°æ®å•å…ƒå¼€å§‹&lt;/p&gt;
&lt;h3 id=&quot;SPTPersistentCacheRecord&quot;&gt;&lt;a href=&quot;#SPTPersistentCacheRecord&quot; class=&quot;headerlink&quot; title=&quot;SPTPersistentCacheRecord&quot;&gt;&lt;/a&gt;SPTPersistentCacheRecord&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SPTPersistentCacheRecord&lt;/code&gt;ä¸­é™¤äº†dataä¹‹å¤–è¿˜å®šä¹‰ä¸‰ä¸ªè¾…åŠ©æ•°æ®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;refCount å¼•ç”¨è®¡æ•°&lt;/li&gt;
&lt;li&gt;ttl ç”Ÿå­˜æ—¶é—´&lt;/li&gt;
&lt;li&gt;key &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯ä»¥ä»&lt;code&gt;SPTPersistentCacheRecord&lt;/code&gt;çœ‹å‡º&lt;code&gt;SPTPersistent&lt;/code&gt;ä¾ç…§å¼•ç”¨æ¬¡æ•°å’Œæ—¶é—´æ¥ç®¡ç†ç¼“å­˜å¯¹è±¡&lt;/p&gt;
&lt;h3 id=&quot;SPTPersistentCacheResponse&quot;&gt;&lt;a href=&quot;#SPTPersistentCacheResponse&quot; class=&quot;headerlink&quot; title=&quot;SPTPersistentCacheResponse&quot;&gt;&lt;/a&gt;SPTPersistentCacheResponse&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SPTPersistentCacheResponse&lt;/code&gt;æ˜¯å¯¹&lt;code&gt;SPTPersistentCacheRecord&lt;/code&gt;çš„å†ä¸€å±‚åŒ…è£…ã€‚æ–°å¢äº†å¯¹å¤–å±æ€§&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SPTPersistentCacheResponseCode&lt;/li&gt;
&lt;li&gt;NSError&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»&lt;code&gt;SPTPersistentCacheResponseCode&lt;/code&gt;å¯ä»¥çœ‹å‡ºè¿™ä¸€å±‚ä¸è¯»å†™æ“ä½œç›¸å…³äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;SPTPersistentCacheRecord-1&quot;&gt;&lt;a href=&quot;#SPTPersistentCacheRecord-1&quot; class=&quot;headerlink&quot; title=&quot;SPTPersistentCacheRecord&quot;&gt;&lt;/a&gt;SPTPersistentCacheRecord&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SPTPersistentCacheRecord&lt;/code&gt;å¹¶ä¸æ˜¯ä¸€ä¸ªç±»ï¼Œè€Œæ˜¯ä¸€ä¸ªç»“æ„ä½“ã€‚åœ¨è¿™é‡Œï¼Œå¯ä»¥å°†&lt;code&gt;SPTPersistentCacheRecord&lt;/code&gt;ä¸HTTPä¸­çš„&lt;code&gt;header&lt;/code&gt;è¿›è¡Œç±»æ¯”ã€‚&lt;/p&gt;
&lt;p&gt;å…³é”®ç‚¹ï¼šcrcï¼Œflags&lt;/p&gt;
&lt;p&gt;crcï¼š&lt;strong&gt;å¾ªç¯å†—ä½™æ ¡éªŒ&lt;/strong&gt; åœ¨æ•°æ®å†™å…¥å‰é€šè¿‡è®¡ç®—ç”Ÿæˆ32ä½æ•´æ•°ï¼Œæ‹¼æ¥åœ¨æ•°æ®åé¢ã€‚åœ¨è¯»å–çš„æ—¶å€™è¿›è¡Œæ ¡éªŒï¼Œç¡®è®¤æ•°æ®æ˜¯å¦å®Œæ•´ã€‚&lt;code&gt;SPTPersistentCache&lt;/code&gt;ä½¿ç”¨çš„æ˜¯&lt;code&gt;CRC-64-ISO&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;flags: åˆ¤æ–­æ•°æ®æ˜¯å¦åœ¨ä¸Šæ¬¡å†™å…¥çš„æ—¶å€™æ²¡èƒ½å®Œæˆã€‚è¿™ä¸ªæ›´å¤šæ˜¯é€»è¾‘è€Œä¸æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚&lt;/p&gt;
&lt;h3 id=&quot;SPTPersistentCacheOptions&quot;&gt;&lt;a href=&quot;#SPTPersistentCacheOptions&quot; class=&quot;headerlink&quot; title=&quot;SPTPersistentCacheOptions&quot;&gt;&lt;/a&gt;SPTPersistentCacheOptions&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SPTPersistentCacheOptions&lt;/code&gt;æ˜¯cacheçš„é…ç½®ç›¸å…³çš„å†…å®¹ã€‚ä»é…ç½®ä¸­å¤Ÿå¯ä»¥çœ‹å‡º&lt;code&gt;SPTPersistentCache&lt;/code&gt;çš„ä¸€äº›ç‰¹æ€§&lt;/p&gt;
&lt;p&gt;&lt;code&gt;identifierForQueue&lt;/code&gt;ä½œä¸ºå”¯ä¸€é˜Ÿåˆ—æ ‡è¯†ï¼Œå¯ä»¥é¢„çŸ¥æ¯ä¸€ä¸ªcacheæ‹¥æœ‰å”¯ä¸€çš„é˜Ÿåˆ—&lt;/p&gt;
&lt;p&gt;&lt;code&gt;cacheIdentifier&lt;/code&gt;ä½œä¸ºé…ç½®å¯¹åº”çš„cacheå”¯ä¸€æ ‡è¯†&lt;/p&gt;
&lt;p&gt;ä¼˜å…ˆçº§è®¾å®šä¸­åˆ†åˆ«å®šä¹‰äº†å¹¶å‘æ“ä½œæ•°ï¼Œè¯»å†™åˆ çš„ä¼˜å…ˆçº§&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc&quot;&gt;@property (nonatomic) NSInteger maxConcurrentOperations;
@property (nonatomic) NSOperationQueuePriority writePriority;
@property (nonatomic) NSOperationQueuePriority readPriority;
@property (nonatomic) NSOperationQueuePriority deletePriority;
@property (nonatomic) NSQualityOfService writeQualityOfService;
@property (nonatomic) NSQualityOfService readQualityOfService;
@property (nonatomic) NSQualityOfService deleteQualityOfService;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;GCè®¾å®šä¸­å¯¹GCçš„é…ç½®è¿›è¡Œè®¾å®š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;garbageCollectionInterval&lt;/code&gt;å†³å®šäº†GCçš„é—´éš”&lt;/p&gt;
&lt;p&gt;&lt;code&gt;defaultExpirationPeriod&lt;/code&gt; å†³å®šé»˜è®¤è¿‡æœŸæ—¶é—´&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sizeConstraintBytes&lt;/code&gt; è®¾å®šäº†ç¼“å­˜ç©ºé—´çš„é™åˆ¶&lt;/p&gt;
&lt;p&gt;&lt;code&gt;garbageCollectionPriority&lt;/code&gt;è®¾å®šGCæ“ä½œçš„ä¼˜å…ˆçº§&lt;/p&gt;
&lt;p&gt;&lt;code&gt;garbageCollectionQualityOfService&lt;/code&gt;è®¾å®šGCæœåŠ¡çš„QOS&lt;/p&gt;
&lt;p&gt;ä»optionä¸­å¯ä»¥çª¥æ¢å‡ºï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæœ‰å¤šä¸ªcacheï¼Œæ¯ä¸ªcacheä¹‹é—´çš„é…ç½®ç‹¬ç«‹ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„ä¼˜å…ˆçº§å’ŒGCç®¡ç†&lt;/p&gt;
&lt;h3 id=&quot;SPTPersistentCache&quot;&gt;&lt;a href=&quot;#SPTPersistentCache&quot; class=&quot;headerlink&quot; title=&quot;SPTPersistentCache&quot;&gt;&lt;/a&gt;SPTPersistentCache&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SPTPersistentCache&lt;/code&gt;æ˜¯æ•´ä¸ªæŒä¹…åŒ–åº“çš„æ ¸å¿ƒç±»ï¼ŒåŒ…å«äº†è¯»ï¼Œå†™ï¼ŒæŸ¥ï¼Œåˆ ï¼Œé”ç­‰æ“ä½œ&lt;/p&gt;
&lt;p&gt;è¯»æ“ä½œä¸­ï¼Œå¯¹å¤–å…¬å¼€çš„ä¸¤ä¸ªAPIæœ€åä¼šå½’é›†åˆ°ä¸‹é¢è¿™ä¸ªæ–¹æ³•ä¸­&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc&quot;&gt;- (void)loadDataForKeySync:(NSString *)key
              withCallback:(SPTPersistentCacheResponseCallback)callback
                   onQueue:(dispatch_queue_t)queue
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ–¹æ³•å¹¶ä¸æ˜¯å¾ˆå¤æ‚ï¼Œå…·ä½“çš„æµç¨‹ç®€å•æè¿°å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;é¦–å…ˆï¼Œæ ¹æ®keyå»æŸ¥æ‰¾æ˜¯å¦æœ‰å¯¹åº”çš„æ–‡ä»¶ï¼Œæœ¨æœ‰çš„è¯å°±æŠ›é”™ (1)

å¦‚æœæ‰¾åˆ°äº†æ–‡ä»¶ï¼Œè¯»å–dataï¼Œå¦‚æœè¯»å–å¤±è´¥ï¼Œè®¤ä¸ºæ–‡ä»¶æŸåäº†ï¼ŒæŠ›é”™(2)

ä»æ–‡ä»¶ä¸­è¯»å‡ºäº†æ•°æ®ï¼Œæ ¹æ®headerSizeå–å‡ºheadã€‚å¦‚æœä¸èƒ½æ­£ç¡®çš„æ‹¼è£…å‡ºheaderï¼Œå³è®¤ä¸ºæ­¤æ–‡ä»¶æ— æ³•ç»§ç»­æ“ä½œï¼ŒæŠ›é”™(3)

æ‹¼è£…äº†headeråï¼Œè¿›è¡Œæ ¡éªŒï¼Œæ ¡éªŒä¸é€šè¿‡ï¼ŒæŠ›é”™(4)

ä¸æœ¬åœ°headeråšæ¯”è¾ƒï¼Œå¦‚æœä¸ä¸€è‡´ï¼ŒæŠ›é”™(5)

å°†è¯»å‡ºçš„payload(è´Ÿè½½æ•°æ®)ç»„è£…æˆ`SPTPersistentCacheRecord`ï¼Œå†å°†`SPTPersistentCacheRecord`ç»„è£…æˆ`SPTPersistentCacheResponse`

å°†è®¿é—®æ•°æ®ç›¸å…³å†™å›ç£ç›˜

å°†responseé€šè¿‡blockå›è°ƒç»™å¼€å‘è€…ã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œæ€»å…±æœ‰5æ­¥æŠ›é”™çš„åœ°æ–¹ï¼Œéƒ½æ˜¯å¯¹æ•°æ®å®Œæ•´æ€§çš„æ ¡éªŒã€‚&lt;/p&gt;
&lt;p&gt;ç›¸å¯¹äºè¯»ï¼Œå†™çš„éš¾åº¦å°±å°äº†å¾ˆå¤šï¼Œä¸å¤ªå¤æ‚ã€‚å†™æ–¹æ³•ä¸»è¦æ˜¯åœ¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc&quot;&gt;- (NSError *)storeDataSync:(NSData *)data
                    forKey:(NSString *)key
                       ttl:(NSUInteger)ttl
                    locked:(BOOL)isLocked
              withCallback:(SPTPersistentCacheResponseCallback)callback
                   onQueue:(dispatch_queue_t)queue
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å°†Headerä¸dataæ‹¼è£…åç»„æˆrowDataï¼Œç„¶åå†™å…¥ç£ç›˜ï¼Œæ³¨æ„åˆ¤æ–­æ˜¯å¦å†™å…¥æˆåŠŸã€‚ä¹‹åé€šè¿‡blockå°†responseå›è°ƒç»™å¼€å‘è€…&lt;/p&gt;
&lt;h2 id=&quot;GCå’ŒLRUå®ç°&quot;&gt;&lt;a href=&quot;#GCå’ŒLRUå®ç°&quot; class=&quot;headerlink&quot; title=&quot;GCå’ŒLRUå®ç°&quot;&gt;&lt;/a&gt;GCå’ŒLRUå®ç°&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;LRUæ˜¯Least Recently Used è¿‘æœŸæœ€å°‘ä½¿ç”¨ç®—æ³•ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æœ€è¿‘çš„é¢è¯•ä¸­ï¼Œç»å¸¸ä¼šè°ˆåˆ°ä¸€äº›ç¼“å­˜åº“çš„å®ç°ï¼Œæ¯”å¦‚æœ€å¸¸è§çš„&lt;code&gt;SDWebImageCache&lt;/code&gt;ã€‚å¯¹æ­¤æˆ‘å¸¸ä¼šæå‡ºä¸€ä¸ªç–‘é—®ï¼Œå¦‚ä½•è®¾è®¡é«˜æ•ˆçš„ç¼“å­˜ã€‚å‡ ä¹æ²¡äººèƒ½å¤Ÿè°ˆè°ˆç¼“å­˜è°ƒåº¦ç®—æ³•ã€‚LRUå…¶å®å°±æ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§ç¼“å­˜è°ƒåº¦ç®—æ³•ï¼Œç›®çš„å°±æ˜¯å°½åŠ›ä¿è¯ç¼“å­˜ä¸­çš„æ•°æ®æ˜¯å¸¸ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œè°ˆè°ˆ&lt;code&gt;SPTPersistentCache&lt;/code&gt;ä¸­æ˜¯å¦‚ä½•å®ç°GCå’ŒLRUç®—æ³•çš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šæ–‡&lt;code&gt;SPTPersistentCacheRecord&lt;/code&gt;çš„ç®€ä»‹ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸¤ä¸ªå…³é”®çš„å±æ€§ï¼šTTL &amp;amp;&amp;amp; refcountã€‚æˆ‘ä»¬å¯ä»¥çŒœæµ‹åˆ°ï¼Œ&lt;code&gt;SPTPersistentCache&lt;/code&gt;æ˜¯é€šè¿‡å®è·µå’Œå¼•ç”¨å€¼æ¥åˆ¤æ–­æ˜¯æ•°æ®çš„æœ‰æ•ˆæ€§çš„ã€‚&lt;/p&gt;
&lt;p&gt;GCçš„æ ¸å¿ƒæ˜¯ğŸ‘‡è¿™ä¸ªæ–¹æ³•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc&quot;&gt;- (void)collectGarbageForceExpire:(BOOL)forceExpire forceLocked:(BOOL)forceLocked
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¼ å‚åˆ†åˆ«æ˜¯å¼ºåˆ¶è¿‡æœŸå’Œå¼ºåˆ¶åŠ é”ã€‚&lt;/p&gt;
&lt;p&gt;è¿‡ç¨‹ä¸å¤æ‚ï¼Œé€šè¿‡&lt;code&gt;NSDirectoryEnumerator&lt;/code&gt;è¿­ä»£å™¨ä»&lt;code&gt;self.fileManager&lt;/code&gt;ä¸­å–å‡ºæ‰€æœ‰æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;åˆ¤æ–­æ˜¯å¦è¿‡æœŸæ˜¯é€šè¿‡ä¸‹é¢è¿™ä¸ªæ–¹æ³•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc&quot;&gt;- (SPTPersistentCacheResponse *)alterHeaderForFileAtPath:(NSString *)filePath
                                               withBlock:(SPTPersistentCacheRecordHeaderGetCallbackType)modifyBlock
                                               writeBack:(BOOL)needWriteBack
                                                complain:(BOOL)needComplains
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªæ–¹æ³•æ˜¯å”¯ä¸€å»è®¿é—®æ–‡ä»¶headerçš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¼ å…¥&lt;code&gt;modifyBlock&lt;/code&gt;å°†æ”¹å˜headerã€‚&lt;/p&gt;
&lt;p&gt;å›åˆ°GCçš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°é€šè¿‡ä¼ å…¥&lt;code&gt;modifyBlock&lt;/code&gt;æ¥è·å–headerã€‚åœ¨&lt;code&gt;modifyBlock&lt;/code&gt;ä¸­ï¼Œé€šè¿‡headerä¸­çš„refcountæ¥åˆ¤æ–­æ˜¯å¦éœ€è¦ç§»é™¤ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¼šè§¦å‘&lt;code&gt;refcount&lt;/code&gt;çš„å˜åŒ–å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨&lt;code&gt;lockDataForKeys&lt;/code&gt;æ–¹æ³•ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ ·ä¸€è¡Œä»£ç &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc&quot;&gt; // Satisfy Req.#1.2
 if ([self isDataExpiredWithHeader:header]) {
 expired = YES;
 return;                                                                        }
++header-&amp;gt;refCount;
// Do not update access time since file is locked
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯çŸ¥ï¼Œå½“æ‰§è¡Œlockçš„æ—¶å€™ï¼Œå¦‚æœæ•°æ®æœ¬èº«æ²¡è¿‡æœŸï¼Œä¼šä½¿å¼•ç”¨è®¡æ•°+1ã€‚&lt;/p&gt;
&lt;p&gt;åŒç†ï¼Œå½“unlockçš„æ—¶å€™ï¼Œä¼šä½¿å¼•ç”¨è®¡æ•°-1ã€‚&lt;/p&gt;
&lt;p&gt;å¯è§ï¼Œrefcountåªæœ‰1å’Œ0ä¸¤ä¸ªå€¼ã€‚&lt;/p&gt;
&lt;p&gt;è€Œ&lt;code&gt;TTLï¼ˆå­˜æ´»æ—¶é—´ï¼‰&lt;/code&gt;åˆ™æ˜¯æ•°æ®çš„çš„ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æœæ²¡æœ‰&lt;code&gt;forceExpire&lt;/code&gt;å’Œ&lt;code&gt;forceLocked&lt;/code&gt;çš„è¯ï¼Œåˆ™å½“&lt;code&gt;[self isDataExpiredWithHeader:header] &amp;amp;&amp;amp; header-&amp;gt;refCount == 0&lt;/code&gt;çš„æ—¶å€™åˆ é™¤æ•°æ®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;&lt;a href=&quot;#æ€»ç»“&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“&quot;&gt;&lt;/a&gt;æ€»ç»“&lt;/h2&gt;&lt;p&gt;githubä¸Šå®ç°äºŒè¿›åˆ¶ç¼“å­˜çš„cacheåº“ä¸å¤šï¼Œ&lt;code&gt;SPTPersistentCache&lt;/code&gt;æ˜¯å…¶ä¸­çš„ä½¼ä½¼è€…ã€‚åŸå› åœ¨äº&lt;strong&gt;spotify&lt;/strong&gt;æœ¬èº«åšåœ¨çº¿éŸ³ä¹æœåŠ¡ï¼Œåœ¨äºŒè¿›åˆ¶ç¼“å­˜ä¸Šæœ‰æ¯”è¾ƒå¼ºçš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SPTPersistentCache&lt;/code&gt;çš„å®ç°æˆ‘è®¤ä¸ºå‚è€ƒäº†HTTPåè®®ï¼Œé€šè¿‡ä¸€ä¸ªHeaderæ¥ä¸ºæ•°æ®æ·»åŠ metedataï¼ŒåŒæ—¶å®ç°äº†GCã€‚å¯ä»¥&lt;code&gt;SPTPersistentCache&lt;/code&gt;çš„å®ç°æ–¹å¼éå¸¸å€¼å¾—å­¦ä¹ ï¼Œåœ¨é˜…è¯»&lt;code&gt;SPTPersistentCache&lt;/code&gt;çš„è¿‡ç¨‹ä¸­å­¦ä¹ äº†ä¸å°‘äºŒè¿›åˆ¶æ–‡ä»¶æ“ä½œçš„æ–¹æ³•ï¼Œæ”¶ç›Šè‰¯å¤šï¼Œä¹Ÿä¸ºè¿™ä¸ªç³»åˆ—å¼€äº†ä¸€ä¸ªå¥½å¤´ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;SPTPersistentCache&lt;/code&gt;æ˜¯&lt;strong&gt;spotify&lt;/strong&gt;å¼€æºçš„ä¸€å¥—æŒä¹…åŒ–æ¡†æ¶ã€‚&lt;code&gt;SPTPersistentCache&lt;/code&gt;ä¸»è¦è§£å†³&lt;code&gt;NSData&lt;/code&gt;å­˜å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿçš„è¿‡ç¨‹ã€‚&lt;/p&gt;

    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>2016ï¼Œæ³¨å®šä¸å¹³å‡¡</title>
    <link href="http://csbzhixing.github.io/2016/12/31/2016%EF%BC%8C%E6%B3%A8%E5%AE%9A%E4%B8%8D%E5%B9%B3%E5%87%A1/"/>
    <id>http://csbzhixing.github.io/2016/12/31/2016ï¼Œæ³¨å®šä¸å¹³å‡¡/</id>
    <published>2016-12-31T01:50:41.000Z</published>
    <updated>2016-12-31T02:53:53.000Z</updated>
    
    <content type="html">&lt;p&gt;2016å¹´ï¼Œæ³¨å®šæ˜¯ä¸€ä¸ªä¸ä¸€æ ·çš„å¹´ä»½ã€‚å¹´å¤´åˆ°å¹´å°¾ï¼Œä¸–ç•Œä¸Šå‘ç”Ÿäº†å¤ªå¤šå†å²æ€§çš„è¿›ç¨‹ã€‚ä¸€ä¸ªè‹±å›½è„±æ¬§ï¼Œä¸€ä¸ªç‰¹æœ—æ™®å½“é€‰å°±è¶³ä»¥è®©ä¸–äººè°ˆè®ºä¸Šè®¸å¤šå¹´ã€‚å¯¹äºæˆ‘ä¸ªäººï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸åŒå¯»å¸¸çš„å¹´ä»½ï¼šä»Šå¹´æˆ‘æ¯•ä¸šäº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ¯•ä¸šäº†ï¼Œæˆ‘æƒ³è°ˆè°ˆæ•™è‚²&quot;&gt;&lt;a href=&quot;#æ¯•ä¸šäº†ï¼Œæˆ‘æƒ³è°ˆè°ˆæ•™è‚²&quot; class=&quot;headerlink&quot; title=&quot;æ¯•ä¸šäº†ï¼Œæˆ‘æƒ³è°ˆè°ˆæ•™è‚²&quot;&gt;&lt;/a&gt;æ¯•ä¸šäº†ï¼Œæˆ‘æƒ³è°ˆè°ˆæ•™è‚²&lt;/h3&gt;&lt;p&gt;ä»ä¸Šå­¦ç¬¬ä¸€å¤©å¼€å§‹ï¼Œæˆ‘å°±æƒ³ä»€ä¹ˆæ—¶å€™ä¼šç»“æŸè¿™ä¸€æ®µå†ç¨‹ï¼Œæƒ³ä¸åˆ°åˆ°æ¥åå´ä¸€ç‚¹æ„Ÿè§‰æ²¡æœ‰ã€‚ç»“æŸäº†å­¦ç”Ÿèº«ä»½ï¼Œæœ€å¤§çš„æ„Ÿè§¦å°±æ˜¯ï¼šä¸å†ä¼šæœ‰äººç…§é¡¾ä½ äº†ã€‚&lt;/p&gt;
&lt;p&gt;16å¹´çš„æ±‚å­¦ç»å†ï¼Œæ”¹å˜äº†ä¸€ä¸ªäººå¤šå°‘ï¼Œæ¯ä¸ªäººéƒ½ä¼šæœ‰è‡ªå·±çš„çœ‹æ³•ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œå­¦ç”Ÿæ—¶ä»£å…»æˆçš„ä¹ æƒ¯æ˜¯æ°¸è¿œæ”¹ä¸æ‰çš„ã€‚å¾ˆå¹¸è¿çš„æ˜¯ï¼Œè‡ªå·±èƒ½å¤Ÿä»å°å­¦ä¸€è·¯é¡ºåˆ©å¾—è¯»å®Œå¤§å­¦ã€‚ç›¸æ¯”è¾ƒè®¸å¤šæ— ç¼˜èƒ½å¤Ÿè¿›å…¥å­¦æ ¡å­¦ä¹ çš„äººæ¥è¯´ï¼Œèƒ½å¤Ÿæ¥å—å®Œæ•´ç³»ç»Ÿçš„çŸ¥è¯†æ•™è‚²ï¼Œæ˜¯ä¸€ä»¶å¤ªå¹¸ç¦çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç»å†äº†å®Œæ•´çš„ä¸­å›½æ•™è‚²ç³»ç»Ÿè®¾è®¡çš„æ•™è‚²ä½“ç³»åï¼Œæ„Ÿè§‰å¹¶æ²¡æœ‰ç½‘ç»œä»¥åŠä»–äººæ‰€è¯´çš„é‚£ä¹ˆä¸å ªã€‚çš„ç¡®ï¼Œä¸­å›½æŸäº›ä½“ç³»åŸå› é€ æˆäº†æ•™è‚²ç³»ç»Ÿå¤šå˜çš„æƒ…å†µï¼Œæˆ‘ä¹Ÿæ˜¯å‡ ä¹è¸å‡†äº†æ¯æ¬¡æ•™è‚²æ”¹é©çš„é—¨æ§›ã€‚ä½†æ˜¯æˆ‘å¹¶ä¸è®¤ä¸ºï¼Œè¿™äº›æ”¹é©æœ€åæ”¹å˜äº†ä»€ä¹ˆï¼Œç”šè‡³æˆ‘ä¸è®¤ä¸ºæ•™æˆçš„å†…å®¹ä¼šå¯¹äººæœ‰ä»€ä¹ˆå½±å“ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘è®¤ä¸ºï¼Œå­¦æ ¡æ•™è‚²å¸¦ç»™æˆ‘æœ€å¤§çš„å¥½å¤„ï¼Œå°±æ˜¯å­¦ä¼šç³»ç»Ÿé€»è¾‘çš„æ€è€ƒä»¥åŠè‡ªå­¦èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;å¤§å¤šäººæ‰¹åˆ¤ä¸­å›½æ•™è‚²ä¸ºå¡«é¸­å¼æ•™è‚²ã€‚å…¶å®ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œè¿™åªæ˜¯ä¸€ç§è¿«ä¸å¾—å·²çš„æ‰‹æ®µã€‚åªæœ‰åœ¨ä¸¥é…·çš„è®­ç»ƒä¸‹ï¼Œæ‰æœ‰æ‚Ÿçš„å¯èƒ½ã€‚ç»ä¸åŒäºç½‘ç»œå°è¯´çš„ä¸»äººå…¬ï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨ä¸€å¤©çªç„¶çµå…‰ä¸€é—ªç„¶åæ‰“é€šäº†ä»»ç£äºŒè„‰å› æ­¤å­¦è´¯ä¸­è¥¿ã€‚æˆ‘ä»¬åªèƒ½åœ¨ä¸åœåœ°æ®‹é…·çš„è®­ç»ƒä¸­æ€»ç»“ï¼Œç›´åˆ°æœ‰ä¸€å¤©æ˜ç™½çŸ¥è¯†çš„ç›¸é€šæ€§ã€‚å¾ˆé—æ†¾çš„æ˜¯ï¼Œå¤ªå¤šäººéº»æœ¨åœ¨é‡å¤é«˜å¼ºåº¦çš„è®­ç»ƒä¸­ï¼Œåªæœ‰å°‘æ•°äººèƒ½å¤Ÿå‚é€ã€‚æˆ‘ä¹Ÿæ˜¯åœ¨å¤§å­¦æœ€åï¼Œæ‰æ˜ç™½è¿‡æ¥ï¼Œä¸ºæ—¶å·²æ™šã€‚&lt;/p&gt;
&lt;p&gt;æ•™è‚²ï¼Œæœ€å¤§çš„ç›®çš„æ˜¯æˆäººä»¥æ¸”ã€‚å­¦ä¼šå­¦ä¹ æ‰æ˜¯å­¦ä¹ æœ€å¤§çš„ç›®çš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è¯»ä¹¦ï¼Œä¸æ˜¯ä¸ºäº†è€ƒè¯•&quot;&gt;&lt;a href=&quot;#è¯»ä¹¦ï¼Œä¸æ˜¯ä¸ºäº†è€ƒè¯•&quot; class=&quot;headerlink&quot; title=&quot;è¯»ä¹¦ï¼Œä¸æ˜¯ä¸ºäº†è€ƒè¯•&quot;&gt;&lt;/a&gt;è¯»ä¹¦ï¼Œä¸æ˜¯ä¸ºäº†è€ƒè¯•&lt;/h3&gt;&lt;p&gt;ä¸Šäº†å¤§å­¦åï¼Œé™¤äº†å°‘æ•°çš„ä¸“ä¸šä¹¦ç±ï¼Œå‡ ä¹æ€ä¹ˆçœ‹ä¹¦äº†ã€‚å°±è¿™æ ·æµ‘æµ‘å™©å™©è¿‡äº†ä¸¤å¹´ï¼Œä¸ä»…ä¸“ä¸šå¹¶æ²¡æœ‰å¤šå¤§çš„æå‡ï¼Œçœ¼ç•Œå’Œæ€ç»´ä¹Ÿæ˜¯åœæ»ä¸å‰ã€‚æ‰€å¹¸çš„æ˜¯è¿™ä¸¤å¹´åˆæ¡å›äº†è¯»ä¹¦çš„ä¹ æƒ¯ã€‚å¦‚æœåªä¾é è€ƒè¯•æ¥é­ç¬è‡ªå·±è¯»ä¹¦ï¼Œææ€•ä¹Ÿæ— æ³•åœ¨æœªæ¥èµ°çš„æ›´è¿œå§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™é‡Œç®€å•åˆ—ä¸‹ä¹¦å•ï¼Œä¹Ÿç®—æ¨èä¸€äº›ä¹¦ç±&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://book.douban.com/subject/3369600/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å½“æˆ‘è°ˆè·‘æ­¥æ—¶æˆ‘è°ˆäº›ä»€ä¹ˆ&lt;/a&gt; æ˜¥ä¸Šæ˜¥æ ‘è®°å½•è‡ªå·±çš„è·‘æ­¥ä¸­ä¸€äº›éšæƒ³ã€‚çœ‹åˆ°å…¶ä¸­ä¸€äº›æƒ³æ³•å’Œè‡ªå·±è·‘æ­¥ä¸­æƒ³æ³•æœ‰ç›¸ä¼¼ä¹‹å¤„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://book.douban.com/subject/26835090/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Soft Skills: The software developerâ€™s life manual&lt;/a&gt;ä»£ç ä¹‹å¤–çš„è½¯æŠ€èƒ½ã€‚ç¨‹åºå‘˜ä¸èƒ½åªåŸ‹å¤´æŠ€æœ¯ï¼Œè¿˜åº”è¯¥æŠ¬å¤´çœ‹çœ‹ä¸–ç•Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://book.douban.com/subject/3432304/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å¤§æ±Ÿä¸œå»&lt;/a&gt;è®²æ”¹é©å¼€æ”¾å‰æœŸçš„å°è¯´ã€‚å‰ä¸¤éƒ¨ç»™æˆ‘çš„å¯å‘å¾ˆå¤šã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://book.douban.com/subject/4239246/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å¸‚åœºçš„åŠ›é‡&lt;/a&gt;æœ‰ç‚¹æµ…ï¼Œå®ä¾‹ä¸é”™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://book.douban.com/subject/7057936/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ‰¹åˆ¤æ€§æ€ç»´ï¼šå¸¦ä½ èµ°å‡ºæ€ç»´è¯¯åŒº&lt;/a&gt;ä¸­æ–‡ç¿»è¯‘æœ‰äº›æ— æ³•è¡¨è¾¾å®Œå–„ï¼Œä½†å†…å®¹çš„ç¡®è¯¦å®ï¼Œæœ‰èƒ½åŠ›çš„æ¨èçœ‹åŸç‰ˆ&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://book.douban.com/subject/5290524/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å¾®é©å‘½&lt;/a&gt;å†…å®¹åæ°´ï¼Œæ€è€ƒçš„ç‚¹ä¸é”™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;16å¹´å› ä¸ºæ¯•ä¸šï¼Œæ²¡èƒ½å®Œæˆè‡ªå·±åœ¨å¹´åˆå®šä¸‹çš„è¯»ä¹¦è®¡åˆ’ã€‚17å¹´ä¸è¯¥å†æœ‰å€Ÿå£ã€‚è¯»ä¹¦ï¼Œåº”è¯¥æ˜¯ä¸€è¾ˆå­çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æŠ€æœ¯&quot;&gt;&lt;a href=&quot;#æŠ€æœ¯&quot; class=&quot;headerlink&quot; title=&quot;æŠ€æœ¯&quot;&gt;&lt;/a&gt;æŠ€æœ¯&lt;/h3&gt;&lt;p&gt;ä½œä¸ºç¨‹åºå‘˜ï¼Œå¹´ç»ˆæ€»ç»“æ€ä¹ˆèƒ½ä¸å†™æŠ€æœ¯å‘¢ï¼Ÿä¸è¿‡ï¼Œæˆ‘ä¸æ‰“ç®—åœ¨è¿™é‡Œå†™å¾ˆå¤šæŠ€æœ¯å†…å®¹ï¼Œåªæƒ³è°ˆè°ˆå¯¹ç¼–ç¨‹æŠ€æœ¯çš„ä¸€äº›æ€è€ƒã€‚&lt;/p&gt;
&lt;p&gt;ç¼–ç¨‹æŠ€æœ¯ï¼Œæ€»çš„æ¥è¯´æˆ‘è®¤ä¸ºä¹Ÿå±äºå·¥ç¨‹æŠ€æœ¯çš„ä¸€ç§ï¼Œè€Œä¸”æ˜¯å±äºé—¨æ§›è¾ƒä½çš„éƒ¨åˆ†ã€‚å›ä¸è§æ»¡è¡—40å¤©åŸ¹è®­Androidï¼ŒiOSï¼Œwebæœˆè–ªè¿‡ä¸‡ã€‚ç„¶è€Œï¼Œåªæœ‰æ½®é€€äº†æ‰çŸ¥é“è°åœ¨è£¸æ³³ã€‚16å¹´çš„èµ„æœ¬å¯’å†¬ä¹Ÿå½±å“åˆ°äº†ç‚™æ‰‹å¯çƒ­çš„äº’è”ç½‘äº§ä¸šã€‚ä¸€æ‰¹æ‰¹åˆ›ä¸šå…¬å¸å€’ä¸‹ä½¿åˆçº§å¼€å‘ä¸¥é‡è¿‡å‰©ã€‚ä¸€ä¸ªiOSå²—ä½ä¸€å‘¨å‡ ç™¾ä¸Šåƒå°ç®€å†ä¸æ˜¯å¤¸å¼ ã€‚ä½œä¸ºä¸€ååˆšæ¯•ä¸šè¿›å…¥å·¥ä½œå²—ä½çš„å¼€å‘ï¼Œè¯´æ²¡æœ‰æ‹…å¿ƒé‚£æ˜¯å‡çš„ã€‚ç©¶ç«Ÿåœ¨å‡ å¹´åå¦‚ä½•ä¿æŒä¸€å®šçš„ç«äº‰åŠ›ï¼Ÿè¿™äº›ä¸ªä¸€ç›´åœ¨æ€è€ƒè¿™äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¹¿ä¹‰ä¸Šçš„ä¿¡æ¯æŠ€æœ¯å‘å±•å·²ç»æœ‰å‡ åä¸ªå¹´å¤´äº†ï¼Œè€Œæ–°æ¦‚å¿µè¿˜åœ¨å±‚å‡ºä¸ç©·ã€‚æœºå™¨å­¦ä¹ ï¼ŒAR,VR,å¤§æ•°æ®ç­‰ç­‰åå­—å®¹æ˜“è®©æ–°è¿›è¡Œä¸šçš„äººå¤´æ™•çœ¼èŠ±ã€‚ä¸èƒ½ä¸æ‰¿è®¤ï¼ŒAPPæ—¶ä»£å·²ç»å¼€å§‹æ‹‰ä¸‹å¸·å¹•äº†ï¼Œæœªæ¥ç©¶ç«Ÿåœ¨å“ªï¼Œè°ä¹Ÿç»™ä¸å‡ºä¸€ä¸ªå‡†ç¡®çš„ç­”æ¡ˆã€‚è·Ÿç€è¡Œä¸šèµ°çš„æŠ€æœ¯ä¹Ÿåªèƒ½è·Ÿç€è¡Œä¸šçš„å…´è¡°ã€‚ä½œä¸ºæŠ€æœ¯ï¼Œä¸èƒ½åªç€çœ¼ä¸€å¤„ï¼Œä¿æŒå­¦ä¹ ï¼Œæ‰èƒ½æ°¸è¿œä¸è¢«æ‹‰ä¸‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;17å¹´ï¼Œè·¯åœ¨å“ªé‡Œ&quot;&gt;&lt;a href=&quot;#17å¹´ï¼Œè·¯åœ¨å“ªé‡Œ&quot; class=&quot;headerlink&quot; title=&quot;17å¹´ï¼Œè·¯åœ¨å“ªé‡Œ&quot;&gt;&lt;/a&gt;17å¹´ï¼Œè·¯åœ¨å“ªé‡Œ&lt;/h3&gt;&lt;p&gt;çµ®å¨åŠå¤©ï¼Œå‘ç°è‡ªå·±çš„è¡Œæ–‡ä¾æ—§è¿™ä¹ˆçƒ‚ï¼ˆé€ƒã€‚å¹´ç»ˆæ€»ç»“ï¼Œä¸å°±æ˜¯åº”è¯¥ç»™æœªæ¥çš„è‡ªå·±é¿å…è¸©ä¸ŠåŒä¸€ä¸ªå‘å—ã€‚17å¹´ä¼šæ€ä¹ˆæ ·ï¼Œæˆ‘ä¸çŸ¥é“ã€‚ä½†æ˜¯æˆ‘æƒ³æˆ‘åº”è¯¥è®©è‡ªå·±çŸ¥é“17è¯¥æ€ä¹ˆæ ·ã€‚&lt;/p&gt;
&lt;p&gt;è¯»ä¹¦ä¾æ—§æ˜¯ä¸å¯å°‘çš„ï¼Œä¿æŒä¸€ä¸ªæœˆä¸€æœ¬çš„èŠ‚å¥ã€‚&lt;/p&gt;
&lt;p&gt;æŠ€æœ¯ä¸Šï¼Œæœ¬èŒä¸Šçš„iOSå®¢æˆ·ç«¯å¼€å‘è¦æ·±æŒ–ä¸‹å»ï¼Œä¸èƒ½åœç•™åœ¨è¡¨é¢çš„åº”ç”¨äº†ã€‚åˆæ¬¡ä¹‹å¤–ï¼Œå­¦å­¦æ•°æ®å¤„ç†åˆ†æç›¸å…³çš„æŠ€æœ¯å§ã€‚&lt;/p&gt;
&lt;p&gt;é”»ç‚¼ï¼Œ16å¹´çš„æ–­æ–­ç»­ç»­çš„ï¼Œæ²¡èƒ½ä¿æŒä¸€å®šæƒ¯æ€§ã€‚é”»ç‚¼æ˜¯æœ€è€ƒéªŒä¸€ä¸ªäººæ„å¿—åŠ›çš„è¡Œä¸ºã€‚17å¹´è¦ä¿æŒï¼Œåªæœ‰ä¸€ä¸ªå¥½èº«ä½“æ‰èƒ½åº”ä»˜ä¸€åˆ‡ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;2016å¹´ï¼Œæ³¨å®šæ˜¯ä¸€ä¸ªä¸ä¸€æ ·çš„å¹´ä»½ã€‚å¹´å¤´åˆ°å¹´å°¾ï¼Œä¸–ç•Œä¸Šå‘ç”Ÿäº†å¤ªå¤šå†å²æ€§çš„è¿›ç¨‹ã€‚ä¸€ä¸ªè‹±å›½è„±æ¬§ï¼Œä¸€ä¸ªç‰¹æœ—æ™®å½“é€‰å°±è¶³ä»¥è®©ä¸–äººè°ˆè®ºä¸Šè®¸å¤šå¹´ã€‚å¯¹äºæˆ‘ä¸ªäººï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸åŒå¯»å¸¸çš„å¹´ä»½ï¼šä»Šå¹´æˆ‘æ¯•ä¸šäº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ¯•ä¸šäº†ï¼Œæˆ‘æƒ³è°ˆè°ˆæ•™è‚²&quot;&gt;&lt;a href=&quot;#æ¯•ä¸šäº†ï¼Œæˆ‘æƒ³è°ˆè°ˆæ•™è‚²&quot;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ä»é¢è¯•æƒ³åˆ°çš„</title>
    <link href="http://csbzhixing.github.io/2016/12/19/%E6%B5%85%E8%B0%88%E4%B8%80%E7%82%B9%E9%9D%A2%E8%AF%95%E4%BD%93%E9%AA%8C/"/>
    <id>http://csbzhixing.github.io/2016/12/19/æµ…è°ˆä¸€ç‚¹é¢è¯•ä½“éªŒ/</id>
    <published>2016-12-19T01:50:41.000Z</published>
    <updated>2016-12-31T01:51:16.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;æµ…è°ˆä¸€ç‚¹é¢è¯•ä½“éªŒ&quot;&gt;&lt;a href=&quot;#æµ…è°ˆä¸€ç‚¹é¢è¯•ä½“éªŒ&quot; class=&quot;headerlink&quot; title=&quot;æµ…è°ˆä¸€ç‚¹é¢è¯•ä½“éªŒ&quot;&gt;&lt;/a&gt;æµ…è°ˆä¸€ç‚¹é¢è¯•ä½“éªŒ&lt;/h1&gt;&lt;p&gt;æœ€è¿‘éƒ¨é—¨ä¸šåŠ¡æ‰©å±•ï¼Œç§»åŠ¨ç«¯ç»ˆäºè¿æ¥äº†éš¾å¾—æ‹›äººçš„æœºä¼šã€‚åœ¨ç»å†åŠä¸ªæœˆçš„æ‹›è˜ä½“éªŒåï¼Œæ„Ÿè§¦è‰¯å¤šï¼Œæƒ³æ€»ç»“ä¸‹è¿™åŠä¸ªæœˆçš„ä½“éªŒä»¥åŠä¸€ç‚¹æƒ³æ³•&lt;/p&gt;
&lt;h2 id=&quot;ç§»åŠ¨ç«¯æ€ä¹ˆäº†&quot;&gt;&lt;a href=&quot;#ç§»åŠ¨ç«¯æ€ä¹ˆäº†&quot; class=&quot;headerlink&quot; title=&quot;ç§»åŠ¨ç«¯æ€ä¹ˆäº†&quot;&gt;&lt;/a&gt;ç§»åŠ¨ç«¯æ€ä¹ˆäº†&lt;/h2&gt;&lt;p&gt; åœ¨æŒ‚å‡ºç®€å†äº†ä¸åˆ°ä¸€å¤©ï¼Œé‚®ç®±å°±è¢«ä¸Šç™¾å°ç®€å†è½°ç‚¸äº†ã€‚è™½ç„¶å¯¹ä»Šå¤©å°±ä¸šå½¢åŠ¿æœ‰ä¸€äº›è€³é—»ï¼Œä½†æ˜¯ç¢°åˆ°å¦‚æ­¤æƒ…å½¢è¿˜æ˜¯æœ‰ç‚¹æƒŠè®¶ã€‚åˆ°æ˜¨å¤©ï¼Œæ•´æ•´æ”¶åˆ°äº†600å¤šå°iOSç®€å†ã€‚iOSå¼€å‘ç©¶ç«Ÿæ€ä¹ˆäº†ï¼Ÿæ˜¯è‹¹æœä¸è¡Œäº†å—ï¼Ÿå…¶å®å¹¶ä¸æ˜¯iOSå¼€å‘ä¸è¡Œäº†ï¼Œè€Œæ˜¯ç§»åŠ¨ç«¯çš„é£å£è¿‡äº†ã€‚åœ¨ç®€å†ä¸­ï¼Œæˆ‘çœ‹åˆ°äº†å½¢å½¢è‰²è‰²è‰²çš„é¡¹ç›®ã€‚ä»2Cçš„æ•™è‚²ï¼ŒåŒ»ç–—ï¼Œç›´æ’­ç­‰ç­‰ï¼Œåˆ°2Bçš„IMï¼Œé¡¹ç›®ç®¡ç†ç­‰ç­‰ï¼Œè¿™äº›é¡¹ç›®éƒ½æœ‰ä¸€ä¸ªç‰¹ç‚¹ â€” å¼€å‘æ—¶é—´ç‰¹åˆ«çŸ­ã€‚å‡ ä¹æ²¡æœ‰ä¸€ä¸ªé¡¹ç›®æ˜¯åœ¨ä¸€ä¸ªäººæ‰‹é‡Œå¼€å‘è¶…è¿‡1å¹´çš„ã€‚åŒæ—¶ï¼Œå‡ ä¹æ¯ä¸ªäººæ‰‹é‡Œéƒ½æœ‰å››äº”ä¸ªé¡¹ç›®ï¼Œç”šè‡³ä¸€ä¸ªåˆšå·¥ä½œä¸€å¹´çš„äººçš„ç®€å†é‡Œå°±å†™äº†å››ä¸ªé¡¹ç›®ã€‚å¯è§ï¼Œåœ¨è¿‡å»ä¸€ä¸¤å¹´ï¼Œç§»åŠ¨ç«¯å¼€å‘è¿‡çƒ­å¯¼è‡´è®¸å¤šå…¬å¸ç›²ç›®çš„ä¸Šé¡¹ç›®ã€‚å…¶ä¸­å°è±¡æ·±åˆ»çš„æ˜¯ï¼Œå…‰æ±½è½¦è“ç‰™ç›¸å…³çš„APPå°±æœ‰åå‡ ä¸ªã€‚ä¸è¿‡åœ¨æ±½è½¦ä¸Šé©¾é©¶å‘˜ä½¿ç”¨æ‰‹æœºçš„é—®é¢˜ï¼Œå°±è¯´æœ‰å¤šå°‘äººçœŸçš„éœ€è¦ä¸€ä¸ªAPPæ¥é€šè¿‡è“ç‰™æ§åˆ¶æ±½è½¦åŠŸèƒ½ï¼Ÿè¿™äº›é¡¹ç›®å¾€å¾€åœ¨åŠŸèƒ½ç®€å•çš„åŒæ—¶ï¼Œæ²¡æœ‰å¤ªå¤šçš„æŠ€æœ¯éš¾åº¦ï¼Œä»…ä»…æ˜¯ä¸ºäº†å®Œæˆå…¬å¸äº§å“è€Œç”Ÿæˆçš„ã€‚åœ¨é¢è¯•çš„è¿‡ç¨‹ä¸­ï¼Œç®€å•é—®äº†äº›è“ç‰™åè®®çš„å®ç°ï¼Œå‡ ä¹100%çš„é¢è¯•è€…éƒ½è¯´é€šè¿‡ä¸‰æ–¹å®ç°çš„ã€‚éšç€æŠ•èµ„çƒ­æ½®è¤ªå»ï¼Œè¿™äº›é¡¹ç›®çš„ä¸€æ‰¹æ‰¹çš„æ­»å»ï¼Œè‡ªç„¶é‡Šæ”¾å‡ºäº†è®¸å¤šåˆçº§ç§»åŠ¨ç«¯å¼€å‘(å°¤å…¶iOS)ã€‚ç§»åŠ¨ç«¯å¹¶æ²¡æœ‰æ­»å»ï¼Œè€Œæ˜¯èµ°å‘ç†æ™ºï¼Œåªæ˜¯åœ¨é£å£ä¸Šçš„çŒªæ‰äº†ä¸‹æ¥ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¯·ä¸è¦å†™ç²¾é€šå¥½å—&quot;&gt;&lt;a href=&quot;#è¯·ä¸è¦å†™ç²¾é€šå¥½å—&quot; class=&quot;headerlink&quot; title=&quot;è¯·ä¸è¦å†™ç²¾é€šå¥½å—&quot;&gt;&lt;/a&gt;è¯·ä¸è¦å†™ç²¾é€šå¥½å—&lt;/h2&gt;&lt;p&gt; åœ¨ç­›é€‰ç®€å†çš„æ—¶å€™ï¼Œçœ‹åˆ°ç²¾é€šå’Œç†Ÿç»ƒçš„æ¬¡æ•°å‡ ä¹æ˜¯ä¸€æ ·å¤šã€‚å‚ä¸ç«è˜çš„äººå‘˜å‡ ä¹éƒ½æ˜¯1-3å¹´ç»éªŒã€‚æ€ä¹ˆæ ·æ‰å¯ä»¥è¯´å¯¹æŸé¡¹æŠ€èƒ½è¾¾åˆ°äº†ç²¾é€šçš„åœ°æ­¥ï¼Ÿæˆ‘è®¤ä¸ºï¼Œè‡³å°‘åœ¨å¯¹äºè¿™é¡¹æŠ€èƒ½ï¼Œæ— è®ºç†è®ºè¿˜æ˜¯åº”ç”¨éƒ½è¾¾åˆ°äº†çƒ‚ç†Ÿäºå¿ƒçš„åœ°æ­¥ã€‚åœ¨å¼€å§‹æ—¶ï¼Œå¯¹äºç®€å†ä¸Šå†™ç€ç²¾é€šçš„é¢è¯•è€…ï¼Œæˆ‘æ— ä¸æŠ±ç€æ¢è®¨çš„å¿ƒæ€å»è®¨è®ºã€‚ç„¶è€Œï¼Œè¿„ä»Šä¸ºæ­¢ï¼Œå‡ ä¹æ²¡æœ‰ç²¾é€šOCçš„é¢è¯•è€…èƒ½å¤Ÿè®²æ¸…æ¥š&lt;code&gt;atomic&lt;/code&gt; å’Œ &lt;code&gt;nonatomic&lt;/code&gt;çš„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆå¸¸ç”¨&lt;code&gt;nonatomic&lt;/code&gt;ï¼Œä¸ºä»€ä¹ˆç”¨&lt;code&gt;atomic&lt;/code&gt;ä¹Ÿä¸èƒ½ä¿è¯å®‰å…¨ã€‚è‡³äºç²¾é€šTCP/UPDçš„ï¼Œç”šè‡³ä¸èƒ½å‡†ç¡®è®²å‡ºTCPè¿æ¥æ–­å¼€çš„è¿‡ç¨‹ã€‚æ­£å¦‚æœ‰å¥è¯ï¼šæ‡‚çš„è¶Šå¤šï¼Œè¶Šè§‰å¾—è‡ªå·±ä¸æ‡‚ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸å¥½æ„æ€ï¼Œæˆ‘æ²¡æƒ³è¿‡&quot;&gt;&lt;a href=&quot;#ä¸å¥½æ„æ€ï¼Œæˆ‘æ²¡æƒ³è¿‡&quot; class=&quot;headerlink&quot; title=&quot;ä¸å¥½æ„æ€ï¼Œæˆ‘æ²¡æƒ³è¿‡&quot;&gt;&lt;/a&gt;ä¸å¥½æ„æ€ï¼Œæˆ‘æ²¡æƒ³è¿‡&lt;/h2&gt;&lt;p&gt;è¿™ææ€•æ˜¯æˆ‘å¬è¿‡æœ€å¤šçš„ä¸€å¥è¯ï¼Œä¹Ÿæ˜¯æˆ‘å¬ä¸æ„¿å¬åˆ°ä¸€å¥è¯ã€‚ä½œä¸ºä¸€ä¸ªå¼€å‘ï¼Œæ¯å¤©æˆ‘ä»¬éƒ½èƒ½é‡åˆ°å„ç§å„æ ·çš„é—®é¢˜ã€‚ç„¶è€Œé‡åˆ°äº†é—®é¢˜ï¼Œæˆ‘ä»¬æ˜¯ç®€å•çš„ç™¾åº¦ä¸€ä¸‹ï¼Œè¿˜æ˜¯åœä¸‹æ¥æƒ³æƒ³åé¢çš„åŸå› ï¼Ÿæ¯é€¢è°ˆåˆ°å¾ªç¯å¼•ç”¨ï¼Œå‡ ä¹éƒ½è°ˆåˆ°blockä¸­çš„æƒ…å†µã€‚ç„¶è€Œå¦‚æœæˆ‘ç›´æ¥é—®é“é™¤äº†blockä¸­çš„æƒ…å†µå‘¢ï¼Œå‡ ä¹80%çš„é¢è¯•è€…éƒ½æ‡µé€¼äº†ã€‚æˆ‘æƒ³ï¼Œå¦‚æœçœŸæ­£ç†è§£äº†å¾ªç¯å¼•ç”¨ï¼Œä¸å¯èƒ½åªèƒ½æƒ³åˆ°blockä¸­è¿™ä¹ˆä¸€ç§æƒ…å†µã€‚è°ˆåˆ°&lt;code&gt;autoreleasepool&lt;/code&gt;çš„ç†è§£å’Œç”¨æ³•ã€‚é™¤äº†ç®€å•å’Œ&lt;code&gt;ARC&lt;/code&gt;å…³è”åœ¨ä¸€èµ·(å…¶å®è¿™é‡Œä¸è¯¥æ··æ·†åœ¨ä¸€èµ·)ï¼Œå°±åªä¼šç®€å•çš„è¯´ä¸çŸ¥é“äº†ã€‚ç„¶è€Œï¼Œåœ¨&lt;code&gt;main.m&lt;/code&gt;æ–‡ä»¶ä¸­å…¶å®å°±ç”¨äº†&lt;code&gt;autorealesepool&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;è¯·å†™ä¸Šä½ ç†Ÿæ‚‰çš„ï¼Œè€Œä¸æ˜¯ä»…ä»…ç”¨è¿‡çš„&quot;&gt;&lt;a href=&quot;#è¯·å†™ä¸Šä½ ç†Ÿæ‚‰çš„ï¼Œè€Œä¸æ˜¯ä»…ä»…ç”¨è¿‡çš„&quot; class=&quot;headerlink&quot; title=&quot;è¯·å†™ä¸Šä½ ç†Ÿæ‚‰çš„ï¼Œè€Œä¸æ˜¯ä»…ä»…ç”¨è¿‡çš„&quot;&gt;&lt;/a&gt;è¯·å†™ä¸Šä½ ç†Ÿæ‚‰çš„ï¼Œè€Œä¸æ˜¯ä»…ä»…ç”¨è¿‡çš„&lt;/h2&gt;&lt;p&gt;åœ¨ç­›é€‰ç®€å†çš„æ—¶å€™ï¼Œç®€å†ä¸Šæœ‰ä¸€äº›æ–°æ„çš„å­—çœ¼çš„ç¡®æœ‰åŠ åˆ†é¡¹ã€‚æ¯”å¦‚&lt;code&gt;swift3&lt;/code&gt;çš„å¼€å‘ç»å†ï¼Œç½‘ç»œå’Œæ¸²æŸ“çš„ä¼˜åŒ–ï¼Œç†Ÿæ‚‰ç¬¬ä¸‰æ–¹åº“çš„å®ç°(&lt;code&gt;YYKit&lt;/code&gt;,&lt;code&gt;SDWebImage&lt;/code&gt;ç­‰ç­‰)ã€‚ç„¶è€Œï¼Œå½“ä½ åœ¨ç®€å†ä¸Šä½“ç°å‡ºæ¥è¿™äº›ä¸œè¥¿æ—¶å€™ï¼Œèµ·ç è‡ªå·±è¦ç†Ÿæ‚‰ã€‚ä»…ä»…ä½¿ç”¨swiftå†™äº†ä¸€ä¸ªdemoå¯ä¸èƒ½ç†Ÿæ‚‰swiftã€‚swiftçš„ç‰¹æ€§ï¼Œæ¯”å¦‚æŸ¯é‡ŒåŒ–ï¼Œæ¯”å¦‚enum,structs,classçš„åŒºåˆ«å’Œé€‰å‹è€ƒè™‘ï¼Œè¿™äº›é—®é¢˜å¦‚æœéƒ½æ²¡æœ‰è€ƒè™‘ï¼Œä»…ä»…æŠŠä¸€ä¸ªdemoä»ocè½¬æˆswiftä¹Ÿä»…ä»…åœ¨è¯­è¨€å±‚é¢çš„è½¬åŒ–è€Œå·²ã€‚è€Œä¼˜åŒ–çš„éƒ¨åˆ†ï¼Œèµ·ç è¦ææ¸…æ¥šä¼˜åŒ–çš„æ„ä¹‰åœ¨å“ªé‡Œï¼Œä¸ºä½•éœ€è¦ä¼˜åŒ–ï¼Œä»…ä»…å°è£…ä¸šåŠ¡ç›¸å…³å†…å®¹å¯ä¸æ˜¯ä¼˜åŒ–ã€‚è€Œç¬¬ä¸‰æ–¹åº“ç†è§£ï¼Œä¸è¯¥åªæ˜¯åœ¨è°ƒè°ƒAPIè¿™æ ·ã€‚æ— è®ºå¤šä¹ˆä¼˜ç§€çš„ç¬¬ä¸‰æ–¹å®ç°éƒ½æœ‰è‡ªå·±çš„ä¸è¶³å’Œå¯ä»¥æ”¹è¿›çš„åœ°æ–¹ã€‚åªæœ‰è‡ªå·±è¯»äº†æºç ï¼Œè®¤çœŸå»æ€è€ƒï¼Œåˆ†è¾¨ä¼˜åŠ£ï¼Œæ‰èƒ½è°ˆå¾—ä¸Šç†è§£ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¯·ä¸è¦è¯´ç”¨ä¸åˆ°&quot;&gt;&lt;a href=&quot;#è¯·ä¸è¦è¯´ç”¨ä¸åˆ°&quot; class=&quot;headerlink&quot; title=&quot;è¯·ä¸è¦è¯´ç”¨ä¸åˆ°&quot;&gt;&lt;/a&gt;è¯·ä¸è¦è¯´ç”¨ä¸åˆ°&lt;/h2&gt;&lt;p&gt;è¿™å¥è¯æœ€å¤šå¬åˆ°çš„æ˜¯åœ¨é—®ç®—æ³•çš„æ—¶å€™ã€‚å¤±æœ›çš„æ˜¯ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿˜æ²¡æœ‰äººèƒ½ç­”å‡ºå‡ é“ç®€å•çš„ç®—æ³•å’Œæ•°æ®ç»“æ„ç›¸å…³çš„é¢˜ç›®ã€‚ä¸€ä¸ªç®€å•çš„æ±‚ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°å‡ ä¹æ²¡æœ‰äººèƒ½ç»™å‡ºæƒ³æ³•(æ²¡é”™ï¼Œå°±æ˜¯ç›´æ¥è¯´ä¸ä¼š)ã€‚è€Œå½’å¹¶æ’åºï¼Œå¿«æ’ï¼ŒäºŒåˆ†æŸ¥æ‰¾æ›´æ˜¯æ— äººèƒ½è¯´å‡ºä¸€äºŒã€‚iOSå¼€å‘çœŸçš„ä¸éœ€è¦ç”¨åˆ°ç®—æ³•å’Œæ•°æ®ç»“æ„å—ï¼Ÿæˆ‘æƒ³ä¸æ˜¯çš„ã€‚å…¶å®å¾ˆå¤šåŠ£è´¨çš„ä»£ç å¾€å¾€æ˜¯å¯¹æ•°æ®ç»“æ„å’Œç®—æ³•çš„ä¸ç†Ÿæ‚‰å¯¼è‡´çš„ã€‚è®°å¾—ä¸€ä¸ªéå¸¸å¸¸è§çš„ä¾‹å­ï¼šæ–°å¢æ•°æ®çš„æ¯”å¯¹ã€‚æ¯”å¦‚å¢é‡ä¸ŠæŠ¥é€šè®¯å½•ï¼Œå¾ˆå¤šäººæ—ºæ—ºæ˜¯åšforå¾ªç¯åµŒå¥—ã€‚ç„¶è€Œå¦‚æœèƒ½ç”¨åˆ°hashè¡¨ï¼Œæ•ˆç‡èƒ½æœ‰é‡çº§çš„æé«˜ã€‚è™½ç„¶å¦‚ä»ŠiOSå¼€å‘èƒ½çœŸçš„éœ€è¦è‡ªå·±å»æ‰‹å†™ç®—æ³•çš„åœ°æ–¹å¾ˆå°‘ï¼Œä½†å¦‚æœå°±æ­¤ä¸å»å­¦ä¹ ï¼Œä¸è¯´ä¸èƒ½æ›´è¿›ä¸€æ­¥ï¼Œå¯èƒ½è¿˜ä¼šäº§å‡ºè®¸å¤šåŠ£è´¨çš„ä»£ç ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŸºç¡€ï¼Œç¦»ä¸å¼€çš„åŸºç¡€&quot;&gt;&lt;a href=&quot;#åŸºç¡€ï¼Œç¦»ä¸å¼€çš„åŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;åŸºç¡€ï¼Œç¦»ä¸å¼€çš„åŸºç¡€&quot;&gt;&lt;/a&gt;åŸºç¡€ï¼Œç¦»ä¸å¼€çš„åŸºç¡€&lt;/h2&gt;&lt;p&gt;ç»è¿‡å¤šæ¬¡é¢è¯•åï¼ŒHRåé¦ˆç»™æˆ‘ï¼Œè¯´é¢è¯•è€…è®¤ä¸ºæˆ‘è€ƒçš„å†…å®¹åå‘äºâ€œæ­»â€çš„å†…å®¹ï¼Œè€Œå¼€æ”¾æ€§å…³äºé¡¹ç›®çš„å†…å®¹å¾ˆå°‘ã€‚ç¬”è€…åœ¨è¿™é‡Œé˜è¿°ä¸‹è‡ªå·±çš„è§‚ç‚¹ã€‚ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·ï¼Œå†ç‰›çš„äººï¼Œå†å¥½çš„é¡¹ç›®ï¼Œæ— ä¸æ˜¯ä»ä¸€ç‚¹ç‚¹åŸºç¡€å¼€å§‹çš„ã€‚ç¦»å¼€äº†æ‰å®çš„åŸºç¡€ï¼Œæˆ‘ä¸è®¤ä¸ºè®²å¼€æ”¾æ€§çš„å†…å®¹èƒ½å¤Ÿè¯´å‡ºç‹¬ç‰¹çš„è§è§£ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä¹Ÿé—®è¿‡ä¸€äº›å¼€æ”¾æ€§çš„å†…å®¹ï¼Œæ¯”å¦‚æ¸²æŸ“çš„ä¼˜åŒ–ï¼Œç½‘ç»œä¼˜åŒ–çš„ç‚¹ã€‚ç„¶è€Œï¼Œå¯¹viewæ¸²æŸ“çš„æœºåˆ¶æ·±å…¥çš„ä¸å¤Ÿä»¥åŠå¯¹ç½‘ç»œåè®®çš„æµ…è–„è§è§£ï¼Œå½±å“åˆ°äº†è®¸å¤šäººèƒ½è°ˆçš„å¾ˆå°‘ã€‚æ‰€ä»¥ï¼Œæˆ‘åœ¨åé¢çš„é¢è¯•ï¼Œä¾ç„¶ä¼šåšæŒå¯¹åŸºç¡€çš„è€ƒæ ¸ï¼Œæ¯•ç«Ÿï¼ŒåŸºç¡€æ‰å®äº†ï¼Œå†å»åšæ·±å…¥çš„æ¢ç´¢ä¹Ÿä¸ä¼šæœ‰å¤ªå¤§çš„å›°éš¾ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸‰å¹´ï¼Œè¿˜æ˜¯ä¸€&quot;&gt;&lt;a href=&quot;#ä¸‰å¹´ï¼Œè¿˜æ˜¯ä¸€&quot; class=&quot;headerlink&quot; title=&quot;ä¸‰å¹´ï¼Œè¿˜æ˜¯ä¸€&quot;&gt;&lt;/a&gt;ä¸‰å¹´ï¼Œè¿˜æ˜¯ä¸€&lt;/h2&gt;&lt;p&gt;åœ¨å‰æ–‡è¯´åˆ°ï¼Œå‚ä¸é¢è¯•çš„äººéƒ½æ˜¯æœ‰ä¸¤ä¸‰å¹´å¼€å‘ç»éªŒï¼Œæœ‰æ•°ä¸ªé¡¹ç›®ç»éªŒåœ¨èº«çš„ã€‚ç„¶è€Œåœ¨æˆ‘çœ‹æ¥ï¼Œä»–ä»¬ä»…ä»…æ˜¯æŠŠä¸€å¹´ç»éªŒï¼Œåå¤ç”¨äº†ä¸‰å¹´è€Œå·²ï¼Œç”šè‡³ï¼Œæˆ‘è®¤ä¸ºå…¶ä¸­æœ‰äº›äººç”šè‡³ä¸å¦‚ä¼˜ç§€çš„åº”å±Šã€‚ä¸ºä½•ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œåœ¨æˆ‘çœ‹æ¥å¤šæ•°åŸå› åœ¨äºæŠŠè‡ªå·±çš„çœ¼ç•Œå›°æ­»äº†ã€‚å‡ ä¹æ‰€æœ‰äººçš„ç®€å†ä¸Šéƒ½å†™ç€èƒ½å¤Ÿå®Œæˆä¸€ä¸ªå®Œæ•´çš„appã€‚ä½†æ˜¯åœ¨æˆ‘çœ‹æ¥ï¼Œå®Œæˆä¸€ä¸ªå®Œæ•´APPæ˜¯ä¸€ä¸ªæœ‰ä¸€å¹´å¼€å‘ç»éªŒåˆæ ¼çš„iOSå¼€å‘å°±èƒ½åšåˆ°çš„ã€‚è€Œä¸¤ä¸‰å¹´ç»éªŒçš„å¼€å‘ï¼Œåº”è¯¥æ›´å¤šå»æ·±å…¥ç»†èŠ‚ï¼Œä¸²è”è‡ªå·±çš„çŸ¥è¯†ã€‚è®°å¾—æˆ‘å¸¸é—®ä¸€ä¸ªé—®é¢˜ï¼šiOSä¸­æœ‰å“ªäº›é”çš„å®ç°æ–¹æ³•ï¼Ÿå°‘æ•°äººèƒ½è°ˆåˆ°&lt;code&gt;NSLock&lt;/code&gt;ï¼Œå¤šæ•°äººåªçŸ¥é“&lt;code&gt;synchronized&lt;/code&gt;ã€‚æˆ‘ä¸æ˜¯å¾ˆç†è§£ä¸‰å¹´çš„å¼€å‘ç»å†å°±æ²¡æƒ³äº†è§£è¿‡å…¶ä»–çš„å®ç°å—ï¼Ÿå†µä¸”ç½‘ä¸Šè®²è§£çš„æ–‡ç« ä¹Ÿä¸å°‘ã€‚&lt;/p&gt;
&lt;p&gt;åæ§½äº†é‚£ä¹ˆå¤šï¼Œå®é™…ä¸Šä¹Ÿæ˜¯æƒ³é­ç¬è‡ªå·±ã€‚å­¦æ— æ­¢å¢ƒï¼Œæœ‰å¤ªå¤šçš„ç‚¹éœ€è¦è‡ªå·±å»ç ”ç©¶ï¼Œæ°¸è¿œä¸èƒ½æ»¡è¶³ç°æœ‰çš„çŠ¶å†µï¼Œæ°¸è¿œä¸è¦è®©è‡ªå·±å¾…åœ¨èˆ’é€‚åŒºï¼Œåˆ‡è®°åˆ‡è®°ã€‚&lt;/p&gt;
&lt;p&gt;åé¢å¯èƒ½ä¼šæ€»ç»“ä¸‹åœ¨é¢è¯•ä¸­é—®é“çš„é—®é¢˜ã€‚å®é™…ä¸Šæœ‰äº›é—®é¢˜ä¹Ÿæ˜¯æœ€è¿‘åœ¨å‡†å¤‡çš„æ—¶å€™å­¦ä¹ åˆ°äº†æ›´å¤šçš„å†…å®¹ï¼Œä¹Ÿç®—ä¸ºè‡ªå·±çš„çŸ¥è¯†ä½“ç³»åšäº†è¡¥å……ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æµ…è°ˆä¸€ç‚¹é¢è¯•ä½“éªŒ&quot;&gt;&lt;a href=&quot;#æµ…è°ˆä¸€ç‚¹é¢è¯•ä½“éªŒ&quot; class=&quot;headerlink&quot; title=&quot;æµ…è°ˆä¸€ç‚¹é¢è¯•ä½“éªŒ&quot;&gt;&lt;/a&gt;æµ…è°ˆä¸€ç‚¹é¢è¯•ä½“éªŒ&lt;/h1&gt;&lt;p&gt;æœ€è¿‘éƒ¨é—¨ä¸šåŠ¡æ‰©å±•ï¼Œç§»åŠ¨ç«¯ç»ˆäºè¿æ¥äº†éš¾å¾—æ‹›äººçš„æœºä¼šã€‚åœ¨ç»å†åŠä¸ªæœˆçš„æ‹›è˜ä½“éªŒåï¼Œæ„Ÿè§¦è‰¯å¤šï¼Œæƒ³æ€»ç»“
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Weex, React Native, JSPatch</title>
    <link href="http://csbzhixing.github.io/2016/08/23/%20RN--WEEX--JSPATCH/"/>
    <id>http://csbzhixing.github.io/2016/08/23/ RN--WEEX--JSPATCH/</id>
    <published>2016-08-23T15:16:32.000Z</published>
    <updated>2016-08-23T15:20:46.000Z</updated>
    
    <content type="html">&lt;p&gt;æœ¬æ–‡æ˜¯åšå†…éƒ¨åˆ†äº«çš„æ—¶å€™æ•´ç†çš„çŸ¥è¯†å†…å®¹ï¼Œæ•´ç†äº†å‡ºæ¥ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æŠ€æœ¯ä»‹ç»&quot;&gt;&lt;a href=&quot;#æŠ€æœ¯ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;æŠ€æœ¯ä»‹ç»&quot;&gt;&lt;/a&gt;æŠ€æœ¯ä»‹ç»&lt;/h2&gt;&lt;h3 id=&quot;Weex&quot;&gt;&lt;a href=&quot;#Weex&quot; class=&quot;headerlink&quot; title=&quot;Weex&quot;&gt;&lt;/a&gt;Weex&lt;/h3&gt;&lt;p&gt;Weexæ˜¯é˜¿é‡Œæ‰‹æ·˜å¼€æºçš„ä¸€å¥—è·¨å¹³å°å¼€å‘ã€‚æ ¸å¿ƒè¯­æ³•å€Ÿé‰´äº†vue.jsã€‚&lt;/p&gt;
&lt;p&gt;Weexæ˜¯è·¨å¹³å°ï¼Œå¯æ‰©å±•çš„åŠ¨æ€åŒ–æŠ€æœ¯. ä½ èƒ½é€šè¿‡åœ¨Weexæºç ä¸­å†™&lt;code&gt;&amp;lt;template&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;style&amp;gt;&lt;/code&gt; å’Œ &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;æ ‡ç­¾ï¼Œç„¶åæŠŠè¿™äº›æ ‡ç­¾è½¬æ¢ä¸ºJS Bundleç”¨äºéƒ¨ç½², åœ¨æœåŠ¡ç«¯ä»¥è¿™äº›JS Bundleå“åº”è¯·æ±‚. å½“å®¢æˆ·ç«¯æ¥æ”¶åˆ°JS Bundleæ—¶ï¼Œå®ƒèƒ½ç”¨è¢«å®¢æˆ·ç«¯ä¸­çš„JSå¼•æ“ç”¨äºç®¡ç†Nativeæ¸²æŸ“;APIè°ƒç”¨å’Œç”¨æˆ·äº¤äº’.&lt;/p&gt;
&lt;h4 id=&quot;åŸºæœ¬è¯­æ³•&quot;&gt;&lt;a href=&quot;#åŸºæœ¬è¯­æ³•&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬è¯­æ³•&quot;&gt;&lt;/a&gt;åŸºæœ¬è¯­æ³•&lt;/h4&gt;&lt;p&gt; &lt;code&gt;&amp;lt;template&amp;gt;&lt;/code&gt;æ˜¯å¿…é¡»çš„ï¼Œä½¿ç”¨ç±»HTMLçš„å½¢å¼ï¼Œå†…å®¹ç”±å¤šä¸ªæ ‡ç­¾ç»„æˆï¼Œä¸åŒæ ‡ç­¾ä»£è¡¨ä¸åŒçš„ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;style&amp;gt;&lt;/code&gt;ï¼Œå¯é€‰ï¼Œä½¿ç”¨ç±»CSSè¯­æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; å¯é€‰ï¼Œä½¿ç”¨jsæè¿°é¡µé¢ä¸­é€»è¾‘å’Œæ•°æ®ï¼Œæ•°æ®å®šä¹‰ä¹Ÿåœ¨è¿™ä¸ªéƒ¨åˆ†&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;template&amp;gt;&lt;/code&gt; ä¸­æœ‰ä¸‰ç§ä¸åŒçš„æ ¹èŠ‚ç‚¹å½¢å¼&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;container&amp;gt;&lt;/code&gt;ï¼Œæ™®é€šæ ¹èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;scroller&amp;gt;&lt;/code&gt;ï¼Œæ»šåŠ¨æ ¹èŠ‚ç‚¹ï¼Œé€‚ç”¨äºå…¨é¡µé¢æ»šåŠ¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;list&amp;gt;&lt;/code&gt;ï¼Œåˆ—è¡¨æ ¹èŠ‚ç‚¹ï¼Œé€‚ç”¨äºå¤ç”¨å…ƒç´ çš„åˆ—è¡¨åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;style&amp;gt;&lt;/code&gt; &lt;/p&gt;
&lt;p&gt;ç±»ä¼¼CSSçš„å½¢å¼ï¼Œå’Œæ ‡å‡†CSSæœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ«&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ç§ä½¿ç”¨å†…è”çš„æ–¹å¼ï¼Œé€šè¿‡styleå±æ€§ç›´æ¥æ·»åŠ æ ·å¼ã€‚ç¬¬äºŒç§é€šè¿‡&lt;code&gt;class&lt;/code&gt;å±æ€§ä¸&lt;code&gt;style&lt;/code&gt;å±æ€§å»ºç«‹å¯¹åº”å…³ç³»&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;template&amp;gt;
  &amp;lt;container&amp;gt;
    &amp;lt;text style=&amp;quot;font-size: 64;&amp;quot;&amp;gt;Alibaba&amp;lt;/text&amp;gt;
    &amp;lt;text class=&amp;quot;large&amp;quot;&amp;gt;Weex Team&amp;lt;/text&amp;gt;
  &amp;lt;/container&amp;gt;
&amp;lt;/template&amp;gt;

&amp;lt;style&amp;gt;
  .large {font-size: 64;}
&amp;lt;/style&amp;gt;``
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;ä¸­ä»£ç éµå¾ª&lt;code&gt;ES5&lt;/code&gt;è¯­æ³•æ ‡å‡†&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;template&amp;gt;
  &amp;lt;image onclick=&amp;quot;handler&amp;quot; ...&amp;gt;&amp;lt;/image&amp;gt;
&amp;lt;/template&amp;gt;

&amp;lt;script&amp;gt;
  module.exports = {
    methods: {
      handler: function (e) {
        // TODO
      }
    }
  }
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å½“ä¸€ä¸ªäº‹ä»¶å‡½æ•°è¢«è°ƒç”¨ï¼Œå®ƒä¼šæ”¶åˆ°çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯äº‹ä»¶å¯¹è±¡ã€‚æ¯ä¸ªäº‹ä»¶å¯¹è±¡åŒ…å«ä¸€ä¸‹å±æ€§ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;type&lt;/code&gt;,äº‹ä»¶åç§°ï¼Œå¦‚&lt;code&gt;click&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;target&lt;/code&gt;ï¼Œç›®æ ‡å…ƒç´ &lt;/li&gt;
&lt;li&gt;&lt;code&gt;timestamp&lt;/code&gt;,äº‹ä»¶è§¦å‘çš„æ—¶é—´æˆ³ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;æ¸²æŸ“æµç¨‹&quot;&gt;&lt;a href=&quot;#æ¸²æŸ“æµç¨‹&quot; class=&quot;headerlink&quot; title=&quot;æ¸²æŸ“æµç¨‹&quot;&gt;&lt;/a&gt;æ¸²æŸ“æµç¨‹&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;
Weex we æ–‡ä»¶ ---------------å‰ç«¯(weæºç )
â†“ (è½¬æ¢) -------------------å‰ç«¯(æ„å»ºè¿‡ç¨‹)
JS Bundle -----------------å‰ç«¯(JS Bundleä»£ç )
â†“ (éƒ¨ç½²) -------------------æœåŠ¡å™¨
åœ¨æœåŠ¡å™¨ä¸Šçš„JS bundle  ------æœåŠ¡å™¨
â†“ (ç¼–è¯‘) ------------------ å®¢æˆ·ç«¯(JSå¼•æ“)
è™šæ‹Ÿ DOM æ ‘ --------------- å®¢æˆ·ç«¯(Weex JS Framework)
â†“ (æ¸²æŸ“) ------------------ å®¢æˆ·ç«¯(æ¸²æŸ“å¼•æ“)
Nativeè§†å›¾ ---------------  å®¢æˆ·ç«¯(æ¸²æŸ“å¼•æ“)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¸²æŸ“æµç¨‹&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è™šæ‹ŸDOM.&lt;/li&gt;
&lt;li&gt;æ„é€ æ ‘ç»“æ„. åˆ†æè™šæ‹ŸDOM JSONæ•°æ®ä»¥æ„é€ æ¸²æŸ“æ ‘(RT).&lt;/li&gt;
&lt;li&gt;æ·»åŠ æ ·å¼. ä¸ºæ¸²æŸ“æ ‘çš„å„ä¸ªèŠ‚ç‚¹æ·»åŠ æ ·å¼.&lt;/li&gt;
&lt;li&gt;åˆ›å»ºè§†å›¾. ä¸ºæ¸²æŸ“æ ‘å„ä¸ªèŠ‚ç‚¹åˆ›å»ºNativeè§†å›¾.&lt;/li&gt;
&lt;li&gt;ç»‘å®šäº‹ä»¶. ä¸ºNativeè§†å›¾ç»‘å®šäº‹ä»¶.&lt;/li&gt;
&lt;li&gt;CSSå¸ƒå±€. ä½¿ç”¨ css-layout æ¥è®¡ç®—å„ä¸ªè§†å›¾çš„å¸ƒå±€.&lt;/li&gt;
&lt;li&gt;æ›´æ–°è§†çª—(Frame). é‡‡ç”¨ä¸Šä¸€æ­¥çš„è®¡ç®—ç»“æœæ¥æ›´æ–°è§†çª—ä¸­å„ä¸ªè§†å›¾çš„æœ€ç»ˆå¸ƒå±€ä½ç½®.&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆé¡µé¢å‘ˆç°.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;å­˜åœ¨çš„é—®é¢˜&quot;&gt;&lt;a href=&quot;#å­˜åœ¨çš„é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;å­˜åœ¨çš„é—®é¢˜&quot;&gt;&lt;/a&gt;å­˜åœ¨çš„é—®é¢˜&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;åˆšåˆšå¼€æºï¼Œç¤¾åŒºæ´»è·ƒåº¦ä¸é«˜ï¼Œä»¥é˜¿é‡Œå›¢é˜Ÿä¸ºä¸»&lt;/li&gt;
&lt;li&gt;æ”¯æŒçš„æ§ä»¶æ¯”è¾ƒå°‘ï¼ˆæ¯”å¦‚buttonå°±æ²¡æœ‰ï¼‰ï¼Œcheckboxï¼Œradioä¹Ÿæ²¡æœ‰&lt;/li&gt;
&lt;li&gt;ç„¦ç‚¹é—®é¢˜&lt;/li&gt;
&lt;li&gt;CSSä¸æ”¯æŒçˆ¶çº§ç»§æ‰¿&lt;/li&gt;
&lt;li&gt;æ–‡æ¡£ä¸å®Œå–„&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;å’ŒReact-Native-å¯¹æ¯”&quot;&gt;&lt;a href=&quot;#å’ŒReact-Native-å¯¹æ¯”&quot; class=&quot;headerlink&quot; title=&quot;å’ŒReact Native å¯¹æ¯”&quot;&gt;&lt;/a&gt;å’ŒReact Native å¯¹æ¯”&lt;/h4&gt;&lt;h5 id=&quot;JSå¼•æ“ï¼š&quot;&gt;&lt;a href=&quot;#JSå¼•æ“ï¼š&quot; class=&quot;headerlink&quot; title=&quot;JSå¼•æ“ï¼š&quot;&gt;&lt;/a&gt;JSå¼•æ“ï¼š&lt;/h5&gt;&lt;p&gt;å®‰å“ä¸Š weexä½¿ç”¨V8ï¼Œ ReactNativeä½¿ç”¨JSCore&lt;/p&gt;
&lt;p&gt;iOSä¸Šï¼Œéƒ½ä½¿ç”¨äº†JSCore&lt;/p&gt;
&lt;p&gt;åŸå› æ˜¯ï¼ŒRNä¸ºäº†ä½¿ç”¨JSCoreï¼Œå°†æ•´ä¸ªJSCoreæ‰“åŒ…è¿›äº†appçš„webkitåº“ï¼Œæ‰€ä»¥å®‰å“çš„åŒ…ä½“å®¹é‡æœ‰æ¯”è¾ƒæ˜æ˜¾çš„å¢å¤§ã€‚è€ŒiOSåˆ™è‡ªå¸¦&lt;/p&gt;
&lt;p&gt;weexè€ƒè™‘åˆ°åœ¨å®‰å“ä¸Šéƒ½éœ€è¦è‡ªå·±æ‰“åŒ…ï¼Œé‚£ä¹ˆå°±é€‰æ‹©äº†æ›´æ–°çš„V8å¼•æ“ï¼Œè€ŒiOSåˆ™ç»§ç»­ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„JSCore&lt;/p&gt;
&lt;h5 id=&quot;JSå¼€å‘æ¡†æ¶ï¼š&quot;&gt;&lt;a href=&quot;#JSå¼€å‘æ¡†æ¶ï¼š&quot; class=&quot;headerlink&quot; title=&quot;JSå¼€å‘æ¡†æ¶ï¼š&quot;&gt;&lt;/a&gt;JSå¼€å‘æ¡†æ¶ï¼š&lt;/h5&gt;&lt;p&gt;weexåŸºäºvue.js(2W+ star)ã€‚å°å·§è½»é‡çš„å‰ç«¯å¼€å‘æ¡†æ¶ï¼Œç»„ä»¶åŒ–ï¼Œæ•°æ®ç»‘å®šï¼Œ2.0å¼•å…¥virtual domã€‚&lt;/p&gt;
&lt;p&gt;ReactNativeä½¿ç”¨React(4W+ star)ã€‚é©å‘½æ€§çš„å‰ç«¯å¼€å‘æ¡†æ¶ï¼Œç»„ä»¶åŒ–ï¼Œæ•°æ®ç»‘å®šï¼Œvirtual domã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸¤è€…ï¼Œvueæ›´ç¬¦åˆwebå¼€å‘çš„ä¹ æƒ¯ï¼ŒJSXæ”¹å˜æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯æ€»ä½“è€Œè¨€ï¼Œç†Ÿæ‚‰webå¼€å‘éƒ½ä¸æ˜¯å¤§é—®é¢˜ï¼Œå¯¹äºåªæœ‰ç§»åŠ¨ç«¯å¼€å‘ç»éªŒçš„äººå¯èƒ½RNçš„å­¦ä¹ æˆæœ¬ç¨é«˜ã€‚&lt;/p&gt;
&lt;h5 id=&quot;å¸ƒå±€&quot;&gt;&lt;a href=&quot;#å¸ƒå±€&quot; class=&quot;headerlink&quot; title=&quot;å¸ƒå±€&quot;&gt;&lt;/a&gt;å¸ƒå±€&lt;/h5&gt;&lt;p&gt;å¸ƒå±€ä¸¤è€…éƒ½æ˜¯åŸºäºfacebookçš„ä»£ç è§£æï¼Œå®ç°äº†flexBoxçš„å­é›†&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªä»£ç è§£æï¼Œå†™èµ·æ¥æ˜¯çˆ½ï¼Œä½†æ˜¯ï¼Œå¯¹äºå¤æ‚çš„é¡µé¢ï¼Œä¼šäº§ç”Ÿæ¯”è¾ƒä¸¥é‡çš„æ€§èƒ½é—®é¢˜.&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ¬æ¥åˆ†äº«ç”¨äº†å†…éƒ¨é¡¹ç›®çš„å›¾ï¼Œè¿™é‡Œæ²¡æœ‰æ”¾å‡ºæ¥ã€‚å¤§å®¶å¯ä»¥è‡ªå·±ç”¨ä¸‰å¥—æ¡†æ¶å»å®ç°åŒä¸€ä¸ªé¡µé¢ï¼Œç”¨revealå»çœ‹ä¸‹å°±æ˜ç™½äº†ã€‚&lt;/p&gt;
&lt;p&gt;èƒ½ä¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç½‘ä¸Šæœ‰äººæå‡ºäº†æ”¹å˜æ€è·¯çš„æ–¹å¼ï¼Œå³ä¸é€‚ç”¨å‰ç«¯å¸ƒå±€çš„æ€ç»´ç”¨jså»é©±åŠ¨Nativeç»˜å›¾ï¼Œè€Œæ˜¯ç”¨nativeçš„æ€è·¯å»ç”¨jsé©±åŠ¨ã€‚ä¸è¿‡è¿™æ ·çš„è¯ï¼Œå°±åŠ å¤§äº†å‰ç«¯äººå‘˜çš„å­¦ä¹ æˆæœ¬&lt;/p&gt;
&lt;h5 id=&quot;Moudleæ–¹æ³•è°ƒç”¨çº¿ç¨‹ï¼š&quot;&gt;&lt;a href=&quot;#Moudleæ–¹æ³•è°ƒç”¨çº¿ç¨‹ï¼š&quot; class=&quot;headerlink&quot; title=&quot;Moudleæ–¹æ³•è°ƒç”¨çº¿ç¨‹ï¼š&quot;&gt;&lt;/a&gt;Moudleæ–¹æ³•è°ƒç”¨çº¿ç¨‹ï¼š&lt;/h5&gt;&lt;p&gt;weex å¯ä»¥é€šè¿‡æ³¨è§£æ ‡æ³¨æ˜¯å¦åœ¨UIçº¿ç¨‹æ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;ReactNativeåœ¨å®‰å“ä¸Šæ˜¯åœ¨&lt;code&gt;native_modules&lt;/code&gt;çº¿ç¨‹æ‰§è¡Œã€‚iOSé‡Œé¢ï¼Œæ¯ä¸€ä¸ª&lt;code&gt;native_modules&lt;/code&gt;å¯ä»¥æ”¯æŒæ ‡è®°ï¼Œéœ€è¦é‡å†™moduleçš„&lt;code&gt;methodQueue&lt;/code&gt;æ–¹æ³•ï¼Œå°±å¯ä»¥è·å¾—åœ¨&lt;code&gt;main_queue&lt;/code&gt;ä¸­æ‰§è¡Œã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;//RCTClipboardç±»çš„æºç 
- (dispatch_queue_t)methodQueue
{
  return dispatch_get_main_queue();
}
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&quot;æ‰©å±•æ€§&quot;&gt;&lt;a href=&quot;#æ‰©å±•æ€§&quot; class=&quot;headerlink&quot; title=&quot;æ‰©å±•æ€§&quot;&gt;&lt;/a&gt;æ‰©å±•æ€§&lt;/h5&gt;&lt;p&gt;ç»„ä»¶çš„æ‰©å±•ä¸Šï¼Œweexå’ŒReactNativeå…·æœ‰ä¸€æ ·çš„èƒ½åŠ›&lt;/p&gt;
&lt;p&gt;ä¸‰æ–¹åº“çš„æ¥å…¥ä¸Šï¼Œweexå¯¹ç½‘ç»œï¼Œå›¾ç‰‡ï¼Œç»Ÿè®¡ç­‰å¸¸è§çš„ç”¨æˆ·å¯èƒ½æƒ³è‡ªå·±å®šåˆ¶çš„åŠŸèƒ½ï¼Œæä¾›äº†ç›¸åº”çš„é€‚é…æ¥å£ï¼Œå¯ä»¥ç”±ç”¨æˆ·æ–¹ä¾¿çš„å®šåˆ¶ï¼ŒReactNativeéœ€è¦è‡ªå·±ä¿®æ”¹æºç &lt;/p&gt;
&lt;p&gt;ä¸¤è€…åœ¨åŠŸèƒ½ä¸Šå¹¶æ— ç»å¯¹çš„ä¼˜åŠ£ã€‚åœ¨å¼€å‘å‚¬æ”¶çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å‘ç°å¾ˆå¤šå¸¸è§çš„åŠŸèƒ½RNæ²¡æœ‰æ”¯æŒï¼Œä½†æ˜¯æˆ‘ä»¬é€šè¿‡ä¸€ç‚¹ç‚¹æ‘¸ç´¢éƒ½èƒ½è‡ªå·±æ‰©å±•å‡ºæ¥ã€‚RNåœ¨åº•å±‚çš„nativeä»£ç éƒ½æ˜¯ä¸€ä¸ªä¸ªmoduleï¼Œå¯ä»¥æ ¹æ®å¼€å‘éœ€è¦çµæ´»æ‰©å±•æ’æ‹”ã€‚åŸºæœ¬ä¸Šèƒ½æƒ³çš„å‡ºæ¥çš„éƒ½å¯ä»¥è‡ªå·±å®ç°ï¼Œå½“ç„¶ï¼Œæœ‰äº›å®ç°èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œå› æ­¤ï¼Œå¯¹äºRNï¼Œç›®å‰è¿˜ä¸å¤ªé€‚åˆåšé‡é‡çº§çš„äº§å“ã€‚&lt;/p&gt;
&lt;h4 id=&quot;weex-or-ReactNative&quot;&gt;&lt;a href=&quot;#weex-or-ReactNative&quot; class=&quot;headerlink&quot; title=&quot;weex or ReactNative&quot;&gt;&lt;/a&gt;weex or ReactNative&lt;/h4&gt;&lt;p&gt;weexçš„è¯ç”Ÿæ®è¯´æ˜¯ä¸ºäº†è§£å†³ReactNativeçš„ä¸€äº›é—®é¢˜ã€‚ç›®å‰é˜¿é‡Œåœ¨æ¨åŠ¨&lt;code&gt;write once run anywhere&lt;/code&gt;çš„æ–¹é¢ä¸Šæ˜¯èµ°çš„æœ€å‰çš„ã€‚ä¸¤è€…å¯¹&lt;code&gt;write once run anywhere&lt;/code&gt;æ€è€ƒï¼Œæˆ‘è®¤ä¸ºï¼Œæ˜¯å‡ºå‘é‡ç‚¹ï¼Œç»ˆç‚¹ä¸åŒã€‚RNçš„ç›®çš„æ˜¯é©å‘½Nativeç«¯ï¼Œè€Œweexåˆ™æ˜¯æƒ³æ”¹å˜H5åœ¨ç§»åŠ¨ç«¯çš„æ•ˆæœï¼Œå› æ­¤åšåˆ°äº†web,iOS,androidä¸‰å¹³å°ç»Ÿä¸€ï¼ˆRNåšä¸åˆ°webç«¯ï¼‰ã€‚å› æ­¤ï¼Œåœ¨å¼€å‘å•†ï¼Œweexç”šè‡³å¯ä»¥æŠ›å¼€nativeçš„palygroundï¼Œç›´æ¥åœ¨webä¸Šåšå¼€å‘ï¼Œç­‰åˆ°è°ƒè¯•å·®ä¸å¤šäº†ï¼Œå†åˆ°nativeä¸Šåšç»†è‡´çš„æ£€æŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;weexçš„å‡ºç”Ÿå†³å®šäº†ä»–ç«™åœ¨äº†å·¨äººçš„è‚©è†€ä¸Šã€‚ä¸€ä¸ª&lt;code&gt;devTools&lt;/code&gt;å°±è¶³ä»¥çœ‹åˆ°weexå›¢é˜Ÿæƒ³åšå‡ºçš„æ”¹å˜ã€‚&lt;/p&gt;
&lt;p&gt;ç½‘ä¸Šæœ‰äººç±»æ¯”ä¸¤è€…æ˜¯windowså’ŒLinuxçš„å…³ç³»ï¼Œè€Œæˆ‘è®¤ä¸ºåº”è¯¥æ˜¯mac OSå’ŒLinuxçš„å…³ç³»ã€‚&lt;/p&gt;
&lt;h2 id=&quot;JSPatch&quot;&gt;&lt;a href=&quot;#JSPatch&quot; class=&quot;headerlink&quot; title=&quot;JSPatch&quot;&gt;&lt;/a&gt;JSPatch&lt;/h2&gt;&lt;h3 id=&quot;å¹³å°ä»‹ç»&quot;&gt;&lt;a href=&quot;#å¹³å°ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;å¹³å°ä»‹ç»&quot;&gt;&lt;/a&gt;å¹³å°ä»‹ç»&lt;/h3&gt;&lt;p&gt;åŸºäºOCçš„runtimeæœºåˆ¶ï¼Œä½¿ç”¨iOSå†…ç½®çš„JavaScriptCore.frameworkä½œä¸ºJSå¼•æ“ï¼Œä»JSä¼ é€’è¦è°ƒç”¨çš„ç±»åå‡½æ•°ååˆ°Objective-Cï¼Œå†ä½¿ç”¨NSInvocationåŠ¨æ€è°ƒç”¨å¯¹åº”çš„OCæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨JSè¯­è¨€ï¼Œæ¯”ä¹‹å‰çš„ä½¿ç”¨Luaçš„&lt;code&gt;WXPatch&lt;/code&gt;é€‚ç”¨æ›´å¹¿æ³›ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¦åˆAppleè§„åˆ™&lt;/p&gt;
&lt;p&gt;å¼•æ“å°ï¼Œé™¤å»æ‰©å±•å†…å®¹ï¼Œæ ¸å¿ƒåªæœ‰ä¸‰ä¸ªæ–‡ä»¶&lt;/p&gt;
&lt;p&gt;æ”¯æŒblockã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®ç°åŸç†&quot;&gt;&lt;a href=&quot;#å®ç°åŸç†&quot; class=&quot;headerlink&quot; title=&quot;å®ç°åŸç†&quot;&gt;&lt;/a&gt;å®ç°åŸç†&lt;/h3&gt;&lt;p&gt;JSPatchä¹‹æ‰€ä»¥èƒ½å¤Ÿåšåˆ°é€šè¿‡JSæ¥è°ƒç”¨å’Œä¿®æ”¹OCæ–¹æ³•çš„æ ¹æœ¬åŸå› æ˜¯OCæ˜¯åŠ¨æ€è¯­è¨€ï¼ŒOCæ‰€æœ‰çš„ç±»å’Œæ–¹æ³•éƒ½çš„ç”Ÿæˆå’Œè°ƒç”¨éƒ½å¯ä»¥é€šè¿‡runtimeåœ¨è¿è¡Œæ—¶è¿›è¡Œï¼Œå› æ­¤å¯ä»¥é€šè¿‡ç±»å/æ–¹æ³•ååå°„å¾—åˆ°ç›¸åº”çš„ç±»å’Œæ–¹æ³•ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å¼•ç”¨&quot;&gt;&lt;a href=&quot;#å¼•ç”¨&quot; class=&quot;headerlink&quot; title=&quot;å¼•ç”¨&quot;&gt;&lt;/a&gt;å¼•ç”¨&lt;/h4&gt;&lt;p&gt;è°ƒç”¨&lt;code&gt;requir&lt;/code&gt;åï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç±»äº†ï¼Œè¿‡ç¨‹å°±æ˜¯åœ¨JSå…¨å±€ä½œç”¨åŸŸä¸Šåˆ›å»ºä¸€ä¸ªåŒåå˜é‡ï¼Œå˜é‡æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œ&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;var _require = function(clsName) {
  if (!global[clsName]) {
    global[clsName] = {
      __clsName: clsName
    }
  }
  return global[clsName]
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;å°è£…JSå¯¹è±¡&quot;&gt;&lt;a href=&quot;#å°è£…JSå¯¹è±¡&quot; class=&quot;headerlink&quot; title=&quot;å°è£…JSå¯¹è±¡&quot;&gt;&lt;/a&gt;å°è£…JSå¯¹è±¡&lt;/h4&gt;&lt;p&gt;ç”±äºJSè°ƒç”¨æ²¡å®šä¹‰çš„å±æ€§æˆ–è€…æ”¾å‘çš„æ—¶å€™ä¸ä¼šè½¬å‘ï¼Œè€Œæ˜¯ç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚ä½œè€…æœ€å…ˆå¼€å§‹è€ƒè™‘çš„æ˜¯åœ¨&lt;code&gt;require&lt;/code&gt;çš„æ—¶å€™å°†ç±»åä¼ å…¥OCï¼Œé€šè¿‡runtimeå°†æ•´ä¸ªç±»çš„æ–¹æ³•å’Œå±æ€§è¿”å›ç»™JSï¼ŒJSå¯¹æ¯ä¸ªæ–¹æ³•åéƒ½ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„å†…å®¹å°±æ˜¯å°†é€šè¿‡æ–¹æ³•åå»è°ƒç”¨OCçš„æ–¹æ³•å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œè¿™ç§æ–¹æ³•å®ç°ä¼šé€ æˆå·¨å¤§æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºé™¤äº†è¦éå†å½“å‰ç±»çš„æ–¹æ³•ï¼Œè¿˜è¦éå†çˆ¶ç±»ä¸€ç›´åˆ°æ ¹ç±»æ‰€æœ‰ç»§æ‰¿é“¾ä¸Šçš„æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨å¼•å…¥å‡ ä¸ªç±»ä»¥åå°±é€ æˆå†…å­˜æš´æ¶¨ã€‚ä½œè€…ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæƒ³å‡ºåœ¨ OC æ‰§è¡Œ JS è„šæœ¬å‰ï¼Œé€šè¿‡æ­£åˆ™æŠŠæ‰€æœ‰æ–¹æ³•è°ƒç”¨éƒ½æ”¹æˆè°ƒç”¨ __c() å‡½æ•°ï¼Œå†æ‰§è¡Œè¿™ä¸ª JS è„šæœ¬ï¼Œåšåˆ°äº†ç±»ä¼¼ OC/Lua/Ruby ç­‰çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;UIView.alloc().init()
-&amp;gt;
UIView.__c(&amp;#39;alloc&amp;#39;)().__c(&amp;#39;init&amp;#39;)()
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç»™ JS å¯¹è±¡åŸºç±» Object åŠ ä¸Š &lt;strong&gt;c æˆå‘˜ï¼Œè¿™æ ·æ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨åˆ° &lt;/strong&gt;cï¼Œæ ¹æ®å½“å‰å¯¹è±¡ç±»å‹åˆ¤æ–­è¿›è¡Œä¸åŒæ“ä½œï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Object.defineProperty(Object.prototype, &amp;#39;__c&amp;#39;, {value: function(methodName) {
  if (!this.__obj &amp;amp;&amp;amp; !this.__clsName) return this[methodName].bind(this);
  var self = this
  return function(){
    var args = Array.prototype.slice.call(arguments)
    return _methodFunc(self.__obj, self.__clsName, methodName, args, self.__isSuper)
  }
}})
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;æ¶ˆæ¯ä¼ é€’&quot;&gt;&lt;a href=&quot;#æ¶ˆæ¯ä¼ é€’&quot; class=&quot;headerlink&quot; title=&quot;æ¶ˆæ¯ä¼ é€’&quot;&gt;&lt;/a&gt;æ¶ˆæ¯ä¼ é€’&lt;/h4&gt;&lt;p&gt;æ˜¯ç”¨äº†JSCoreçš„æ¥å£ï¼Œåœ¨å¯åŠ¨JSPatchçš„æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ª&lt;code&gt;JSContext&lt;/code&gt;å®ä¾‹ï¼Œ&lt;code&gt;JSContext&lt;/code&gt;æ˜¯JSçš„æ‰§è¡Œç¯å¢ƒï¼Œå¯ä»¥ç»™&lt;code&gt;JSContext&lt;/code&gt;æ·»åŠ æ–¹æ³•ï¼ŒJSå¯ä»¥ç›´æ¥è°ƒç”¨ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;JSContext *context = [[JSContext alloc] init];
context[@&amp;quot;hello&amp;quot;] = ^(NSString *msg) {
    NSLog(@&amp;quot;hello %@&amp;quot;, msg);
};
[_context evaluateScript:@&amp;quot;hello(&amp;#39;word&amp;#39;)&amp;quot;];     //output hello word
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;JS é€šè¿‡è°ƒç”¨ JSContext å®šä¹‰çš„æ–¹æ³•æŠŠæ•°æ®ä¼ ç»™ OCï¼ŒOC é€šè¿‡è¿”å›å€¼ä¼ ä¼šç»™ JSã€‚è°ƒç”¨è¿™ç§æ–¹æ³•ï¼Œå®ƒçš„å‚æ•°/è¿”å›å€¼ JavaScriptCore éƒ½ä¼šè‡ªåŠ¨è½¬æ¢ï¼ŒOC é‡Œçš„ NSArray, NSDictionary, NSString, NSNumber, NSBlock ä¼šåˆ†åˆ«è½¬ä¸ºJSç«¯çš„æ•°ç»„/å¯¹è±¡/å­—ç¬¦ä¸²/æ•°å­—/å‡½æ•°ç±»å‹ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å¯¹è±¡æŒæœ‰è½¬æ¢&quot;&gt;&lt;a href=&quot;#å¯¹è±¡æŒæœ‰è½¬æ¢&quot; class=&quot;headerlink&quot; title=&quot;å¯¹è±¡æŒæœ‰è½¬æ¢&quot;&gt;&lt;/a&gt;å¯¹è±¡æŒæœ‰è½¬æ¢&lt;/h4&gt;&lt;p&gt;å¯¹äºä¸€ä¸ªè‡ªå®šä¹‰idå¯¹è±¡ï¼ŒJavaScriptCore ä¼šæŠŠè¿™ä¸ªè‡ªå®šä¹‰å¯¹è±¡çš„æŒ‡é’ˆä¼ ç»™ JSï¼Œè¿™ä¸ªå¯¹è±¡åœ¨ JS æ— æ³•ä½¿ç”¨ï¼Œä½†åœ¨å›ä¼ ç»™ OC æ—¶ OC å¯ä»¥æ‰¾åˆ°è¿™ä¸ªå¯¹è±¡ã€‚å¯¹äºè¿™ä¸ªå¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼ŒæŒ‰æˆ‘çš„ç†è§£å¦‚æœJSæœ‰å˜é‡å¼•ç”¨æ—¶ï¼Œè¿™ä¸ª OC å¯¹è±¡å¼•ç”¨è®¡æ•°å°±åŠ 1 ï¼ŒJS å˜é‡çš„å¼•ç”¨é‡Šæ”¾äº†å°±å‡1ï¼Œå¦‚æœ OC ä¸Šæ²¡åˆ«çš„æŒæœ‰è€…ï¼Œè¿™ä¸ªOCå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå°±è·Ÿç€ JS èµ°äº†ï¼Œä¼šåœ¨ JS è¿›è¡Œåƒåœ¾å›æ”¶æ—¶é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;p&gt;ä¼ ç»™ JS çš„å˜é‡æ˜¯è¿™ä¸ª OC å¯¹è±¡çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆä¹Ÿå¯ä»¥é‡æ–°ä¼ å› OCï¼Œè¦åœ¨ JS è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„æŸä¸ªå®ä¾‹æ–¹æ³•ï¼Œåªéœ€è¦åœ¨å‡½æ•°é‡ŒæŠŠè¿™ä¸ªå¯¹è±¡æŒ‡é’ˆä»¥åŠå®ƒè¦è°ƒç”¨çš„æ–¹æ³•åä¼ å›ç»™ OC å°±è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰æ²¡æ‰¾åˆ°æ–¹æ³•åˆ¤æ–­ä¸€ä¸ª JS å¯¹è±¡æ˜¯å¦è¡¨ç¤º OC æŒ‡é’ˆï¼Œè¿™é‡Œçš„è§£å†³æ–¹æ³•æ˜¯åœ¨ OC æŠŠå¯¹è±¡è¿”å›ç»™ JS ä¹‹å‰ï¼Œå…ˆæŠŠå®ƒåŒ…è£…æˆä¸€ä¸ª NSDictionaryï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;static NSDictionary *_wrapObj(id obj) {
    return @{@&amp;quot;__obj&amp;quot;: obj};
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·åœ¨JSå¯¹è±¡é‡Œå°±å¯ä»¥å˜æˆè¿™æ ·&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{__obj: [OC Object å¯¹è±¡æŒ‡é’ˆ]}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;æ–¹æ³•æ›¿æ¢&quot;&gt;&lt;a href=&quot;#æ–¹æ³•æ›¿æ¢&quot; class=&quot;headerlink&quot; title=&quot;æ–¹æ³•æ›¿æ¢&quot;&gt;&lt;/a&gt;æ–¹æ³•æ›¿æ¢&lt;/h4&gt;&lt;p&gt;è¿ç”¨runtimeçš„åŸç†ï¼Œä¸å±•å¼€è®²ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ­»é”é—®é¢˜&quot;&gt;&lt;a href=&quot;#æ­»é”é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;æ­»é”é—®é¢˜&quot;&gt;&lt;/a&gt;æ­»é”é—®é¢˜&lt;/h4&gt;&lt;p&gt;javaScript è¯­è¨€æ˜¯å•çº¿ç¨‹çš„ï¼Œåœ¨ OC ä½¿ç”¨ JavaScriptCore å¼•æ“æ‰§è¡Œ JS ä»£ç æ—¶ï¼Œä¼šå¯¹ JS ä»£ç å—åŠ é”ï¼Œä¿è¯åŒä¸ª JSContext ä¸‹çš„ JS ä»£ç éƒ½æ˜¯é¡ºåºæ‰§è¡Œã€‚æ‰€ä»¥è°ƒç”¨ JSPatch æ›¿æ¢çš„æ–¹æ³•ï¼Œä»¥åŠåœ¨ JSPatch é‡Œè°ƒç”¨ OC æ–¹æ³•ï¼Œéƒ½ä¼šåœ¨è¿™ä¸ªé”é‡Œæ‰§è¡Œï¼Œè¿™å¯¼è‡´ä¸‰ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;JSPatchæ›¿æ¢çš„æ–¹æ³•æ— æ³•å¹¶è¡Œæ‰§è¡Œï¼Œå¦‚æœå¦‚æœä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹åŒæ—¶è¿è¡Œäº† JSPatch æ›¿æ¢çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•çš„æ‰§è¡Œéƒ½ä¼šé¡ºåºæ’é˜Ÿï¼Œä¸»çº¿ç¨‹ä¼šç­‰å¾…å­çº¿ç¨‹çš„æ–¹æ³•æ‰§è¡Œå®Œåå†æ‰§è¡Œï¼Œå¦‚æœå­çº¿ç¨‹æ–¹æ³•è€—æ—¶é•¿ï¼Œä¸»çº¿ç¨‹ä¼šç­‰å¾ˆä¹…ï¼Œå¡ä½ä¸»çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;æŸç§æƒ…å†µä¸‹ï¼ŒJavaScriptCore çš„é”ä¸ OC ä»£ç ä¸Šçš„é”æ··åˆæ—¶ï¼Œä¼šäº§ç”Ÿæ­»é”ã€‚&lt;/li&gt;
&lt;li&gt;UIWebView çš„åˆå§‹åŒ–ä¼šä¸ JavaScriptCore å†²çªã€‚è‹¥åœ¨ JavaScriptCore çš„é”é‡Œ(ç¬¬ä¸€æ¬¡)åˆå§‹åŒ– UIWebView ä¼šå¯¼è‡´ webview æ— æ³•è§£æé¡µé¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ­»é”çš„ä¾‹å­&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;
// oc

@implementation AppDelegate
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{
    ClassA* obj = [[ClassA alloc] init];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //Açº¿ç¨‹
        @synchronized(obj) {    //Xé”
            sleep(3);
            [obj methodA];   //methodAè¢«JSæ›¿æ¢ï¼Œè°ƒç”¨ä¼šè¿›JSï¼Œè¯·æ±‚JSCoreçš„é”
        }
    });

    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
        //Bçº¿ç¨‹
        [obj methodA];  //methodAè¢«JSæ›¿æ¢ï¼Œè°ƒç”¨ä¼šè¿›JSï¼Œè¯·æ±‚JSCoreçš„é”
    });
}
@end


@implementation ClassA
- (void)methodA
{
}
- (void)methodB
{
    @synchronized(self) {   //Xé”
        int a = 0;
    }
}
@end


// js

defineClass(&amp;#39;ClassA&amp;#39;, {
    methodA: function() {
        self.methodB()   //è°ƒç”¨åˆ°OCï¼Œ
    },
})
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸ºäº†è§£å†³æ­»é”çš„é—®é¢˜ï¼ŒJSPatchè®¾è®¡äº†&lt;code&gt;performSelectorInOC&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
    __isPerformInOC:1,
    obj:self.__obj,
    clsName:self.__clsName,
    sel: args[0],
    args: args[1],
    cb: args[2]
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å›objåï¼ŒJSè°ƒç”¨å°±ç»“æŸäº†ã€‚åœ¨ OC å¯ä»¥æ‹¿åˆ° JS å‡½æ•°çš„è¿”å›å€¼ï¼Œä¹Ÿå°±æ‹¿åˆ°äº†è¿™ä¸ªå¯¹è±¡ï¼Œç„¶ååˆ¤æ–­å®ƒæ˜¯å¦ &lt;code&gt;__isPerformInOC=1&lt;/code&gt; å¯¹è±¡ï¼Œè‹¥æ˜¯å°±æ ¹æ®å¯¹è±¡é‡Œçš„ selector / å‚æ•°ç­‰ä¿¡æ¯è°ƒç”¨å¯¹åº”çš„ OC æ–¹æ³•ï¼Œè¿™æ—¶è¿™ä¸ª OC æ–¹æ³•çš„è°ƒç”¨æ˜¯åœ¨ &lt;code&gt;JavaScriptCore&lt;/code&gt; çš„é”ä¹‹å¤–è°ƒç”¨çš„ï¼Œæˆ‘ä»¬çš„ç›®çš„å°±è¾¾åˆ°äº†ã€‚&lt;br&gt;æ‰§è¡Œ OC æ–¹æ³•åï¼Œä¼šå»è°ƒ {obj} é‡Œçš„çš„ cb å‡½æ•°ï¼ŒæŠŠ OC æ–¹æ³•çš„è¿”å›å€¼ä¼ ç»™ cb å‡½æ•°ï¼Œé‡æ–°å›åˆ° JS å»æ‰§è¡Œä»£ç ã€‚è¿™é‡Œä¼šå¾ªç¯åˆ¤æ–­è¿™äº›å›è°ƒå‡½æ•°æ˜¯å¦è¿˜è¿”å› &lt;code&gt;__isPerformInOC=1&lt;/code&gt; çš„å¯¹è±¡ï¼Œè‹¥æ˜¯åˆ™é‡å¤ä¸Šè¿°æµç¨‹æ‰§è¡Œï¼Œä¸æ˜¯åˆ™ç»“æŸã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®‰å…¨é—®é¢˜&quot;&gt;&lt;a href=&quot;#å®‰å…¨é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;å®‰å…¨é—®é¢˜&quot;&gt;&lt;/a&gt;å®‰å…¨é—®é¢˜&lt;/h3&gt;&lt;h4 id=&quot;ä¼ è¾“å®‰å…¨&quot;&gt;&lt;a href=&quot;#ä¼ è¾“å®‰å…¨&quot; class=&quot;headerlink&quot; title=&quot;ä¼ è¾“å®‰å…¨&quot;&gt;&lt;/a&gt;ä¼ è¾“å®‰å…¨&lt;/h4&gt;&lt;p&gt;JS è„šæœ¬å¯ä»¥è°ƒç”¨ä»»æ„ OC æ–¹æ³•ï¼Œæƒé™éå¸¸å¤§ï¼Œè‹¥è¢«ä¸­é—´äººæ”»å‡»æ›¿æ¢ä»£ç ï¼Œä¼šé€ æˆè¾ƒå¤§çš„å±å®³ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆ å¯¹ç§°åŠ å¯†ï¼ŒHTTPSï¼ŒRSAæ ¡éªŒ&lt;/p&gt;
&lt;p&gt;æœ‰èƒ½åŠ›ä¸ŠHTTPSï¼Œç®€å•å®‰å…¨ç”¨RSAï¼Œä¸æ¨èå¯¹ç§°åŠ å¯†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ‰§è¡Œå®‰å…¨&quot;&gt;&lt;a href=&quot;#æ‰§è¡Œå®‰å…¨&quot; class=&quot;headerlink&quot; title=&quot;æ‰§è¡Œå®‰å…¨&quot;&gt;&lt;/a&gt;æ‰§è¡Œå®‰å…¨&lt;/h4&gt;&lt;p&gt;ä¸‹å‘çš„ JS è„šæœ¬çµæ´»åº¦å¤§ï¼Œç›¸å½“äºä¸€æ¬¡å°å‹æ›´æ–°ï¼Œè‹¥æœªè¿›è¡Œå……åˆ†æµ‹è¯•ï¼Œå¯èƒ½ä¼šå‡ºç° crash ç­‰æƒ…å†µå¯¹ APP ç¨³å®šæ€§é€ æˆå½±å“ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼šç°åº¦ï¼Œç›‘æ§ï¼Œå›é€€&lt;/p&gt;
&lt;p&gt;å›é€€æ˜¯æ¨èæ‰€æœ‰APPéƒ½æ¥å…¥ï¼Œç°åº¦å’Œç›‘æ§å®¤ä¸­å¤§å‹APPè¦è€ƒè™‘çš„&lt;/p&gt;
&lt;h4 id=&quot;å¯¹æ¯”RN-weexçš„ä¼˜åŠ¿&quot;&gt;&lt;a href=&quot;#å¯¹æ¯”RN-weexçš„ä¼˜åŠ¿&quot; class=&quot;headerlink&quot; title=&quot;å¯¹æ¯”RN/weexçš„ä¼˜åŠ¿&quot;&gt;&lt;/a&gt;å¯¹æ¯”RN/weexçš„ä¼˜åŠ¿&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;å°å·§ã€‚åªéœ€å¼•å…¥ JPEngine.h JPEngine.m JSPatch.js ä¸‰ä¸ªå°æ–‡ä»¶ï¼Œä½“ç§¯å°å·§ï¼Œä¹Ÿæ— éœ€æ­å»ºç¯å¢ƒã€‚&lt;/li&gt;
&lt;li&gt;å­¦ä¹ æˆæœ¬ä½ã€‚å¯ä»¥ç»§ç»­æ²¿ç”¨åŸæ¥ OC çš„æ€ç»´å†™ç¨‹åºï¼Œæ— éœ€å­¦ä¹ æ–°ä¸€å¥—è§„åˆ™ï¼Œå³åˆ»ä¸Šæ‰‹ã€‚&lt;/li&gt;
&lt;li&gt;é™åˆ¶å°‘ã€‚å¯ä»¥è¯´å®Œå…¨æ²¡æœ‰é™åˆ¶ï¼ŒOC / JS ä¸Šç©å‡ºèŠ±çš„å„ç§æ¨¡å¼éƒ½å¯ä»¥ç…§æ¬ä½¿ç”¨ï¼Œä¸ä¼šè¢«æŸä¸€æ¡†æ¶æ€ç»´å’Œå†™æ³•é™å®šã€‚æ‰€æœ‰ OC / JS åº“ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€é€‚é…ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;##ä¸ªäººè§‚ç‚¹&lt;/p&gt;
&lt;h3 id=&quot;RN-vs-weex&quot;&gt;&lt;a href=&quot;#RN-vs-weex&quot; class=&quot;headerlink&quot; title=&quot;RN vs weex&quot;&gt;&lt;/a&gt;RN vs weex&lt;/h3&gt;&lt;h4 id=&quot;å¼€å‘APP&quot;&gt;&lt;a href=&quot;#å¼€å‘APP&quot; class=&quot;headerlink&quot; title=&quot;å¼€å‘APP&quot;&gt;&lt;/a&gt;å¼€å‘APP&lt;/h4&gt;&lt;p&gt;RNçš„ä¼˜åŠ¿æ— ç–‘æ˜¯å›½é™…å¤§å‚facebookçš„é¼åŠ›æ”¯æŒå’Œå¼€æºç¤¾åŒºæé«˜çš„çƒ­æƒ…ã€‚RNçš„å‡ºç”Ÿçš„ç›®çš„å·²ç»å†³å®šäº†ä»–æœªæ¥çš„æ–¹å‘ï¼šæ›¿ä»£Nativeå¼€å‘ã€‚RNçš„åŸºç¡€æ¶æ„è®¾è®¡è®©RNå…·æœ‰æ— çº¿çš„å¯èƒ½ï¼Œèƒ½ç”¨Nativeåšåˆ°çš„ï¼ŒRNéƒ½èƒ½åšåˆ°ã€‚ç„¶è€Œï¼Œå¤§è€Œå…¨ä¹Ÿæ„å‘³ç€å‰è¿›å›°éš¾ï¼Œç›®å‰RNä»ç„¶æœªå‘å¸ƒ1.0ç‰ˆæœ¬ï¼Œfacebookè‡ªèº«ä¹Ÿä»…ä»…åœ¨å‡ ä¸ªç”¨æˆ·é‡è¾ƒå°çš„APPä¸Šä½¿ç”¨ã€‚Nativeç«¯å…¼å®¹é—®é¢˜å’Œæ€§èƒ½é—®é¢˜éƒ½è¿˜æ²¡èƒ½å¾ˆå¥½çš„è§£å†³ã€‚å› æ­¤ï¼Œä½¿ç”¨RNå¼€å‘ï¼Œç›®å‰ä»…ä»…é€‚åˆé‡çº§å°ï¼ŒåŠŸèƒ½ç®€å•çš„APPï¼ŒåŒæ—¶è¿˜éœ€è¦ä¸€å®šé‡æœ‰Web,nativeæ®µç»éªŒçš„å·¥ç¨‹å¸ˆä¸€åŒè¸©å‘ã€‚&lt;/p&gt;
&lt;p&gt;weexæ˜¯å›½å†…å¤§å‚é˜¿é‡Œçš„ä½œå“ï¼Œä»å†å²ä¸Šæ¥çœ‹ï¼Œé˜¿é‡Œå¼€æºäº†å¾ˆå¤šä¹Ÿå¼ƒå‘äº†å¾ˆå¤šï¼Œå¯¹äºweexè¿™ä¸ªåˆšå¼€æºå‡ºæ¥çš„æ¡†æ¶ï¼Œå¤šæ•°äººè¿˜æ˜¯æŠ±ç€è°¨æ…ä¹è§‚çš„æ€åº¦ã€‚ä»ä¸€äº›å…¬å¼€æŠ€æœ¯åˆ†äº«ä¸Šæ¥çœ‹ï¼Œé˜¿é‡Œåœ¨weexä¸ŠæŠ•å…¥äº†å¾ˆå¤šäººåŠ›ï¼Œä¹Ÿæ˜¯å› ä¸ºç§»åŠ¨ç«¯å’Œwebçš„ä¸šåŠ¡å‘å±•å¯¼è‡´çš„ã€‚ç›®å‰weexæ”¯æŒçš„ç»„ä»¶å’ŒåŠŸèƒ½éƒ½æ˜¯éå¸¸åŸºç¡€å•ä¸€çš„ï¼Œç”šè‡³å¾ˆå¤šå¿…è¦çš„åŠŸèƒ½éƒ½æ²¡æœ‰å®ç°ï¼Œç¤¾åŒºæ´»è·ƒåº¦ä¸é«˜ä¹Ÿå¯¼è‡´å¾ˆå¤šå‘å¯èƒ½éœ€è¦è‡ªå·±æ…¢æ…¢çœ‹æºç å»è¸©ã€‚ä¸è¿‡ï¼Œweexç«™åœ¨RNå·¨äººçš„è‚©è†€ä¸Šï¼Œä¸°å¯Œçš„å¼€å‘å·¥å…·é“¾ï¼Œæä¾›äº†æ›´ä¾¿æ·çš„è°ƒè¯•å·¥å…·å’ŒplayGroundã€‚ç›®å‰æ¥çœ‹ï¼Œå¦‚æœé˜¿é‡Œæ„¿æ„æŠ•å…¥æ›´å¤šåŠ›é‡ï¼Œå·å¬å¼€æºç¤¾åŒºåšè´¡çŒ®ï¼Œæœªå¿…ä¸èƒ½ä¸RNä¸€è¾ƒé«˜ä¸‹ã€‚ç›®å‰æ¥çœ‹ï¼Œweexä»…é€‚åˆç”¨äºåšéå¸¸ç®€å•çš„demoï¼ˆæ¯”å¦‚ä¸€äº›å¥—å£³H5ï¼‰ï¼Œè¿˜ä¸é€‚åˆåšå®Œæ•´åŠŸèƒ½çš„APPã€‚&lt;/p&gt;
&lt;h4 id=&quot;hot-fix&quot;&gt;&lt;a href=&quot;#hot-fix&quot; class=&quot;headerlink&quot; title=&quot;hot fix&quot;&gt;&lt;/a&gt;hot fix&lt;/h4&gt;&lt;p&gt;ä¸¤ä¸ªæ¡†æ¶éƒ½é€‚åˆåšçƒ­æ›´æ–°ï¼Œä»è¿™æ–¹é¢çœ‹ï¼Œä¸¤è€…æ²¡æœ‰ä¼˜åŠ£åŒºåˆ«ã€‚ä¸¤è€…éƒ½åªèƒ½æ”¹å˜å·²ç»å®ç°çš„éƒ¨åˆ†ï¼Œä¸èƒ½æ·»åŠ æˆ–è€…ä¿®æ”¹å·²ç»å­˜åœ¨çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;JSPatch-vs-RN-amp-weex&quot;&gt;&lt;a href=&quot;#JSPatch-vs-RN-amp-weex&quot; class=&quot;headerlink&quot; title=&quot;JSPatch vs RN&amp;amp;weex&quot;&gt;&lt;/a&gt;JSPatch vs RN&amp;amp;weex&lt;/h3&gt;&lt;h4 id=&quot;å¼€å‘APP-1&quot;&gt;&lt;a href=&quot;#å¼€å‘APP-1&quot; class=&quot;headerlink&quot; title=&quot;å¼€å‘APP&quot;&gt;&lt;/a&gt;å¼€å‘APP&lt;/h4&gt;&lt;p&gt;ç”¨JSPatchå»å¼€å‘ä¸€ä¸ªAPPæœ‰æ²¡æœ‰ï¼Œæœ‰ï¼Œä½†æ˜¯ç›®å‰æˆ‘çœ‹åˆ°çš„ï¼Œåªæœ‰ä¸¤ä¸ªå¼€æºçš„å°é¡¹ç›®ã€‚ä»ä½œè€…çš„è§‚ç‚¹æ¥çœ‹ï¼ŒJSPatchå¯ä»¥ç”¨æ¥å¼€å‘ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—ï¼Œä½†æ˜¯ä¸é€‚åˆå¼€å‘ä¸€æ•´ä¸ªAPPã€‚æ¯•ç«Ÿï¼ŒJSPatchçš„æ€è·¯ä¾ç„¶æ˜¯ç”±nativeçš„æ€ç»´ç”¨JSæ¥å¼€å‘ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼Œä¸å¦‚ç›´æ¥ç”¨OCå¼€å‘æ›´åŠ ç›´æ¥ã€‚ä½†ç”±äºOCå¼ºå¤§æ— æ¯”çš„runtimeï¼ŒJSPatchå¯ä»¥ç”¨äºå¼€å‘ä¸€ä¸ªå…¨æ–°çš„é¡µé¢å»æ›¿ä»£åŸæœ¬ä½¿ç”¨Nativeç¼–å†™çš„é¡µé¢ï¼Œè¿™ä¸€ç‚¹æ˜¯RNå’Œweexåšä¸åˆ°çš„ã€‚&lt;/p&gt;
&lt;h4 id=&quot;hot-patch&quot;&gt;&lt;a href=&quot;#hot-patch&quot; class=&quot;headerlink&quot; title=&quot;hot patch&quot;&gt;&lt;/a&gt;hot patch&lt;/h4&gt;&lt;p&gt;JSPatchçš„å‡ºç”Ÿå°±æ˜¯ä¸ºäº†è§£å†³iOSå‘ç‰ˆå›°éš¾çš„é—®é¢˜ï¼ŒåŸºäºOCçš„runtimeå’Œjsçš„çµæ´»ä½¿JSPatchåœ¨çƒ­ä¿®å¤ä¸Šæ¯”RN/weexå¼ºä¸Šäº†ä¸€ä¸ªé‡çº§ã€‚ä¸¾ä¸¤ä¸ªä¾‹å­&lt;/p&gt;
&lt;p&gt;ä¸€ï¼šå®ç°ä¸€ä¸ªæ²¡æœ‰å®ç°çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;RN/weexéƒ½éœ€è¦å®ç°ä¸€ä¸ªjsBrideï¼Œå°±æ˜¯åœ¨nativeå®ç°å¥½ï¼Œç”¨jså»è°ƒç”¨ã€‚è¿™æ ·çš„æ–¹å¼å°±æ— æ³•åŠ¨æ€çš„æ·»åŠ æ–¹æ³•ï¼Œæ¯”å¦‚æˆ‘ä»¬ç°åœ¨ä¸ƒè´·åšäº†ä¸ªå¾®ä¿¡åˆ†äº«ï¼Œç æ‰äº†ä¸€ä¸ªæ‹·è´é“¾æ¥çš„æŒ‰é’®ã€‚ç”¨JSPatchå°±å¯ä»¥å¾ˆå¿«çš„åŠ å›å»ï¼Œä¸éœ€è¦å‘ç‰ˆæœ¬ï¼Œè€Œå¦‚æœæ˜¯ç”¨RNå¼€å‘çš„ï¼ŒNativeåŸæœ¬å°±æ²¡æœ‰å®ç°è¿™æ®µä»£ç ï¼Œé‚£å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚&lt;/p&gt;
&lt;p&gt;äºŒï¼šæ›¿æ¢åŸç”Ÿçš„é¡µé¢&lt;/p&gt;
&lt;p&gt;å¾ˆå¤šé¡¹ç›®æœ¬èº«å·²ç»ä½¿ç”¨Nativeå¼€å‘ä¸€æ®µæ—¶é—´äº†ï¼Œæ¥å…¥RN/weexåä¹Ÿåªæ˜¯å±€éƒ¨æ–°é¡µé¢ä½¿ç”¨ã€‚RNå¯ä»¥å¼€å‘ä¸€æ•´ä¸ªæ–°åŠŸèƒ½ç•Œé¢ï¼ŒåŠ¨æ€æ›´æ–°åˆ°appä¸Šï¼Œä½†æ˜¯è¿™ä¸ªæ–°åŠŸèƒ½ç•Œé¢æ€ä¹ˆæ‰“å¼€å‘¢ï¼ŸåŠæ³•æœ‰ä¸€ä¸ªï¼Œappå†…æœ‰ä¸€å¥—URLRouteçš„è·¯ç”±æœºåˆ¶ï¼Œå¹¶ä¸”è¾…åŠ©ä»¥äº‘ç«¯å¯æ§çš„è·¯ç”±é…ç½®è¡¨ï¼Œé‚£ä¹ˆç¡®å®å¯ä»¥æ”¹å˜æŸäº›ä½ç½®åŸæœ¬çš„ç•Œé¢è·³è½¬ï¼Œä»è€Œè·³è½¬æ‰“å¼€å…¨æ–°çš„RNç•Œé¢ï¼Œå®ç°äº†æ–°RNç•Œé¢çš„åŠ¨æ€æ›´æ–°ï¼Œä½†æ˜¯JSPatchå°±ä¸éœ€è¦URLRouteè¿™å¥—å…¨å±€è·³è½¬çš„è¾…åŠ©æœºåˆ¶å¸®å¿™ï¼ŒJSPatchå®Œå…¨æœ‰èƒ½åŠ›æ›´æ”¹ä»»ä½•å·²ç»ç”±OCå†™å¥½çš„ä»£ç ï¼Œéšæ„çš„æ”¹å˜è·³è½¬åˆ°æ–°ç•Œé¢ï¼Œéšæ„çš„å¢åŠ æ–°æŒ‰é’®ï¼Œä¸æ”¹å˜æ—§ç•Œé¢å°±æŠŠæ–°ç•Œé¢æ‰“å¼€ï¼&lt;/p&gt;
&lt;h4 id=&quot;å†…å­˜æ§åˆ¶å·®å¼‚&quot;&gt;&lt;a href=&quot;#å†…å­˜æ§åˆ¶å·®å¼‚&quot; class=&quot;headerlink&quot; title=&quot;å†…å­˜æ§åˆ¶å·®å¼‚&quot;&gt;&lt;/a&gt;å†…å­˜æ§åˆ¶å·®å¼‚&lt;/h4&gt;&lt;p&gt;JSPatchåœ¨OCå’ŒJCäº¤äº’çš„æ—¶å€™ï¼Œå°†OCå¯¹è±¡ï¼Œç•Œé¢ï¼ŒModelç›´æ¥ä¼ ç»™JSçš„ä¸Šä¸‹æ–‡ï¼ŒåŒæ—¶OCå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¼š+1ï¼Œå¹¶éšç€JSçš„åƒåœ¾å›æ”¶è€Œå¯¹è¿™ä¸ªOCå¯¹è±¡è¿›è¡Œé¢å¤–çš„æ§åˆ¶ã€‚JSä¸­æ— æ³•è®¿é—®è¿™ä¸ªOCå¯¹è±¡ï¼Œä½†å¯ä»¥å°†OCå¯¹è±¡çš„æ–¹æ³•å‘å›ç»™OCç¯å¢ƒå»æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;RNåœ¨OCä¸JSäº¤äº’çš„æ—¶å€™ï¼Œæ˜¯å®Œå…¨ä¸æ”¯æŒä¼ é€’ä»»ä½•OCå¯¹è±¡çš„ï¼Œæ‰€æœ‰èƒ½åœ¨JSä¸OCä¸­é—´ä¼ é€’çš„ï¼Œä¸€å®šæ˜¯å¯ä»¥è¢«jsonåŒ–ï¼Œå­—ç¬¦åŒ–çš„å†…å®¹ï¼Œæ•°å­—ï¼Œå­—å…¸ï¼Œæ•°ç»„ï¼Œå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥RNä¸“é—¨æœ‰ä¸ªRCTConvertç±»å»ä¸“é—¨å¤„ç†ï¼Œjsonçš„åºåˆ—åŒ–modelåŒ–ï¼Œååºåˆ—åŒ–åmodelåŒ–ã€‚é‚£ä¹ˆRNæ˜¯å¦‚ä½•é€šè¿‡JSå»æ§åˆ¶ä¸€ä¸ªçº¯OCçš„ç•Œé¢Viewå‘¢?æ˜¯é€šè¿‡viewTagï¼ŒJSæ§åˆ¶çš„æ¯ä¸€ä¸ªç•Œé¢æ•ˆæœï¼Œéƒ½æ˜¯ä¼ è¿‡æ¥ä¸€ä¸ªtagï¼Œè®©nativeåˆ›å»ºï¼Œè®©nativeä¿®æ”¹ï¼Œnativeä¼šå‚¨å­˜ä½è¿™äº›tagåˆ°ä¸€ä¸ªhashmapé‡Œï¼Œè¿™æ ·JSæ‰èƒ½å¤Ÿä¸ç›´æ¥ä¼ é€’OCå¯¹è±¡ï¼Œè€Œæ˜¯ä¼ é€’ä¸€ä¸ªæ•°å­—ï¼Œä»è€Œæ§åˆ¶OCå¯¹è±¡&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;äºŒè€…çš„å®ç°å·®å¼‚ï¼Œæ˜¯ä¼šé€ æˆä¸€äº›åº•å±‚è¿è¡Œå·®å¼‚çš„ï¼ŒOCä¸JSå¯¹è±¡åªä¼ é€’JSONå…¶å®å°±ä¿è¯äº†ï¼ŒJSä¸Šä¸‹æ–‡çš„å†…å­˜ä¸OCä¸Šä¸‹æ–‡çš„å†…å­˜å®Œå…¨æ²¡æœ‰äº’é€šï¼Œå„è‡ªçš„å†…ä»å„è‡ªæ§åˆ¶ï¼ŒJSæ˜¯ä¸€å¥—åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œè€ŒOCæ˜¯ä¸€å¥—å¼•ç”¨è®¡æ•°æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;JSPatchå°†äºŒè€…è¿›è¡Œäº†äº’é€šï¼Œè¿™äº›äº’é€šçš„å¯¹è±¡å†…å­˜ç®¡ç†åˆ™æ˜¯ä¸€å¥—ï¼Œåˆæœ‰å¼•ç”¨è®¡æ•°æ§åˆ¶ï¼Œåˆæœ‰JSçš„åƒåœ¾å›æ”¶ï¼Œå½“JSçš„åƒåœ¾å›æ”¶ï¼Œå¹¶ä¸”iOSçš„å¼•ç”¨è®¡æ•°å½’0ï¼Œæ‰ä¼šé”€æ¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæ²¡æœ‰ä¼˜åŠ£ä¹‹åˆ†ï¼ŒJSPatchåœ¨åŒå†…å­˜æ§åˆ¶æœºåˆ¶ä¸‹ï¼Œä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸workæ²¡æœ‰é—®é¢˜çš„ï¼ŒRN&amp;amp;Weexçš„è¿™å¥—æœºåˆ¶ï¼Œå†…å­˜ä¸Šç®€å•æ¸…æ™°ï¼Œä¸è¿‡è¿™éƒ½æ˜¯åº•å±‚å®ç°çš„é—®é¢˜ï¼Œä¸Šå±‚ä½¿ç”¨ï¼Œéƒ½æ˜¯æ²¡é—®é¢˜çš„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;##æ€»ç»“&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå€Ÿç”¨JSPatch ä½œè€…ç»™å‡ºçš„ä¸€ä¸ªæ¯”è¾ƒã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¡†æ¶&lt;/th&gt;
&lt;th&gt;å­¦ä¹ æˆæœ¬&lt;/th&gt;
&lt;th&gt;æ¥å…¥æˆæœ¬&lt;/th&gt;
&lt;th&gt;å¼€å‘æ•ˆç‡&lt;/th&gt;
&lt;th&gt;æ€§èƒ½ä½“éªŒ&lt;/th&gt;
&lt;th&gt;çƒ­æ›´æ–°èƒ½åŠ›&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;RN&amp;amp;Weex&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;é«˜ï¼Œè·¨å¹³å°&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;JSPatch&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;ä¸­ï¼Œå•ä¸€iOS&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;å¾ˆå¼º&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡æ˜¯åšå†…éƒ¨åˆ†äº«çš„æ—¶å€™æ•´ç†çš„çŸ¥è¯†å†…å®¹ï¼Œæ•´ç†äº†å‡ºæ¥ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æŠ€æœ¯ä»‹ç»&quot;&gt;&lt;a href=&quot;#æŠ€æœ¯ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;æŠ€æœ¯ä»‹ç»&quot;&gt;&lt;/a&gt;æŠ€æœ¯ä»‹ç»&lt;/h2&gt;&lt;h3 id=&quot;Weex&quot;&gt;&lt;a href=&quot;#Weex&quot; cl
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Method Swizzle ä¸ AOP</title>
    <link href="http://csbzhixing.github.io/2016/08/19/Method%20Swizzle%20%E4%B8%8E%20AOP/"/>
    <id>http://csbzhixing.github.io/2016/08/19/Method Swizzle ä¸ AOP/</id>
    <published>2016-08-19T15:03:29.000Z</published>
    <updated>2016-08-19T15:17:07.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;Method-Swizzle&quot;&gt;&lt;a href=&quot;#Method-Swizzle&quot; class=&quot;headerlink&quot; title=&quot;Method Swizzle&quot;&gt;&lt;/a&gt;Method Swizzle&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Method Swizzle&lt;/code&gt;æ˜¯åŸºäºruntimeå®ç°â€œé»‘é­”æ³•â€ã€‚&lt;/p&gt;
&lt;p&gt;å†™è¿™ç¯‡ä¸»è¦æ˜¯æºäºä¸Šå‘¨ä¸€æ¬¡é¡¹ç›®bug fixã€‚&lt;/p&gt;
&lt;p&gt;é¡¹ç›®åŸºäºReact Native 0.20ç‰ˆæœ¬å¼€å‘ï¼Œåœ¨è°ƒç”¨ç›¸æœºæ‹ç…§åï¼Œç”±äºç…§ç‰‡è‡ªèº«å¸¦æœ‰äº†æ—‹è½¬ä¿¡æ¯ï¼Œå› æ­¤ç…§ç‰‡åœ¨å®¢æˆ·çœ‹æ¥ä¸æ˜¯â€œæ­£çš„â€ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- (void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary&amp;lt;NSString *, id&amp;gt; *)info
{
  NSString *mediaType = info[UIImagePickerControllerMediaType];
  BOOL isMovie = [mediaType isEqualToString:(NSString *)kUTTypeMovie];
  NSString *key = isMovie ? UIImagePickerControllerMediaURL : UIImagePickerControllerReferenceURL;
  NSURL *imageURL = info[key];
  if (imageURL) {
    [self _dismissPicker:picker args:@[imageURL.absoluteString]];
    return;
  }

  // This is a newly taken image, and doesn&amp;#39;t have a URL yet.
  // We need to save it to the image store first.
  UIImage *originalImage = info[UIImagePickerControllerOriginalImage];

  // WARNING: Using ImageStoreManager may cause a memory leak because the
  // image isn&amp;#39;t automatically removed from store once we&amp;#39;re done using it.
  [_bridge.imageStoreManager storeImage:originalImage withBlock:^(NSString *tempImageTag) {
    [self _dismissPicker:picker args:tempImageTag ? @[tempImageTag] : nil];
  }];
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°å…¶å®å°±æ˜¯éœ€è¦å¯¹&lt;code&gt;originalImage&lt;/code&gt;è¿›è¡Œæ–¹å‘ä¿®æ­£ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åè·Ÿè¸ªäº†RNçš„å®ç°ï¼Œå‘ç°ä»–æ˜¯å­˜åœ¨åº”ç”¨çš„ä¸´æ—¶å˜é‡é‡Œé¢ï¼Œå¯æ˜¯ç”¨çš„æ˜¯CGImageã€‚æ„å‘³ç€æˆ‘ä»¬å³ä½¿å–å‡ºæ¥äº†è¿™ä¸ªImageï¼Œä¹Ÿæ— æ³•è·çŸ¥è¿™ä¸ªImageçš„æ–¹å‘ä¿¡æ¯ã€‚å½“æ—¶ç¬¬ä¸€ååº”æ˜¯ã€‚ã€‚æˆ‘è‡ªå·±æ¥å®ç°ä¸€ä¸ªé€‰æ‹©å™¨ã€‚ã€‚ã€‚ä¸è¿‡è¿™ä¸ªå·¥ä½œé‡ç•¥å¤§ï¼Œè€Œä¸”å¯èƒ½ä¼šé€ æˆå¾ˆå¤šä¸çŸ¥åŸå› çš„å‘ã€‚æ™šä¸Šæ´—æ¾¡çš„æ—¶å€™ï¼Œçªç„¶æƒ³åˆ°å¯ä»¥å¯ä»¥é€šè¿‡Method swizzleçš„æ–¹å¼å»å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;æ–°å»ºäº†ä¸€ä¸ªcategoryï¼Œåœ¨&lt;code&gt;+(void)load&lt;/code&gt;æ–¹æ³•çš„æ›¿æ¢äº†&lt;code&gt;imagePickerController&lt;/code&gt;æ–¹æ³•ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼ŒOKã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä»€ä¹ˆæ—¶å€™ç”¨&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ—¶å€™ç”¨&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ—¶å€™ç”¨&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ—¶å€™ç”¨&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Method Swizzle&lt;/code&gt;æ˜¯æŠŠé”‹åˆ©çš„åˆ€ï¼Œç”¨çš„å¥½ï¼Œå‰Šé“å¦‚æ³¥ï¼›ç”¨çš„ä¸å¥½ï¼Œå®³äººå®³å·±ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬è€Œè¨€ï¼Œå¦‚æœèƒ½æœ‰å¥½çš„æ–¹æ³•è§£å†³ï¼Œä¸æ¨èä½¿ç”¨&lt;code&gt;Method Swizzle&lt;/code&gt;ã€‚åŸå› å°±æ˜¯éš¾ä»¥è·Ÿè¸ªé—®é¢˜ã€‚å¦‚Aå®ç°ä¸€ä¸ªæ–¹æ³•&lt;code&gt;run&lt;/code&gt;ã€‚ä¸€ä¸ªå¼€å‘åœ¨&lt;code&gt;A(B)&lt;/code&gt;è¿™ä¸ªcategoryé‡Œé¢æ›¿æ¢æˆäº†&lt;code&gt;runFast&lt;/code&gt;ï¼Œè€Œå¦ä¸€ä¸ªå¼€å‘åœ¨&lt;code&gt;A(C)&lt;/code&gt;é‡Œé¢æ›¿æ¢æˆäº†&lt;code&gt;runSlow&lt;/code&gt;ã€‚é‚£æˆ‘ä»¬è°ƒç”¨&lt;code&gt;run&lt;/code&gt;æ–¹æ³•çš„æ—¶å€™åˆ°åº•æ˜¯ä»€ä¹ˆç»“æœï¼Ÿ&lt;/p&gt;
&lt;h3 id=&quot;è¯¥æ€ä¹ˆç”¨&quot;&gt;&lt;a href=&quot;#è¯¥æ€ä¹ˆç”¨&quot; class=&quot;headerlink&quot; title=&quot;è¯¥æ€ä¹ˆç”¨&quot;&gt;&lt;/a&gt;è¯¥æ€ä¹ˆç”¨&lt;/h3&gt;&lt;p&gt;æ›¿æ¢æ–¹æ³•åº”è¯¥æ˜¯åœ¨è¿è¡Œæ—¶ç¡®å®šå”¯ä¸€çš„ï¼Œå¦‚æœå­˜åœ¨å¤šæ¬¡ä¸ç¡®å®šçš„&lt;code&gt;Method Swizzle&lt;/code&gt;ï¼Œæˆ‘ä»¬å°±æ— æ³•çŸ¥é“æœ€åè·å–çš„IMPæ¥æºäºæ¥ä¸ªæ–¹æ³•ã€‚å› æ­¤åœ¨å“ªé‡Œæ›¿æ¢ï¼Œæ€ä¹ˆæ›¿æ¢ï¼Œå¯¹äºä¸åŒç±»å‹çš„æ–¹æ³•éƒ½ä¸ä¸€æ ·ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ™®é€šå®ä¾‹æ–¹æ³•&quot;&gt;&lt;a href=&quot;#æ™®é€šå®ä¾‹æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;æ™®é€šå®ä¾‹æ–¹æ³•&quot;&gt;&lt;/a&gt;æ™®é€šå®ä¾‹æ–¹æ³•&lt;/h4&gt;&lt;p&gt;æ›¿æ¢æ™®é€šå®ä¾‹æ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå¯¹åº”ç±»çš„åˆ†ç±»ï¼Œåœ¨åˆ†ç±»ä¸­å®ç°&lt;code&gt;+(void)load&lt;/code&gt;æ–¹æ³•ï¼Œåœ¨&lt;code&gt;+(void)load&lt;/code&gt;æ–¹æ³•ä¸­è¿›è¡Œæ›¿æ¢ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;+ (void)load {
    Class originalClass = NSClassFromString(@&amp;quot;Car&amp;quot;);
    Class swizzledClass = [self class];
    SEL originalSelector = NSSelectorFromString(@&amp;quot;run:&amp;quot;);
    SEL swizzledSelector = @selector(xxx_run:);
    Method originalMethod = class_getInstanceMethod(originalClass, originalSelector);
    Method swizzledMethod = class_getInstanceMethod(swizzledClass, swizzledSelector);

    IMP originalIMP = method_getImplementation(originalMethod);
    IMP swizzledIMP = method_getImplementation(swizzledMethod);
    const char *originalType = method_getTypeEncoding(originalMethod);
    const char *swizzledType = method_getTypeEncoding(swizzledMethod);

    class_replaceMethod(originalClass,swizzledSelector,originalIMP,originalType);
    class_replaceMethod(originalClass,originalSelector,swizzledIMP,swizzledType);
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é¦–å…ˆè¦çŸ¥é“ä¸ºä½•åœ¨&lt;code&gt;+(void)load&lt;/code&gt;ä¸­å®ç°æ›¿æ¢ã€‚&lt;code&gt;+(void)load&lt;/code&gt;è¿™ä¸ªæ–¹æ³•é¦–å…ˆæ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡Œï¼Œåˆ‡åªæ‰§è¡Œä¸€æ¬¡ï¼Œå› æ­¤å°±ç¬¦åˆäº†æˆ‘ä»¬åœ¨&lt;code&gt;åœ¨ç¨‹åºè¿è¡ŒæœŸåªæ‰§è¡Œä¸€æ¬¡æ›¿æ¢&lt;/code&gt;çš„æƒ³æ³•ã€‚å…¶æ¬¡ï¼Œ&lt;code&gt;+(void)load&lt;/code&gt;çš„æ‰§è¡Œé¡ºåºæ˜¯&lt;code&gt;çˆ¶ç±»-&amp;gt;å­ç±»-&amp;gt;åˆ†ç±»&lt;/code&gt;çš„é¡ºåºï¼Œä¸”ä¸è¦†ç›–ã€‚å› æ­¤ï¼Œåˆ†ç±»çš„&lt;code&gt;+(void)load&lt;/code&gt;ä¸ä¼šå½±å“ç±»çš„&lt;code&gt;+(void)load&lt;/code&gt;ä¹Ÿæ˜¯æˆ‘ä»¬æ­£éœ€è¦çš„ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ç±»æ–¹æ³•&quot;&gt;&lt;a href=&quot;#ç±»æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;ç±»æ–¹æ³•&quot;&gt;&lt;/a&gt;ç±»æ–¹æ³•&lt;/h4&gt;&lt;p&gt;å®ç°ç±»æ–¹æ³•çš„å®ç°æ€è·¯ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¸åŒçš„æ˜¯æˆ‘ä»¬ä¸ä»å®ä¾‹æ–¹æ³•åˆ—è¡¨ä¸­å»è·å–ç›¸å…³æ–¹æ³•å®ç°&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;+ (void)load {
    Class cls = [self class];
    SEL originalSelector = @selector(dictionary);
    SEL swizzledSelector = @selector(xxx_dictionary);

    // ä½¿ç”¨class_getClassMethodæ¥è·å–ç±»æ–¹æ³•çš„Method
    Method originalMethod = class_getClassMethod(cls, originalSelector);
    Method swizzledMethod = class_getClassMethod(cls, swizzledSelector);
    if (!originalMethod || !swizzledMethod) {
        return;
    }

    IMP originalIMP = method_getImplementation(originalMethod);
    IMP swizzledIMP = method_getImplementation(swizzledMethod);
    const char *originalType = method_getTypeEncoding(originalMethod);
    const char *swizzledType = method_getTypeEncoding(swizzledMethod);

    // ç±»æ–¹æ³•æ·»åŠ ,éœ€è¦å°†æ–¹æ³•æ·»åŠ åˆ°MetaClassä¸­
    Class metaClass = objc_getMetaClass(class_getName(cls));
    class_replaceMethod(metaClass,originalSelector,swizzledIMP,swizzledType);
    class_replaceMethod(metaClass,swizzledSelector,originalIMP,originalType);
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åŒºåˆ«æœ‰2ç‚¹&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;class_getClassMethod(Class cls, SEL name)&lt;/code&gt;æ›¿æ¢æ‰&lt;code&gt;class_getInstanceMethod(Class cls, SEL name)&lt;/code&gt;ã€‚çœ‹å¾—å‡ºæ–¹æ³•çš„å·®å¼‚ã€‚&lt;/li&gt;
&lt;li&gt;å®ä¾‹æ–¹æ³•çš„å†…å®¹æ˜¯è®°å½•åœ¨classçš„method listä¸Šçš„ï¼Œè€Œç±»æ–¹æ³•æ˜¯è®°å½•åœ¨meta-class ä¸Šçš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;ä¿®æ”¹ç±»ç°‡&quot;&gt;&lt;a href=&quot;#ä¿®æ”¹ç±»ç°‡&quot; class=&quot;headerlink&quot; title=&quot;ä¿®æ”¹ç±»ç°‡&quot;&gt;&lt;/a&gt;ä¿®æ”¹ç±»ç°‡&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;+ (void)load {
    Class originalClass = NSClassFromString(@&amp;quot;__NSDictionaryM&amp;quot;);
    Class swizzledClass = [self class];
    SEL originalSelector = @selector(setObject:forKey:);
    SEL swizzledSelector = @selector(safe_setObject:forKey:);
    Method originalMethod = class_getInstanceMethod(originalClass, originalSelector);
    Method swizzledMethod = class_getInstanceMethod(swizzledClass, swizzledSelector);

    IMP originalIMP = method_getImplementation(originalMethod);
    IMP swizzledIMP = method_getImplementation(swizzledMethod);
    const char *originalType = method_getTypeEncoding(originalMethod);
    const char *swizzledType = method_getTypeEncoding(swizzledMethod);

    class_replaceMethod(originalClass,swizzledSelector,originalIMP,originalType);
    class_replaceMethod(originalClass,originalSelector,swizzledIMP,swizzledType);
}

- (void)safe_setObject:(id)anObject forKey:(id&amp;lt;NSCopying&amp;gt;)aKey {
    if (anObject &amp;amp;&amp;amp; aKey) {
        [self safe_setObject:anObject forKey:aKey];
    }
    else if (aKey) {
        [(NSMutableDictionary *)self removeObjectForKey:aKey];
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/ClassCluster.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;br&gt;ä¸­è¯¦ç»†è®²è§£äº†ä»€ä¹ˆæ˜¯ç±»ç°‡ã€‚è¿™é‡Œæˆ‘ä»¬æ›¿æ¢çš„æ˜¯&lt;code&gt;__NSDictionaryM&lt;/code&gt;ä¸­å¯¹åº”çš„&lt;code&gt;setObject:forKey:&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;AOP-å’Œ-Method-Swizzle&quot;&gt;&lt;a href=&quot;#AOP-å’Œ-Method-Swizzle&quot; class=&quot;headerlink&quot; title=&quot;AOP å’Œ Method Swizzle&quot;&gt;&lt;/a&gt;AOP å’Œ Method Swizzle&lt;/h2&gt;&lt;p&gt;æœ‰ä¸€å®šå¼€å‘ç»éªŒçš„äººä¸€å®šå¬è¯´è¿‡AOPã€‚ç”¨ä¸€å¥ä¸ªäººè§‰å¾—æ¯”è¾ƒç»å…¸çš„è¯æ¥æ¦‚æ‹¬&lt;code&gt;è¿™ç§åœ¨è¿è¡Œæ—¶ï¼ŒåŠ¨æ€åœ°å°†ä»£ç åˆ‡å…¥åˆ°ç±»çš„æŒ‡å®šæ–¹æ³•ã€æŒ‡å®šä½ç½®ä¸Šçš„ç¼–ç¨‹æ€æƒ³å°±æ˜¯é¢å‘åˆ‡é¢çš„ç¼–ç¨‹&lt;/code&gt;ã€‚è¿™é‡Œæ¥çœ‹ï¼Œé€šè¿‡Method Swizzleæ­£å¥½æ¥å®ç°AOPã€‚åœ¨è¿™æ–¹é¢ï¼Œgithubä¸Šæœ‰ä¸€ä¸ªå®ç°éå¸¸å¥½çš„å¼€æºåº“&lt;a href=&quot;https://github.com/steipete/Aspects&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Aspects&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„è¯ï¼Œä¼šç”¨å®ƒæ¥åšä¸€ä¸‹åˆ†æï¼Œæ€ä¹ˆå»å®ç°AOPã€‚&lt;/p&gt;
&lt;h3 id=&quot;åŠŸèƒ½åˆ†æ&quot;&gt;&lt;a href=&quot;#åŠŸèƒ½åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;åŠŸèƒ½åˆ†æ&quot;&gt;&lt;/a&gt;åŠŸèƒ½åˆ†æ&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Aspects&lt;/code&gt;è¿™ä¸ªåº“å®ç°äº†AOP,é‚£ä¹ˆå®ç°åˆ°ä»€ä¹ˆåœ°æ­¥ï¼Œèƒ½åšåˆ°ä»€ä¹ˆæ ·çš„åŠŸèƒ½ï¼Œå¯ä»¥ä»å¤´æ–‡ä»¶å®šä¹‰ä¸­ç•¥çŸ¥ä¸€äºŒ&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;typedef NS_OPTIONS(NSUInteger, AspectOptions) {
    AspectPositionAfter   = 0,            /// Called after the original implementation (default)
    AspectPositionInstead = 1,            /// Will replace the original implementation.
    AspectPositionBefore  = 2,            /// Called before the original implementation.

    AspectOptionAutomaticRemoval = 1 &amp;lt;&amp;lt; 3 /// Will remove the hook after the first execution.
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å®šä¹‰äº†&lt;code&gt;AspectOptions&lt;/code&gt;ï¼Œä»åå­—çœ‹å‡ºï¼Œåˆ†åˆ«å¯ä»¥åšåˆ°å°†æ–°æ–¹æ³•æ’å…¥åˆ°è€æ–¹æ³•ä¹‹å‰/ä¹‹åï¼Œæ›¿æ¢åŸæœ‰çš„æ–¹æ³•ï¼Œä»…åœ¨ç¬¬ä¸€æ¬¡æ›¿æ¢åŸæ¥çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;@protocol AspectToken &amp;lt;NSObject&amp;gt;

/// Deregisters an aspect.
/// @return YES if deregistration is successful, otherwise NO.
- (BOOL)remove;

@end

/// The AspectInfo protocol is the first parameter of our block syntax.
@protocol AspectInfo &amp;lt;NSObject&amp;gt;

/// The instance that is currently hooked.
- (id)instance;

/// The original invocation of the hooked method.
- (NSInvocation *)originalInvocation;

/// All method arguments, boxed. This is lazily evaluated.
- (NSArray *)arguments;

@end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸¤ä¸ªåè®®ï¼Œå®ç°åå¯ä»¥å®ç°æ’¤é”€æ’å…¥/ è·å¾—æ’å…¥çš„å®ä¾‹ä¿¡æ¯ï¼ŒåŸæœ‰æ–¹æ³•å†…å®¹å’Œå‚æ•°åˆ—è¡¨ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;@interface NSObject (Aspects)

/// Adds a block of code before/instead/after the current `selector` for a specific class.
///
/// @param block Aspects replicates the type signature of the method being hooked.
/// The first parameter will be `id&amp;lt;AspectInfo&amp;gt;`, followed by all parameters of the method.
/// These parameters are optional and will be filled to match the block signature.
/// You can even use an empty block, or one that simple gets `id&amp;lt;AspectInfo&amp;gt;`.
///
/// @note Hooking static methods is not supported.
/// @return A token which allows to later deregister the aspect.
+ (id&amp;lt;AspectToken&amp;gt;)aspect_hookSelector:(SEL)selector
                           withOptions:(AspectOptions)options
                            usingBlock:(id)block
                                 error:(NSError **)error;

/// Adds a block of code before/instead/after the current `selector` for a specific instance.
- (id&amp;lt;AspectToken&amp;gt;)aspect_hookSelector:(SEL)selector
                           withOptions:(AspectOptions)options
                            usingBlock:(id)block
                                 error:(NSError **)error;

@end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯¹NSObjectå®šä¹‰äº†ä¸€ä¸ªåˆ†ç±»ï¼Œåªè¦ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯å¯¹ç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•çš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼ŒAspectçš„å®ç°åŠŸèƒ½è¿˜æ˜¯å¾ˆå¼ºå¤§çš„ã€‚åœ¨æä¾›åŸºæœ¬Method swizzleçš„åŸºç¡€ä¸Šè¿˜å®ç°äº†å¯¹ä¸åŒæ’å…¥ä½ç½®çš„åŠŸèƒ½ï¼Œæä¾›å¯æ’¤å›çš„æ›¿æ¢ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®ç°ç»†èŠ‚&quot;&gt;&lt;a href=&quot;#å®ç°ç»†èŠ‚&quot; class=&quot;headerlink&quot; title=&quot;å®ç°ç»†èŠ‚&quot;&gt;&lt;/a&gt;å®ç°ç»†èŠ‚&lt;/h3&gt;&lt;p&gt;åœ¨è‡ªå·±å®ç°&lt;code&gt;Method Swizzle&lt;/code&gt;çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿä¼šè€ƒè™‘åˆ°ï¼Œå¦‚æœæˆ‘éœ€è¦æ¢å¤è¢«æ›¿æ¢çš„æ–¹æ³•æ€ä¹ˆåšï¼Ÿå¦‚æœæˆ‘ä»…ä»…æƒ³åœ¨æŸä¸ªæ–¹æ³•æ‰§è¡Œå‰æˆ–æ‰§è¡Œåæ‰§è¡Œä¸€ä¸ªæ–¹æ³•å‘¢ï¼Ÿæ¯”å¦‚æˆ‘éœ€è¦åœ¨æ‰€æœ‰çš„&lt;code&gt;viewDidLoad&lt;/code&gt;ä¸­æ’å…¥ä¸€ä¸ªlogè¯­å¥ï¼Œè¿™æ—¶å€™ç”¨&lt;code&gt;Method Swizzle&lt;/code&gt;æ˜¾ç„¶æ˜¯ä¸åˆé€‚ï¼Œè€Œ&lt;code&gt;Aspect&lt;/code&gt;èƒ½åšåˆ°çš„ï¼Œä¹Ÿæ˜¯è®©æˆ‘ä»¬å¥½å¥‡çš„ï¼Œæ¥çœ‹çœ‹å…·ä½“çš„å®ç°æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;+ (id&amp;lt;AspectToken&amp;gt;)aspect_hookSelector:(SEL)selector
                      withOptions:(AspectOptions)options
                       usingBlock:(id)block
                            error:(NSError **)error {
    return aspect_add((id)self, selector, options, block, error);
}

/// @return A token which allows to later deregister the aspect.
- (id&amp;lt;AspectToken&amp;gt;)aspect_hookSelector:(SEL)selector
                      withOptions:(AspectOptions)options
                       usingBlock:(id)block
                            error:(NSError **)error {
    return aspect_add(self, selector, options, block, error);
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸¤ä¸ªå…¬å¼€APIè¿›æ¥åéƒ½æ˜¯è°ƒç”¨&lt;code&gt;static id aspect_add(id self, SEL selector, AspectOptions options, id block, NSError **error)&lt;/code&gt;è¿™ä¸ªé™æ€æ–¹æ³•ï¼ŒåŒºåˆ«å°±æ˜¯å¯¹ç±»æ–¹æ³•ä¸­æ›¿æ¢è¦åœ¨selfå‰ç”¨idä¿®é¥°ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;static id aspect_add(id self, SEL selector, AspectOptions options, id block, NSError **error) {
    NSCParameterAssert(self);
    NSCParameterAssert(selector);
    NSCParameterAssert(block);

    __block AspectIdentifier *identifier = nil;
    aspect_performLocked(^{
        if (aspect_isSelectorAllowedAndTrack(self, selector, options, error)) {
            AspectsContainer *aspectContainer = aspect_getContainerForObject(self, selector);
            identifier = [AspectIdentifier identifierWithSelector:selector object:self options:options block:block error:error];
            if (identifier) {
                [aspectContainer addAspect:identifier withOptions:options];

                // Modify the class to allow message interception.
                aspect_prepareClassAndHookSelector(self, selector, error);
            }
        }
    });
    return identifier;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ–¹æ³•ä¸­é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª&lt;code&gt;AspectIdentifier&lt;/code&gt;ç±»å‹çš„å®ä¾‹å˜é‡ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;@interface AspectIdentifier : NSObject
+ (instancetype)identifierWithSelector:(SEL)selector object:(id)object options:(AspectOptions)options block:(id)block error:(NSError **)error;
- (BOOL)invokeWithInfo:(id&amp;lt;AspectInfo&amp;gt;)info;
@property (nonatomic, assign) SEL selector;
@property (nonatomic, strong) id block;
@property (nonatomic, strong) NSMethodSignature *blockSignature;
@property (nonatomic, weak) id object;
@property (nonatomic, assign) AspectOptions options;
@end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°è¿™ä¸ªç±»çš„å®šä¹‰å°±æ˜¯å¯¹Aspectå®šä¹‰çš„ã€‚&lt;/p&gt;
&lt;p&gt;éšåæ‰§è¡Œ&lt;code&gt;aspect_performLocked&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    static void aspect_performLocked(dispatch_block_t block) {
    static OSSpinLock aspect_lock = OS_SPINLOCK_INIT;
    OSSpinLockLock(&amp;amp;aspect_lock);
    block();
    OSSpinLockUnlock(&amp;amp;aspect_lock);
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ–¹æ³•ä¸­åˆ›å»ºäº†ä¸€ä¸ª&lt;code&gt;OSSpinLockLock&lt;/code&gt;è‡ªæ—‹é”ï¼Œå¯¹blockæ‰§è¡Œè¿›è¡Œä¿æŠ¤ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è‡ªæ—‹é”æ˜¯åœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿ(SMP)ä¸Šä¸ºä¿æŠ¤ä¸€æ®µå…³é”®ä»£ç çš„æ‰§è¡Œæˆ–è€…å…³é”®æ•°æ®çš„ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œæ˜¯å®ç°synchronizationçš„ä¸€ç§æ‰‹æ®µã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¼ å…¥çš„blockä¸­ï¼Œé¦–å…ˆå…ˆæ‰§è¡Œ&lt;code&gt;aspect_isSelectorAllowedAndTrack&lt;/code&gt;æ–¹æ³•&lt;/p&gt;
&lt;p&gt;&lt;code&gt;aspect_isSelectorAllowedAndTrack&lt;/code&gt;æ¯”è¾ƒé•¿ï¼Œä»å­—é¢å«ä¹‰ä¸Šæ¥è®²å°±æ˜¯æ˜¯å¦å…è®¸æ’å…¥å’Œè¿½è¸ªã€‚&lt;/p&gt;
&lt;p&gt;ä»£ç å°±ä¸è´´äº†ã€‚ã€‚ç®€å•è¯´ä¸‹æ€è·¯ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“æœ‰äº›æ–¹æ³•æ˜¯æ— æ³•è¢«æ›¿æ¢çš„ï¼Œæœ‰äº›hookçš„æ–¹æ³•å¯¹æ’å…¥çš„ä½ç½®å¾ˆæ•æ„Ÿ(å¥½åƒå¾ˆæ±¡çš„æ„Ÿè§‰)ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯å¯¹è¿™äº›é»‘åå•è¿›è¡Œåˆ¤æ–­&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ˜¯ä¸èƒ½æ›¿æ¢çš„ï¼Œæœ‰&lt;code&gt;release&lt;/code&gt;,&lt;code&gt;retain&lt;/code&gt;,&lt;code&gt;autorelease&lt;/code&gt;,&lt;code&gt;forwardInvocation&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åªèƒ½åœ¨æ·»åŠ blockåˆ°hookæ–¹æ³•å‰çš„ï¼š&lt;code&gt;dealloc&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¢«hookçš„ç±»å“åº”SELçš„ã€‚ã€‚ã€‚å–‚ä½ å†å»æ£€æŸ¥ä¸‹å¥½å§&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥è¢«hookçš„æ˜¯ä¸æ˜¯å…ƒç±»ï¼Œå¦‚æœä¸æ˜¯çš„è¯å°±å¯ä»¥æ„‰å¿«çš„è¿”å›YESå•¦ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ˜¯å…ƒç±»ã€‚ã€‚ç¨å¾®éº»çƒ¦ç‚¹ã€‚æ¢³ç†ä¸€ä¸‹é€»è¾‘å¦‚ä¸‹&lt;/p&gt;
&lt;p&gt;&lt;code&gt;swizzledClassesDict&lt;/code&gt;æ˜¯ä¸€ä¸ªdictionaryï¼Œé‡Œé¢å­˜æ”¾çš„å·²ç»æ˜¯ä»¥å½“å‰ç±»ä¸ºkeyï¼Œä»¥&lt;code&gt;AspectTracker&lt;/code&gt;ä¸ºvalueçš„é”®å€¼å¯¹ã€‚&lt;code&gt;AspectTracker&lt;/code&gt;å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;@interface AspectTracker : NSObject
- (id)initWithTrackedClass:(Class)trackedClass;
@property (nonatomic, strong) Class trackedClass;
@property (nonatomic, readonly) NSString *trackedClassName;
@property (nonatomic, strong) NSMutableSet *selectorNames;
@property (nonatomic, strong) NSMutableDictionary *selectorNamesToSubclassTrackers;
- (void)addSubclassTracker:(AspectTracker *)subclassTracker hookingSelectorName:(NSString *)selectorName;
- (void)removeSubclassTracker:(AspectTracker *)subclassTracker hookingSelectorName:(NSString *)selectorName;
- (BOOL)subclassHasHookedSelectorName:(NSString *)selectorName;
- (NSSet *)subclassTrackersHookingSelectorName:(NSString *)selectorName;
@end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ„ä¹‰å¦‚åå­—ä¸€æ ·ï¼Œå®ç°çš„æ˜¯ä¸€ä¸ªè·Ÿè¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡é‡Œé¢å­˜æ”¾äº†è·Ÿè¸ªçš„ç±»ï¼Œç±»çš„åå­—ï¼Œé€‰æ‹©å™¨çš„åç§°å·²ç»å­ç±»è·Ÿè¸ªå¯¹è±¡çš„é€‰æ‹©å™¨ã€‚&lt;/p&gt;
&lt;p&gt;è·å¾—&lt;code&gt;tracker&lt;/code&gt;åï¼Œåˆ¤æ–­æ˜¯å¦å·²ç»hookäº†å­ç±»çš„ç›¸åŒé€‰æ‹©å™¨æ–¹æ³•ï¼Œæ³¨æ„åªèƒ½åœ¨ç»§æ‰¿é“¾ä¸Šhookä¸€æ¬¡ç›¸åŒé€‰æ‹©å™¨çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;éšåé€’å½’çˆ¶ç±»ï¼ŒæŸ¥çœ‹æ˜¯å¦åœ¨ç»§æ‰¿é“¾ä¸Šå·²ç»hookè¿‡äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸Šè¿°è¿‡ç¨‹éƒ½èƒ½é¡ºåˆ©è¿›è¡Œä¸‹æ¥çš„è¯ï¼Œè¯´æ˜å¯ä»¥hookå•¦ï¼Œè¿™æ—¶å€™é€’å½’çˆ¶ç±»ï¼Œå°†selectoræ·»åŠ åˆ°trackeré‡Œé¢ã€‚&lt;/p&gt;
&lt;p&gt;å›åˆ°ä¸Šé¢çš„&lt;code&gt;aspect_performLocked&lt;/code&gt;ä¸­ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¾—çŸ¥æ˜¯èƒ½hookå•¦ï¼Œè¿™æ—¶å€™æ ¹æ®ä¼ è¿›æ¥çš„&lt;code&gt;self&lt;/code&gt;å’Œ&lt;code&gt;selector&lt;/code&gt;åˆ›å»ºä¸€ä¸ª&lt;code&gt;AspectsContainer&lt;/code&gt;ã€‚&lt;code&gt;AspectsContainer&lt;/code&gt;çš„å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;@interface AspectsContainer : NSObject
- (void)addAspect:(AspectIdentifier *)aspect withOptions:(AspectOptions)injectPosition;
- (BOOL)removeAspect:(id)aspect;
- (BOOL)hasAspects;
@property (atomic, copy) NSArray *beforeAspects;
@property (atomic, copy) NSArray *insteadAspects;
@property (atomic, copy) NSArray *afterAspects;
@end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œæœ‰ä¸‰ä¸ªå±æ€§ï¼Œéƒ½æ˜¯arrayç±»å‹ï¼Œä»åå­—ä¸éš¾çœ‹åˆ°ï¼Œå­˜çš„æ˜¯hookå‰ï¼Œè¢«hookçš„ï¼Œhookåçš„ã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»º&lt;code&gt;AspectsContainer&lt;/code&gt;ä¹‹åï¼Œå¯¹&lt;code&gt;identifier&lt;/code&gt;åˆå§‹åŒ–ï¼Œå¦‚æœæˆåŠŸåˆå§‹åŒ–ï¼Œå‘&lt;code&gt;AspectsContainer&lt;/code&gt;æ·»åŠ &lt;code&gt;identifier&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- (void)addAspect:(AspectIdentifier *)aspect withOptions:(AspectOptions)options {
    NSParameterAssert(aspect);
    NSUInteger position = options&amp;amp;AspectPositionFilter;
    switch (position) {
        case AspectPositionBefore:  self.beforeAspects  = [(self.beforeAspects ?:@[]) arrayByAddingObject:aspect]; break;
        case AspectPositionInstead: self.insteadAspects = [(self.insteadAspects?:@[]) arrayByAddingObject:aspect]; break;
        case AspectPositionAfter:   self.afterAspects   = [(self.afterAspects  ?:@[]) arrayByAddingObject:aspect]; break;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ¤æ–­optionï¼Œå°†&lt;code&gt;AspectIdentifier&lt;/code&gt;æ·»åŠ åˆ°å¯¹åº”çš„array&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæ‰§è¡Œ&lt;code&gt;aspect_prepareClassAndHookSelector&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;aspect_prepareClassAndHookSelector&lt;/code&gt;æ˜¯æ•´ä¸ª&lt;code&gt;Aspect&lt;/code&gt;é‡Œé¢æœ€æ ¸å¿ƒçš„éƒ¨åˆ†äº†ï¼Œå‰é¢çš„è¡Œä¸ºéƒ½æ˜¯åˆ¤æ–­æ˜¯å¦èƒ½hookå’Œåšç›¸åº”çš„ç¼“å­˜æ“ä½œï¼Œåœ¨è¿™é‡Œæ‰æ˜¯çœŸæ­£çš„æ‰§è¡Œhookçš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;static void aspect_prepareClassAndHookSelector(NSObject *self, SEL selector, NSError **error) {
    NSCParameterAssert(selector);
    Class klass = aspect_hookClass(self, error);
    Method targetMethod = class_getInstanceMethod(klass, selector);
    IMP targetMethodIMP = method_getImplementation(targetMethod);
    if (!aspect_isMsgForwardIMP(targetMethodIMP)) {
        // Make a method alias for the existing method implementation, it not already copied.
        const char *typeEncoding = method_getTypeEncoding(targetMethod);
        SEL aliasSelector = aspect_aliasForSelector(selector);
        if (![klass instancesRespondToSelector:aliasSelector]) {
            __unused BOOL addedAlias = class_addMethod(klass, aliasSelector, method_getImplementation(targetMethod), typeEncoding);
            NSCAssert(addedAlias, @&amp;quot;Original implementation for %@ is already copied to %@ on %@&amp;quot;, NSStringFromSelector(selector), NSStringFromSelector(aliasSelector), klass);
        }

        // We use forwardInvocation to hook in.
        class_replaceMethod(klass, selector, aspect_getMsgForwardIMP(self, selector), typeEncoding);
        AspectLog(@&amp;quot;Aspects: Installed hook for -[%@ %@].&amp;quot;, klass, NSStringFromSelector(selector));
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ€è·¯å’Œæˆ‘ä»¬è‡ªå·±åŠ¨æ‰‹å®ç°&lt;code&gt;Method Swizzle&lt;/code&gt;æ˜¯å·®ä¸å¤šçš„ï¼Œè¿‡ç¨‹ä¹Ÿæ˜¯è·å–åˆ°è¢«hookçš„classï¼Œç„¶åé€šè¿‡&lt;code&gt;selector&lt;/code&gt;è·å–åˆ°æŒ‡å®šå‡½æ•°æŒ‡é’ˆ&lt;code&gt;IMP&lt;/code&gt;ã€‚ç„¶åå°†ä¼ å…¥çš„æ–¹æ³•(block)æ›¿æ¢æ‰&lt;code&gt;IMP&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ‰§è¡Œçš„æ˜¯ä¸€ä¸ª&lt;code&gt;aspect_hookClass&lt;/code&gt;æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªClasså¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;æ•´ä½“çš„æ€è·¯å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Class statedClass = self.class;
    Class baseClass = object_getClass(self);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœå¯¹runtimeä¸ç†Ÿæ‚‰çš„äººå¯èƒ½ä¸çŸ¥é“è¿™ä¸¤è€…çš„æœ‰ä»€ä¹ˆä¸åŒã€‚ç®€å•çš„è¯´ï¼Œ&lt;code&gt;self.class&lt;/code&gt;è¿”å›çš„æ˜¯è¿™ä¸ªObject&lt;br&gt;æ‰€å±çš„ç±»ï¼Œè€Œ&lt;code&gt;object_getClass&lt;/code&gt;è¿”å›çš„æ˜¯è¿™ä¸ªObjectçš„å…ƒç±»ï¼Œä¹Ÿå°±æ˜¯ç±»å¯¹è±¡çš„ç±»ï¼ˆå¾ˆç»•å£ï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œå°±æ¥åˆ¤æ–­å…ƒç±»æ˜¯å¦è¢«ä¿®æ”¹è¿‡ï¼ˆå…ƒç±»çš„ç±»åè¢«æ·»åŠ äº†ç‰¹æœ‰çš„åç¼€ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ä¿®æ”¹è¿‡ï¼Œå°†å¯¹è±¡çš„ç±»è¿›è¡Œhookï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;static void _aspect_modifySwizzledClasses(void (^block)(NSMutableSet *swizzledClasses)) {
    static NSMutableSet *swizzledClasses;
    static dispatch_once_t pred;
    dispatch_once(&amp;amp;pred, ^{
        swizzledClasses = [NSMutableSet new];
    });
    @synchronized(swizzledClasses) {
        block(swizzledClasses);
    }
}

static Class aspect_swizzleClassInPlace(Class klass) {
    NSCParameterAssert(klass);
    NSString *className = NSStringFromClass(klass);

    _aspect_modifySwizzledClasses(^(NSMutableSet *swizzledClasses) {
        if (![swizzledClasses containsObject:className]) {
            aspect_swizzleForwardInvocation(klass);
            [swizzledClasses addObject:className];
        }
    });
    return klass;
}

static NSString *const AspectsForwardInvocationSelectorName = @&amp;quot;__aspects_forwardInvocation:&amp;quot;;
static void aspect_swizzleForwardInvocation(Class klass) {
    NSCParameterAssert(klass);
    // If there is no method, replace will act like class_addMethod.
    IMP originalImplementation = class_replaceMethod(klass, @selector(forwardInvocation:), (IMP)__ASPECTS_ARE_BEING_CALLED__, &amp;quot;v@:@&amp;quot;);
    if (originalImplementation) {
        class_addMethod(klass, NSSelectorFromString(AspectsForwardInvocationSelectorName), originalImplementation, &amp;quot;v@:@&amp;quot;);
    }
    AspectLog(@&amp;quot;Aspects: %@ is now aspect aware.&amp;quot;, NSStringFromClass(klass));
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç†è§£èµ·æ¥ä¸å›°éš¾ï¼Œç”¨ä¸€ä¸ªmutableSetå­˜å‚¨ç±»åï¼Œå¦‚æœ&lt;code&gt;swizzledClasses&lt;/code&gt;ä¸åœ¨seté‡Œé¢çš„è¯ï¼Œæ‰§è¡Œ&lt;code&gt;aspect_swizzleForwardInvocation&lt;/code&gt;ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯æ›¿æ¢&lt;code&gt;forwardInvocation&lt;/code&gt;è¿™æ–¹æ³•ï¼Œç›®çš„æ˜¯æ›¿æ¢æ‰&lt;code&gt;forwardInvocation&lt;/code&gt;æ–¹æ³•è½¬å‘ï¼Œé‡‡ç”¨è‡ªå®šä»¥çš„&lt;code&gt;__aspects_forwardInvocation&lt;/code&gt;&lt;br&gt;æ ¸å¿ƒå°±æ˜¯ä¸‹é¢ä¸¤å¥ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;IMP originalImplementation = class_replaceMethod(klass, @selector(forwardInvocation:), (IMP)__ASPECTS_ARE_BEING_CALLED__, &amp;quot;v@:@&amp;quot;);
    if (originalImplementation) {
        class_addMethod(klass, NSSelectorFromString(AspectsForwardInvocationSelectorName), originalImplementation, &amp;quot;v@:@&amp;quot;);
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;__ASPECTS_ARE_BEING_CALLED__&lt;/code&gt;æ˜¯æœ€å…³é”®çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯å†³å®šæˆ‘ä»¬è¦æ›¿æ¢çš„æ–¹æ³•å¦‚ä½•æ‰§è¡Œçš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;static void __ASPECTS_ARE_BEING_CALLED__(__unsafe_unretained NSObject *self, SEL selector, NSInvocation *invocation) {
    NSCParameterAssert(self);
    NSCParameterAssert(invocation);
    SEL originalSelector = invocation.selector;
    SEL aliasSelector = aspect_aliasForSelector(invocation.selector);
    invocation.selector = aliasSelector;
    AspectsContainer *objectContainer = objc_getAssociatedObject(self, aliasSelector);
    AspectsContainer *classContainer = aspect_getContainerForClass(object_getClass(self), aliasSelector);
    AspectInfo *info = [[AspectInfo alloc] initWithInstance:self invocation:invocation];
    NSArray *aspectsToRemove = nil;

    // Before hooks.
    aspect_invoke(classContainer.beforeAspects, info);
    aspect_invoke(objectContainer.beforeAspects, info);

    // Instead hooks.
    BOOL respondsToAlias = YES;
    if (objectContainer.insteadAspects.count || classContainer.insteadAspects.count) {
        aspect_invoke(classContainer.insteadAspects, info);
        aspect_invoke(objectContainer.insteadAspects, info);
    }else {
        Class klass = object_getClass(invocation.target);
        do {
            if ((respondsToAlias = [klass instancesRespondToSelector:aliasSelector])) {
                [invocation invoke];
                break;
            }
        }while (!respondsToAlias &amp;amp;&amp;amp; (klass = class_getSuperclass(klass)));
    }

    // After hooks.
    aspect_invoke(classContainer.afterAspects, info);
    aspect_invoke(objectContainer.afterAspects, info);

    // If no hooks are installed, call original implementation (usually to throw an exception)
    if (!respondsToAlias) {
        invocation.selector = originalSelector;
        SEL originalForwardInvocationSEL = NSSelectorFromString(AspectsForwardInvocationSelectorName);
        if ([self respondsToSelector:originalForwardInvocationSEL]) {
            ((void( *)(id, SEL, NSInvocation *))objc_msgSend)(self, originalForwardInvocationSEL, invocation);
        }else {
            [self doesNotRecognizeSelector:invocation.selector];
        }
    }

    // Remove any hooks that are queued for deregistration.
    [aspectsToRemove makeObjectsPerformSelector:@selector(remove)];
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæ–¹æ³•é‡Œï¼Œå®é™…ä¸Šæ›¿æ¢çš„å°±æ˜¯&lt;code&gt;forwardInvocation:&lt;/code&gt;è¿™ä¸ªruntimeæ–¹æ³•ï¼Œè‡ªé€ äº†ä¸€ä¸ªè°ƒç”¨æ–¹æ³•ã€‚&lt;br&gt;ç›®çš„å°±æ˜¯ä»åŸæœ‰æ–¹æ³•å’Œhookæ–¹æ³•å»åšå¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;è¿‡ç¨‹å°±æ˜¯å…ˆç”¨ä¸´æ—¶å˜é‡è·å–&lt;code&gt;invocation&lt;/code&gt;çš„seletorï¼Œå°†&lt;code&gt;invocation&lt;/code&gt;çš„selecoræ›¿æ¢æˆaliasSelectorã€‚é€šè¿‡ä¼ å…¥çš„å‚æ•°æ„é€ &lt;code&gt;AspectInfo&lt;/code&gt;ã€‚å–å¾—&lt;code&gt;objectContainer&lt;/code&gt;å’Œ&lt;code&gt;classContainer&lt;/code&gt;ï¼ˆéƒ½æ˜¯&lt;code&gt;AspectsContainer&lt;/code&gt;ï¼‰ç±»å‹çš„ã€‚è°ƒç”¨&lt;code&gt;aspect_invoke&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;aspect_invoke&lt;/code&gt;æ˜¯ä¸€ä¸ªå®æ–¹æ³•ï¼ˆå…¶å®è¿™é‡Œä¹Ÿä¸ç”¨å†™æˆå®ï¼‰ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#define aspect_invoke(aspects, info) \
for (AspectIdentifier *aspect in aspects) {\
    [aspect invokeWithInfo:info];\
    if (aspect.options &amp;amp; AspectOptionAutomaticRemoval) { \
        aspectsToRemove = [aspectsToRemove?:@[] arrayByAddingObject:aspect]; \
    } \
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è°ƒç”¨äº†&lt;code&gt;invokeWithInfo&lt;/code&gt;åˆ¤æ–­aspectçš„optionï¼Œå¦‚æœéœ€è¦ä¸€å‡ºï¼Œå°±è®²ä»–ä»å¯¹åº”çš„containerä¸­ç§»é™¤ã€‚&lt;br&gt;&lt;code&gt;invokeWithInfo&lt;/code&gt;çš„æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- (BOOL)invokeWithInfo:(id&amp;lt;AspectInfo&amp;gt;)info {
    NSInvocation *blockInvocation = [NSInvocation invocationWithMethodSignature:self.blockSignature];
    NSInvocation *originalInvocation = info.originalInvocation;
    NSUInteger numberOfArguments = self.blockSignature.numberOfArguments;

    // Be extra paranoid. We already check that on hook registration.
    if (numberOfArguments &amp;gt; originalInvocation.methodSignature.numberOfArguments) {
        AspectLogError(@&amp;quot;Block has too many arguments. Not calling %@&amp;quot;, info);
        return NO;
    }

    // The `self` of the block will be the AspectInfo. Optional.
    if (numberOfArguments &amp;gt; 1) {
        [blockInvocation setArgument:&amp;amp;info atIndex:1];
    }

    void *argBuf = NULL;
    for (NSUInteger idx = 2; idx &amp;lt; numberOfArguments; idx++) {
        const char *type = [originalInvocation.methodSignature getArgumentTypeAtIndex:idx];
        NSUInteger argSize;
        NSGetSizeAndAlignment(type, &amp;amp;argSize, NULL);

        if (!(argBuf = reallocf(argBuf, argSize))) {
            AspectLogError(@&amp;quot;Failed to allocate memory for block invocation.&amp;quot;);
            return NO;
        }

        [originalInvocation getArgument:argBuf atIndex:idx];
        [blockInvocation setArgument:argBuf atIndex:idx];
    }

    [blockInvocation invokeWithTarget:self.block];

    if (argBuf != NULL) {
        free(argBuf);
    }
    return YES;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªéƒ¨åˆ†å°±æ˜¯ä»åŸæœ‰æ–¹æ³•ä¸­å–å‡ºå‚æ•°åˆ—è¡¨èµ‹ç»™blockï¼Œåœ¨è¿™è¿‡ç¨‹æ€»æ£€æŸ¥æ˜¯å¦blockä¸ç¬¦åˆåŸæ¥æ–¹æ³•ã€‚å°†&lt;code&gt;self.block&lt;/code&gt;è®¾ä¸º&lt;code&gt;blockInvocation&lt;/code&gt;çš„targetã€‚&lt;/p&gt;
&lt;p&gt;å›åˆ°&lt;code&gt;aspect_hookClass&lt;/code&gt;ï¼Œåœ¨ä¸Šé¢ç‰¹æ®Šæƒ…å†µå¤„ç†ä¹‹åï¼Œå°±æ˜¯ä¸€èˆ¬æƒ…å†µï¼Œè¿™æ—¶å€™åˆ›å»ºåŠ¨æ€å­ç±»ï¼Œç±»åä»¥&lt;code&gt;AspectsSubclassSuffix&lt;/code&gt;ä¸ºæŒ‡å®šåç¼€ã€‚&lt;code&gt;aspect_hookedGetClass&lt;/code&gt;ä¸­æ›¿æ¢æ‰&lt;code&gt;Class&lt;/code&gt;æ–¹æ³•ï¼Œä½¿å…¶è¿”å›çš„æ˜¯&lt;code&gt;statedClass(è¢«hookçš„ç±»)&lt;/code&gt;ï¼Œè¿™é‡Œå°†åŠ¨æ€ç”Ÿæˆçš„å­ç±»çš„&lt;code&gt;Class&lt;/code&gt;å’Œ&lt;code&gt;Meta Class&lt;/code&gt;éƒ½æ›¿æ¢æˆ&lt;code&gt;statedClass&lt;/code&gt;ï¼Œæœ€åå°†&lt;code&gt;subclass&lt;/code&gt;æ³¨å†Œè¿›å»ï¼Œæœ€åå°†&lt;code&gt;subclass&lt;/code&gt;è®¾ç½®æˆ&lt;code&gt;self&lt;/code&gt;çš„ç±»ã€‚è¿™æ ·å°±å®Œæˆäº†hookçš„è¿‡ç¨‹ï¼Œ&lt;code&gt;self&lt;/code&gt;æ‰§è¡Œçš„æ–¹æ³•å’Œä¿¡æ¯éƒ½è¢«æˆ‘ä»¬hookåˆ°äº†ã€‚&lt;/p&gt;
&lt;p&gt;å›åˆ°&lt;code&gt;aspect_prepareClassAndHookSelector&lt;/code&gt;ï¼ˆæ„Ÿè§‰ä»å¾ˆæ·±çš„å­æ ‘å›æ¥çœŸçš„å¾ˆä¸å®¹æ˜“ï¼‰ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è·å¾—äº†æˆ‘ä»¬è¦hookçš„&lt;code&gt;Method&lt;/code&gt;å’Œ&lt;code&gt;IMP&lt;/code&gt;,æˆ‘ä»¬è¦åˆ¤æ–­æ˜¯å¦æœ‰å¯¹åº”çš„IMP&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;static BOOL aspect_isMsgForwardIMP(IMP impl) {
    return impl == _objc_msgForward
#if !defined(__arm64__)
    || impl == (IMP)_objc_msgForward_stret
#endif
    ;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;_objc_msgForward_stret&lt;/code&gt;å’Œ&lt;code&gt;_objc_msgForward&lt;/code&gt;çš„åŒºåˆ«åœ¨&lt;a href=&quot;http://sealiesoftware.com/blog/archive/2008/10/30/objc_explain_objc_msgSend_stret.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;é‡Œé¢æœ‰è®²è§£ï¼Œç®€å•çš„å¼•ç”¨JSPatchä½œè€…çš„è§£é‡Š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¤§å¤šæ•°CPUåœ¨æ‰§è¡ŒCå‡½æ•°æ—¶ä¼šæŠŠå‰å‡ ä¸ªå‚æ•°æ”¾è¿›å¯„å­˜å™¨é‡Œï¼Œå¯¹ obj_msgSend æ¥è¯´å‰ä¸¤ä¸ªå‚æ•°å›ºå®šæ˜¯ self / _cmdï¼Œå®ƒä»¬ä¼šæ”¾åœ¨å¯„å­˜å™¨ä¸Šï¼Œåœ¨æœ€åæ‰§è¡Œå®Œåè¿”å›å€¼ä¹Ÿä¼šä¿å­˜åœ¨å¯„å­˜å™¨ä¸Šï¼Œå–è¿™ä¸ªå¯„å­˜å™¨çš„å€¼å°±æ˜¯è¿”å›å€¼ã€‚æ™®é€šçš„è¿”å›å€¼(int/pointer)å¾ˆå°ï¼Œæ”¾åœ¨å¯„å­˜å™¨ä¸Šæ²¡é—®é¢˜ï¼Œä½†æœ‰äº› struct æ˜¯å¾ˆå¤§çš„ï¼Œå¯„å­˜å™¨æ”¾ä¸ä¸‹ï¼Œæ‰€ä»¥è¦ç”¨å¦ä¸€ç§æ–¹å¼ï¼Œåœ¨ä¸€å¼€å§‹ç”³è¯·ä¸€æ®µå†…å­˜ï¼ŒæŠŠæŒ‡é’ˆä¿å­˜åœ¨å¯„å­˜å™¨ä¸Šï¼Œè¿”å›å€¼å¾€è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜å†™æ•°æ®ï¼Œæ‰€ä»¥å¯„å­˜å™¨è¦è…¾å‡ºä¸€ä¸ªä½ç½®æ”¾è¿™ä¸ªæŒ‡é’ˆï¼Œself / _cmd åœ¨å¯„å­˜å™¨çš„ä½ç½®å°±å˜äº†ã€‚objc_msgSend ä¸çŸ¥é“ self / _cmd çš„ä½ç½®å˜äº†ï¼Œæ‰€ä»¥è¦ç”¨å¦ä¸€ä¸ªæ–¹æ³• objc_msgSend_stret ä»£æ›¿ã€‚åŸç†å¤§æ¦‚å°±æ˜¯è¿™æ ·ã€‚åœ¨ NSMethodSignature çš„ debugDescription ä¸Šæ‰“å‡ºäº†æ˜¯å¦ special structï¼Œåªèƒ½é€šè¿‡è¿™å­—ç¬¦ä¸²åˆ¤æ–­ã€‚æ‰€ä»¥æœ€ç»ˆçš„å¤„ç†æ˜¯ï¼Œåœ¨é arm64 ä¸‹ï¼Œæ˜¯ special struct å°±èµ° _objc_msgForward_stretï¼Œå¦åˆ™èµ° _objc_msgForwardã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™é‡Œå¦‚æœIMP == _objc_msgForwardï¼Œè¯´æ˜æ‰¾ä¸åˆ° class / selector å¯¹åº”çš„ IMPï¼Œå¦‚æœèƒ½æ‰¾åˆ°çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ª&lt;code&gt;aliasSelector&lt;/code&gt;é€‰æ‹©å™¨ï¼Œç”¨è¿™ä¸ªé€‰æ‹©å™¨å»æ·»åŠ &lt;code&gt;targetMethod&lt;/code&gt;å¯¹åº”çš„&lt;code&gt;IMP&lt;/code&gt;ã€‚è¿™ä¸ªç›®çš„ä¹ˆï¼Œè‡ªç„¶æ˜¯ä¿å­˜ä¸‹æ¥å°†è¦è¢«æ›¿æ¢æ–¹æ³•çš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œ&lt;code&gt;class_replaceMethod&lt;/code&gt;æ›¿æ¢æ‰æˆ‘ä»¬éœ€è¦hookçš„æ–¹æ³•ï¼Œä½¿ç”¨äº†&lt;code&gt;aspect_getMsgForwardIMP&lt;/code&gt;å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;static IMP aspect_getMsgForwardIMP(NSObject *self, SEL selector) {
    IMP msgForwardIMP = _objc_msgForward;
#if !defined(__arm64__)
    // As an ugly internal runtime implementation detail in the 32bit runtime, we need to determine of the method we hook returns a struct or anything larger than id.
    // https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/LowLevelABI/000-Introduction/introduction.html
    // https://github.com/ReactiveCocoa/ReactiveCocoa/issues/783
    // http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042e/IHI0042E_aapcs.pdf (Section 5.4)
    Method method = class_getInstanceMethod(self.class, selector);
    const char *encoding = method_getTypeEncoding(method);
    BOOL methodReturnsStructValue = encoding[0] == _C_STRUCT_B;
    if (methodReturnsStructValue) {
        @try {
            NSUInteger valueSize = 0;
            NSGetSizeAndAlignment(encoding, &amp;amp;valueSize, NULL);

            if (valueSize == 1 || valueSize == 2 || valueSize == 4 || valueSize == 8) {
                methodReturnsStructValue = NO;
            }
        } @catch (__unused NSException *e) {}
    }
    if (methodReturnsStructValue) {
        msgForwardIMP = (IMP)_objc_msgForward_stret;
    }
#endif
    return msgForwardIMP;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œå¯¹arm64åšäº†ç‰¹æ®Šå¤„ç†ï¼ŒåŸå› å°±æ˜¯ä¸Šæ–‡æåˆ°å®ç°é—®é¢˜ï¼Œå¯¹è¿”å›çš„structåšç‰¹æ®Šçš„å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;è‡³æ­¤ï¼Œæ•´ä¸ªhookçš„è¿‡ç¨‹å°±ç»“æŸäº†ï¼Œæˆ‘ä»¬å·²ç»å°†éœ€è¦hookçš„æ–¹æ³•æ›¿æ¢æˆäº†æˆ‘ä»¬éœ€è¦çš„å®ç°ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å›é¡¾&quot;&gt;&lt;a href=&quot;#å›é¡¾&quot; class=&quot;headerlink&quot; title=&quot;å›é¡¾&quot;&gt;&lt;/a&gt;å›é¡¾&lt;/h3&gt;&lt;p&gt;å†™å®Œåæ‰å‘ç°æ•´ä¸ªæ€è·¯è™½ç„¶å¾ˆæ¸…æ™°ï¼Œä½†æ˜¯è·¨è¶Šå¾ˆå¤§ï¼Œå¦‚æœå»å¤„ç†è¿™ä¸ªhookçš„ç±»å’Œæ–¹æ³•éœ€è¦åšè®¸å¤šåˆ¤æ–­ï¼Œç„¶åå°†åŸæœ‰çš„ç±»å’Œæ–¹æ³•çš„ä¿¡æ¯ä¿å­˜ä¸‹æ¥ï¼Œä»¥ä¾¿äºæ¢å¤ï¼Œæœ€åé€šè¿‡&lt;code&gt;class_replaceMethod&lt;/code&gt;çš„æ–¹æ³•æ›¿æ¢æ‰äº†&lt;code&gt;forwardInvocation:&lt;/code&gt;ã€‚è¿™æ ·é€šè¿‡å®ç°äº†æœ€åæ¶ˆæ¯è½¬å‘è¿‡ç¨‹ä¸­hookï¼Œæ‰§è¡Œæˆ‘ä»¬æ³¨å…¥çš„æ–¹æ³•äº†ã€‚&lt;/p&gt;
&lt;p&gt;è‡³äºæ¢å¤è¢«hookçš„æ–¹æ³•ï¼Œæ€è·¯ä¹Ÿå¾ˆç®€å•äº†ï¼Œä»cacheä¸­è·å–origin methodï¼Œæ›¿æ¢æ‰hookæ–¹æ³•å°±è¡Œäº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;&lt;a href=&quot;#æ€»ç»“&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“&quot;&gt;&lt;/a&gt;æ€»ç»“&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Aspect&lt;/code&gt;çš„å®ç°æ˜¯åŸºäºå¯¹runtimeå¼ºå¤§çš„ç†è§£ï¼Œé€šè¿‡hook&lt;code&gt;forwardInvocation&lt;/code&gt;æ–¹æ³•ï¼Œåšåˆ°äº†å¯¹æ¶ˆæ¯è½¬å‘çš„æ”¹å˜ï¼Œä»»ä½•å¯¹è±¡ä¸èƒ½å¤„ç†çš„æ–¹æ³•æœ€åéƒ½ä¼šåˆ°&lt;code&gt;forwardInvovation&lt;/code&gt;ä¸­ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬èƒ½æ‰§è¡Œhookçš„æ–¹æ³•å’Œé€‰æ‹©æ‰§è¡Œçš„æ—¶é—´ï¼Œä¹Ÿè¾¾åˆ°äº†&lt;code&gt;AOP&lt;/code&gt;çš„æ€æƒ³ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Method Swizzle&lt;/code&gt;ä¹Ÿå¥½ï¼Œ&lt;code&gt;Aspect&lt;/code&gt;ä¹Ÿå¥½ï¼Œéƒ½æ˜¯ä¾èµ–å¯¹runtimeçš„è®¤è¯†ç†è§£ï¼Œå°¤å…¶æ˜¯&lt;code&gt;Aspect&lt;/code&gt;ï¼Œåœ¨å­¦ä¹ ä»£ç çš„è¿‡ç¨‹ä¹Ÿå¢é•¿äº†è‡ªå·±å¯¹è¯­è¨€çš„è®¤çŸ¥å’Œç†è§£ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤ï¼Œé¡¹ç›®ä¸­ä¹Ÿç”¨ä¸Šäº†&lt;code&gt;JSPatch&lt;/code&gt;ï¼Œè¯•æƒ³å¦‚æœç»“åˆ&lt;code&gt;Aspect&lt;/code&gt;ï¼Œé€šè¿‡runtimeå¼ºå¤§çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å‡ ä¹èƒ½åšåˆ°ä»»ä½•æ—¶é—´(ååçš„äº‹æƒ…ä¸è¦æƒ³å“¦)ã€‚æœªæ¥å¦‚æœæœ‰å¾ˆå¥½çš„ç”¨ä¾‹ï¼Œä¹Ÿä¼šåˆ†äº«å‡ºæ¥ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Method-Swizzle&quot;&gt;&lt;a href=&quot;#Method-Swizzle&quot; class=&quot;headerlink&quot; title=&quot;Method Swizzle&quot;&gt;&lt;/a&gt;Method Swizzle&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Method Swizzle&lt;/
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ç”¨GCDæ¥å®ç°ä¸ªTimer</title>
    <link href="http://csbzhixing.github.io/2016/08/15/%E7%94%A8GCD%E6%9D%A5%E5%AE%9E%E7%8E%B0%E4%B8%AATimer/"/>
    <id>http://csbzhixing.github.io/2016/08/15/ç”¨GCDæ¥å®ç°ä¸ªTimer/</id>
    <published>2016-08-14T16:04:39.000Z</published>
    <updated>2016-08-14T16:07:37.000Z</updated>
    
    <content type="html">&lt;p&gt;##å°‘ç”¨NSTimer&lt;/p&gt;
&lt;p&gt;åœ¨iOSä¸­å¼€å‘ä¸­ï¼Œå®šæ—¶å™¨æ˜¯ç»å¸¸ç”¨åˆ°çš„å·¥å…·ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šå»ä½¿ç”¨&lt;code&gt;NSTimer&lt;/code&gt;è¿™ä¸ªç±»ã€‚ç„¶è€Œï¼Œè¿™ä¸ªç±»ä¸€æ—¦ä½¿ç”¨ä¸å½“çš„è¯ï¼Œä¼šç»™æˆ‘ä»¬é€ æˆå¾ˆå¤šæ— æ³•é¢„è§çš„å‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;NSTimer&lt;/code&gt;æœ‰å“ªäº›å‘ï¼Œä¸€ä¸ªä¸ªæ¥æ•°ä¸€æ•°&lt;/p&gt;
&lt;h3 id=&quot;Timerå¿…é¡»ä½œç”¨åœ¨ä¸€ä¸ªè¿è¡Œä¸­çš„runloop&quot;&gt;&lt;a href=&quot;#Timerå¿…é¡»ä½œç”¨åœ¨ä¸€ä¸ªè¿è¡Œä¸­çš„runloop&quot; class=&quot;headerlink&quot; title=&quot;Timerå¿…é¡»ä½œç”¨åœ¨ä¸€ä¸ªè¿è¡Œä¸­çš„runloop&quot;&gt;&lt;/a&gt;Timerå¿…é¡»ä½œç”¨åœ¨ä¸€ä¸ªè¿è¡Œä¸­çš„&lt;code&gt;runloop&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;ç”¨è¿‡&lt;code&gt;NSTimer&lt;/code&gt;çš„éƒ½çŸ¥é“ï¼Œåœ¨åˆ›å»ºäº†&lt;code&gt;NSTimer&lt;/code&gt;ä¹‹åï¼Œå¿…é¡»å°†NSTimeråŠ å…¥åˆ°runloopä¸­ã€‚å¦‚æœæ˜¯åœ¨ä¸»çº¿ç¨‹çš„è¿˜å¥½ï¼Œå› ä¸ºä¸»çº¿ç¨‹é»˜è®¤æ˜¯æœ‰runLoopçš„ï¼ˆå®é™…ä¸Šä¸€èˆ¬å¾ˆå°‘ä¼šåœ¨ä¸»çº¿ç¨‹å¼€timerï¼‰ã€‚å¦‚æœæ˜¯åœ¨å­çº¿ç¨‹ï¼Œé‚£ä¹ˆå°±è¦æ‰‹åŠ¨æ¿€æ´»runLoopå…ˆï¼Œä¸ç„¶å°±è°ƒç”¨æ—¶æ— æ•ˆçš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ“ä½œå¿…é¡»åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­&quot;&gt;&lt;a href=&quot;#æ“ä½œå¿…é¡»åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­&quot; class=&quot;headerlink&quot; title=&quot;æ“ä½œå¿…é¡»åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­&quot;&gt;&lt;/a&gt;æ“ä½œå¿…é¡»åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­&lt;/h3&gt;&lt;p&gt;NSTimerçš„åˆ›å»ºä¸æ’¤é”€å¿…é¡»åœ¨åŒä¸€ä¸ªçº¿ç¨‹æ“ä½œã€performSelectorçš„åˆ›å»ºä¸æ’¤é”€å¿…é¡»åœ¨åŒä¸€ä¸ªçº¿ç¨‹æ“ä½œ&lt;/p&gt;
&lt;h3 id=&quot;å†…å­˜æ³„æ¼&quot;&gt;&lt;a href=&quot;#å†…å­˜æ³„æ¼&quot; class=&quot;headerlink&quot; title=&quot;å†…å­˜æ³„æ¼&quot;&gt;&lt;/a&gt;å†…å­˜æ³„æ¼&lt;/h3&gt;&lt;p&gt;ä¸€èˆ¬ç”¨NSTimeræœ€å®¹æ˜“å‡ºç°çš„é—®é¢˜ã€‚é¦–å…ˆæ¥åˆ†æä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªæƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;é€šå¸¸ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª&lt;code&gt;NSTimer&lt;/code&gt;çš„æ–¹æ³•æ˜¯è°ƒç”¨ä»¥ä¸‹çš„APIï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;+ (NSTimer *)timerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(nullable id)userInfo repeats:(BOOL)yesOrNo;
+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(nullable id)userInfo repeats:(BOOL)yesOrNo;

- (instancetype)initWithFireDate:(NSDate *)date interval:(NSTimeInterval)ti target:(id)t selector:(SEL)s userInfo:(nullable id)ui repeats:(BOOL)rep NS_DESIGNATED_INITIALIZER;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæ—¶å€™ï¼Œtargetä¼šè¢«timeræŒæœ‰ï¼Œå¼•ç”¨è®¡æ•°+1ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œå¦‚æœç›´æ¥é”€æ¯targetï¼Œå³ä½¿åœ¨targetçš„deallcoé‡Œé¢è°ƒç”¨äº†[timer invaild]ä¹Ÿæ— ç”¨ã€‚å› ä¸ºtimerå’Œtargetç›¸å…³ï¼Œå› æ­¤å¿…é¡»æå‰è°ƒç”¨[timer invaild]ã€‚è¿™ç§BUGæœ€å¸¸è§çš„çš„å°±æ˜¯ä¸€ä¸ª&lt;code&gt;UIViewController&lt;/code&gt;popçš„æ—¶å€™ï¼Œtimeræ²¡æœ‰è¢«invaildï¼Œç»“æœ&lt;code&gt;UIViewController&lt;/code&gt;æ²¡æœ‰è¢«é”€æ¯ï¼Œå¯¼è‡´äº†å†…å­˜æ³„æ¼ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This method is the only way to remove a timer from an NSRunLoop object. The NSRunLoop object removes its strong reference to the timer, either just before the invalidate method returns or at some later point.&lt;/p&gt;
&lt;p&gt;If it was configured with target and user info objects, the receiver removes its strong references to those objects as well.&lt;br&gt;You must send this message from the thread on which the timer was installed. If you send this message from another thread, the input source associated with the timer may not be removed from its run loop, which could prevent the thread from exiting properly.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ³¨æ„åˆ°å®˜æ–¹æ–‡æ¡£ä¸­æåˆ°ï¼ŒrunLoopä¼šæŒæœ‰NSTimerçš„å¼•ç”¨ï¼Œå› æ­¤é™¤äº†è°ƒç”¨&lt;code&gt;invaild&lt;/code&gt;æ–¹æ³•å¤–ï¼Œæ²¡æœ‰åˆ«çš„æ–¹æ³•.&lt;/p&gt;
&lt;p&gt;##ç”¨GCDä»£æ›¿NSTimer&lt;/p&gt;
&lt;p&gt;ç”¨è¿‡GCDçš„éƒ½è¯´å¥½ï¼Œå¯ä»¥è¯´æŠŠGCDç©çš„å¾ˆæºœçš„è¯ï¼Œå¾ˆå¤šå¼‚æ­¥å¹¶è¡Œé—®é¢˜éƒ½èƒ½è§£å†³ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°±è¦å»è§£å†³NSTimerçš„å‘çš„é—®é¢˜ã€‚è¿™é‡Œç”¨ä¸‰ä¸ªå¼€æºåº“æ¥æŠ›ç –å¼•ç‰ï¼Œè®²è®²ä¸åŒçš„å®ç°ç”±ä»€ä¹ˆä¼˜ç¼ºç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;###RNTimer&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªåº“å¾ˆè€äº†ï¼Œ12å¹´åå°±æ²¡æœ‰æ›´æ–°äº†ï¼Œå†…å®¹ä¹Ÿå¾ˆç®€å•ï¼Œåªæœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œå› ä¸ºä»£ç å¾ˆå°‘ï¼Œç›´æ¥ä¸Šæºç äº†&lt;/p&gt;
&lt;h4 id=&quot;æºç æ‘˜è¦&quot;&gt;&lt;a href=&quot;#æºç æ‘˜è¦&quot; class=&quot;headerlink&quot; title=&quot;æºç æ‘˜è¦&quot;&gt;&lt;/a&gt;æºç æ‘˜è¦&lt;/h4&gt;&lt;pre&gt;&lt;code class=&quot;Objective-C&quot;&gt;
@interface RNTimer : NSObject

/**---------------------------------------------------------------------------------------
 @name Creating a Timer
 -----------------------------------------------------------------------------------------
*/

/** Creates and returns a new repeating RNTimer object and starts running it

 After `seconds` seconds have elapsed, the timer fires, executing the block.
 You will generally need to use a weakSelf pointer to avoid a retain loop.
 The timer is attached to the main GCD queue.

 @param seconds The number of seconds between firings of the timer. Must be greater than 0.
 @param block Block to execute. Must be non-nil

 @return A new RNTimer object, configured according to the specified parameters.
*/
+ (RNTimer *)repeatingTimerWithTimeInterval:(NSTimeInterval)seconds block:(dispatch_block_t)block;


/**---------------------------------------------------------------------------------------
 @name Firing a Timer
 -----------------------------------------------------------------------------------------
*/

/** Causes the block to be executed.

 This does not modify the timer. It will still fire on schedule.
*/
- (void)fire;


/**---------------------------------------------------------------------------------------
 @name Stopping a Timer
 -----------------------------------------------------------------------------------------
*/

/** Stops the receiver from ever firing again

 Once invalidated, a timer cannot be reused.

*/


@interface RNTimer ()
@property (nonatomic, readwrite, copy) dispatch_block_t block;
@property (nonatomic, readwrite, assign) dispatch_source_t source;
@end

@implementation RNTimer
@synthesize block = _block;
@synthesize source = _source;

+ (RNTimer *)repeatingTimerWithTimeInterval:(NSTimeInterval)seconds
                                                                            block:(void (^)(void))block {
    NSParameterAssert(seconds);
    NSParameterAssert(block);

    RNTimer *timer = [[self alloc] init];
    timer.block = block;
    timer.source = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,
                                                                                0, 0,
                                                                                dispatch_get_main_queue());
    uint64_t nsec = (uint64_t)(seconds * NSEC_PER_SEC);
    dispatch_source_set_timer(timer.source,
                                                        dispatch_time(DISPATCH_TIME_NOW, nsec),
                                                        nsec, 0);
    dispatch_source_set_event_handler(timer.source, block);
    dispatch_resume(timer.source);
    return timer;
}

- (void)invalidate {
    if (self.source) {
        dispatch_source_cancel(self.source);
        dispatch_release(self.source);
        self.source = nil;
    }
    self.block = nil;
}

- (void)dealloc {
    [self invalidate];
}

- (void)fire {
    self.block();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;å®ç°åˆ†æ&quot;&gt;&lt;a href=&quot;#å®ç°åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;å®ç°åˆ†æ&quot;&gt;&lt;/a&gt;å®ç°åˆ†æ&lt;/h4&gt;&lt;p&gt;å®ç°å¾ˆç®€å•ï¼Œç”¨çš„æ˜¯æœ€åŸºæœ¬çš„æ–¹æ³•ï¼Œå³åˆ›å»ºäº†ä¸€ä¸ª&lt;code&gt;dispatch_source_t&lt;/code&gt;ï¼Œä¼ å…¥&lt;code&gt;block&lt;/code&gt;ï¼Œç„¶åé€šè¿‡&lt;code&gt;dispatch_source_set_timer&lt;/code&gt;å°†timeræ·»åŠ åˆ°&lt;code&gt;dispatch_source&lt;/code&gt;ï¼Œè®¾ç½®äº‹ä»¶å¤„ç†ä¸ºä¼ å…¥çš„block,ç„¶åæ‰§è¡Œtimerã€‚&lt;/p&gt;
&lt;p&gt;æä¾›ä¸¤ä¸ªå’Œ&lt;code&gt;NSTimer&lt;/code&gt;ä¸€æ ·çš„æ–¹æ³•ï¼Œ&lt;code&gt;invalidate&lt;/code&gt;å’Œ&lt;code&gt;fire&lt;/code&gt;ã€‚&lt;code&gt;fire&lt;/code&gt;ä¼šç«‹å³æ‰§è¡Œblockï¼Œä½†æ˜¯ä¸ä¼šä½¿timerå¤±æ•ˆï¼Œä¾ç„¶ä¼šæŒ‰ç…§é¢„å®šè®¡åˆ’æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨APIå®šä¹‰ä¸Šï¼Œä¿æŒäº†å’Œ&lt;code&gt;NSTimer&lt;/code&gt;ä¸€æ ·çš„å®šä¹‰ï¼Œæ‰€ä»¥åˆ‡æ¢èµ·æ¥æ²¡æœ‰å‹åŠ›ã€‚ä½†æ˜¯ç®€å•ä¹Ÿä»¥ä¸ºè¿™åŠŸèƒ½ä¸å®Œå–„ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ— æ³•æš‚åœæŒ‚èµ·timer&lt;/li&gt;
&lt;li&gt;æ— æ³•æŒ‡å®šçº¿ç¨‹&lt;/li&gt;
&lt;li&gt;æ— æ³•æ·»åŠ æ–°çš„ä»»åŠ¡åˆ°timerä¸­&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;MSWeakTimer&quot;&gt;&lt;a href=&quot;#MSWeakTimer&quot; class=&quot;headerlink&quot; title=&quot;MSWeakTimer&quot;&gt;&lt;/a&gt;MSWeakTimer&lt;/h3&gt;&lt;p&gt;&lt;code&gt;MSWeakTimer&lt;/code&gt;çš„APIè®¾è®¡æˆå’Œ&lt;code&gt;NSTimer&lt;/code&gt;ä¸€æ ·ï¼Œè°ƒç”¨çš„æ–¹æ³•ä¹Ÿä¸€è‡´ï¼Œç›´æ¥ä½¿ç”¨å¹¶æ²¡æœ‰ä»€ä¹ˆå‰¯ä½œç”¨ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Objective-C&quot;&gt;
- (id)initWithTimeInterval:(NSTimeInterval)timeInterval
                                        target:(id)target
                                    selector:(SEL)selector
                                    userInfo:(id)userInfo
                                     repeats:(BOOL)repeats
                         dispatchQueue:(dispatch_queue_t)dispatchQueue;

                         /**
 * Creates an `MSWeakTimer` object and schedules it to start ticking inmediately.
 */
+ (instancetype)scheduledTimerWithTimeInterval:(NSTimeInterval)timeInterval
                                                                                target:(id)target
                                                                            selector:(SEL)selector
                                                                            userInfo:(id)userInfo
                                                                             repeats:(BOOL)repeats
                                                                 dispatchQueue:(dispatch_queue_t)dispatchQueue;

                                                                 /**
 * Starts the timer if it hadn&amp;#39;t been schedule yet.
 * @warning calling this method on an already scheduled timer results in undefined behavior.
 */
- (void)schedule;

/**
 * Sets the amount of time after the scheduled fire date that the timer may fire to the given interval.
 * @discussion Setting a tolerance for a timer allows it to fire later than the scheduled fire date, improving the ability of the system to optimize for increased power savings and responsiveness. The timer may fire at any time between its scheduled fire date and the scheduled fire date plus the tolerance. The timer will not fire before the scheduled fire date. For repeating timers, the next fire date is calculated from the original fire date regardless of tolerance applied at individual fire times, to avoid drift. The default value is zero, which means no additional tolerance is applied. The system reserves the right to apply a small amount of tolerance to certain timers regardless of the value of this property.
 As the user of the timer, you will have the best idea of what an appropriate tolerance for a timer may be. A general rule of thumb, though, is to set the tolerance to at least 10% of the interval, for a repeating timer. Even a small amount of tolerance will have a significant positive impact on the power usage of your application. The system may put a maximum value of the tolerance.
 */
@property (atomic, assign) NSTimeInterval tolerance;

/**
 * Causes the timer to be fired synchronously manually on the queue from which you call this method.
 * You can use this method to fire a repeating timer without interrupting its regular firing schedule.
 * If the timer is non-repeating, it is automatically invalidated after firing, even if its scheduled fire date has not arrived.
 */
- (void)fire;

/**
 * You can call this method on repeatable timers in order to stop it from running and trying
 * to call the delegate method.
 * @note `MSWeakTimer` won&amp;#39;t invoke the `selector` on `target` again after calling this method.
 * You can call this method from any queue, it doesn&amp;#39;t have to be the queue from where you scheduled it.
 * Since it doesn&amp;#39;t retain the delegate, unlike a regular `NSTimer`, your `dealloc` method will actually be called
 * and it&amp;#39;s easier to place the `invalidate` call there, instead of figuring out a safe place to do it.
 */
- (void)invalidate;

- (id)userInfo;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;å®ç°&quot;&gt;&lt;a href=&quot;#å®ç°&quot; class=&quot;headerlink&quot; title=&quot;å®ç°&quot;&gt;&lt;/a&gt;å®ç°&lt;/h4&gt;&lt;p&gt;å…ˆæ¥çœ‹åˆå§‹åŒ–æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- (id)initWithTimeInterval:(NSTimeInterval)timeInterval
                                        target:(id)target
                                    selector:(SEL)selector
                                    userInfo:(id)userInfo
                                     repeats:(BOOL)repeats
                         dispatchQueue:(dispatch_queue_t)dispatchQueue
{
        NSParameterAssert(target);
        NSParameterAssert(selector);
        NSParameterAssert(dispatchQueue);

        if ((self = [super init]))
        {
                self.timeInterval = timeInterval;
                self.target = target;
                self.selector = selector;
                self.userInfo = userInfo;
                self.repeats = repeats;

                NSString *privateQueueName = [NSString stringWithFormat:@&amp;quot;com.mindsnacks.msweaktimer.%p&amp;quot;, self];
                self.privateSerialQueue = dispatch_queue_create([privateQueueName cStringUsingEncoding:NSASCIIStringEncoding], DISPATCH_QUEUE_SERIAL);
                dispatch_set_target_queue(self.privateSerialQueue, dispatchQueue);

                self.timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,
                                                                                        0,
                                                                                        0,
                                                                                        self.privateSerialQueue);
        }

        return self;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å°†ä¼ å…¥çš„å‚æ•°å¤åˆ¶ç»™å½“å‰ç±»çš„å±æ€§ï¼Œç„¶ååˆå§‹åŒ–&lt;code&gt;privateSerialQueue&lt;/code&gt;ï¼Œ&lt;code&gt;privateSerialQueue&lt;/code&gt;çš„åç§°æ˜¯&lt;code&gt;privateQueueName&lt;/code&gt;ï¼Œå¯å˜å‚æ•°ä¸ºå½“å‰å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚è°ƒç”¨&lt;code&gt;dispatch_set_target_queue&lt;/code&gt;å°†ä¼ å‚çš„&lt;code&gt;dispatchQueue&lt;/code&gt;ä¼˜å…ˆçº§èµ‹ç»™&lt;code&gt;privateSerialQueue&lt;/code&gt;ã€‚æœ€åï¼Œåˆå§‹åŒ–&lt;code&gt;timer&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åçœ‹æ‰§è¡Œå‡½æ•°&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- (void)schedule
{
        [self resetTimerProperties];

        __weak MSWeakTimer *weakSelf = self;

        dispatch_source_set_event_handler(self.timer, ^{
                [weakSelf timerFired];
        });

        dispatch_resume(self.timer);
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é¦–å…ˆè°ƒç”¨äº†&lt;code&gt;resetTimerProperties&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- (void)resetTimerProperties
{
        int64_t intervalInNanoseconds = (int64_t)(self.timeInterval * NSEC_PER_SEC);
        int64_t toleranceInNanoseconds = (int64_t)(self.tolerance * NSEC_PER_SEC);

        dispatch_source_set_timer(self.timer,
                                                            dispatch_time(DISPATCH_TIME_NOW, intervalInNanoseconds),
                                                            (uint64_t)intervalInNanoseconds,
                                                            toleranceInNanoseconds
                                                            );
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;resetTimerProperties&lt;/code&gt;é‡ç½®&lt;code&gt;timer&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;intervalInNanoseconds&lt;/code&gt;å’Œ&lt;code&gt;toleranceInNanoseconds&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å……å½“&lt;code&gt;interval&lt;/code&gt;å’Œ&lt;code&gt;leeway&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ‰§è¡Œå®Œ&lt;code&gt;resetTimerProperties&lt;/code&gt;åï¼Œ&lt;code&gt;dispatch_source_set_event_handler&lt;/code&gt;ä¸€ä¸ªblockåˆ°&lt;code&gt;timer&lt;/code&gt;ï¼Œæ‰§è¡Œ&lt;code&gt;timerFired&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- (void)timerFired
{
        // Checking attomatically if the timer has already been invalidated.
        if (OSAtomicAnd32OrigBarrier(1, &amp;amp;_timerFlags.timerIsInvalidated))
        {
                return;
        }

        // We&amp;#39;re not worried about this warning because the selector we&amp;#39;re calling doesn&amp;#39;t return a +1 object.
        #pragma clang diagnostic push
        #pragma clang diagnostic ignored &amp;quot;-Warc-performSelector-leaks&amp;quot;
                [self.target performSelector:self.selector withObject:self];
        #pragma clang diagnostic pop

        if (!self.repeats)
        {
                [self invalidate];
        }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œ&lt;code&gt;OSAtomicAnd32OrigBarrier&lt;/code&gt;æ˜¯ä¸ªå€¼å¾—å…³æ³¨çš„å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;OSAtomicAnd32OrigBarrier&lt;/code&gt;æ˜¯ä¸€ä¸ªåŸå­æ“ä½œçš„å¸ƒå°”ä¸è¿ç®—ï¼Œä¸”å¸¦æœ‰å†…å­˜å±éšœã€‚&lt;code&gt;OSAtomicAnd32OrigBarrier&lt;/code&gt;ä¿è¯äº†åœ¨ä¸æ“ä½œä¹‹å‰æ•°æ®ç»“æ„çš„å­˜å‚¨ç»“æ„å‘ç”Ÿæ”¹å˜ã€‚&lt;/p&gt;
&lt;p&gt;è¯¦ç»†çš„åªæ˜¯å¯ä»¥å‚è€ƒä¸‹é¢è¿™ç¯‡æ–‡ç« &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;&quot;&gt;http://southpeak.github.io/blog/2014/10/17/osatomicyuan-zi-cao-zuo/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è¿™é‡Œï¼Œ&lt;code&gt;_timerFlags.timerIsInvalidated&lt;/code&gt;ä¸1åšä¸æ“ä½œï¼Œå¦‚æœè¿”å›return åˆ™è¿”å›ï¼Œå¦‚æœä¸æ˜¯ï¼Œæ‰§è¡Œ.&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå¦‚æœä¸åŠ å…¥&lt;code&gt;invalidate&lt;/code&gt;çš„è¯ï¼Œææ€•è¯´ä¸æ¸…æ¥šä¸ºä»€ä¹ˆè¿™é‡Œè¦åšè¿™ä¸ªåˆ¤æ–­&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- (void)invalidate
{
        // We check with an atomic operation if it has already been invalidated. Ideally we would synchronize this on the private queue,
        // but since we can&amp;#39;t know the context from which this method will be called, dispatch_sync might cause a deadlock.
        if (!OSAtomicTestAndSetBarrier(7, &amp;amp;_timerFlags.timerIsInvalidated))
        {
                dispatch_source_t timer = self.timer;
                dispatch_async(self.privateSerialQueue, ^{
                        dispatch_source_cancel(timer);
                        ms_release_gcd_object(timer);
                });
        }
}
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;    if (!OSAtomicTestAndSetBarrier(7, &amp;amp;_timerFlags.timerIsInvalidated))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;OSAtomicTestAndSetBarrier&lt;/code&gt;å’Œ&lt;code&gt;OSAtomicAnd32OrigBarrier&lt;/code&gt;æ­£å¥½å¯ä»¥ä½œä¸ºä¸€ä¸ªç›¸å¯¹æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;OSAtomicTestAndSetBarrier(7, &amp;amp;_timerFlags.timerIsInvalidated)&lt;/code&gt;ä¼šæŒ‡å®šå˜é‡ä¸­çš„ä¸€ä¸ªbitï¼ŒæŠŠå®ƒè®¾ç½®ä¸ºâ€˜1â€™å¹¶è¿”å›æ—§å€¼ã€‚å¦‚æœè¦æŒ‡å®š32bit integeræœ€ä½ä½ï¼Œnåº”è¯¥æ˜¯7ã€‚å› æ­¤å¦‚æœç¬¬ä¸€æ¬¡è°ƒç”¨&lt;code&gt;OSAtomicTestAndSetBarrier&lt;/code&gt;çš„è¯ï¼Œè¿”å›falseåŒæ—¶è¯å°†&lt;code&gt;timerIsInvalidated&lt;/code&gt;ç½®æˆ1.ç”±äºåŸå­æ“ä½œå’Œå†…å­˜å±éšœï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šå’Œ&lt;code&gt;OSAtomicAnd32OrigBarrier&lt;/code&gt;ä¸€åŒæ‰§è¡Œã€‚å¦‚æœæ‰§è¡Œåˆ°&lt;code&gt;timerFired&lt;/code&gt;çš„æ—¶å€™ï¼Œ&lt;code&gt;OSAtomicAnd32OrigBarrier(1, &amp;amp;_timerFlags.timerIsInvalidated)&lt;/code&gt;è¿”å›trueï¼Œå°±ä¼šè¿”å›äº†ã€‚é€šè¿‡è¿™ä¸ªæ–¹æ³•ä¿è¯äº†åœ¨è°ƒç”¨&lt;code&gt;invalidate&lt;/code&gt;åå°†timerå¤±æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;timerFired&lt;/code&gt;å¦‚æœèƒ½æ‰§è¡Œï¼Œåˆ™é€šè¿‡&lt;code&gt;performSelector&lt;/code&gt;æ¥è°ƒç”¨å¯¹ç”¨çš„&lt;code&gt;SEL&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åœ¨&lt;code&gt;invalidate&lt;/code&gt;ä¸­ï¼Œå¦‚æœéœ€è¦é‡Šæ”¾ï¼Œéœ€è¦è°ƒç”¨&lt;code&gt;dispatch_async&lt;/code&gt;ã€‚åŸå› æ˜¯æˆ‘ä»¬è™½ç„¶é€šè¿‡åŸå­æ“ä½œä¿è¯äº†&lt;code&gt;invalidated&lt;/code&gt;ï¼Œä½†æ˜¯æˆ‘ä»¬æ— æ³•ç¡®å®šå½“å‰çš„ä¸Šä¸‹æ–‡æƒ…å†µï¼Œä½¿ç”¨&lt;code&gt;dispatch_async&lt;/code&gt;å¯èƒ½ä¼šé€ æˆæ­»é”ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»æµç¨‹åˆ†æå°±æ˜¯å¦‚æ­¤ï¼Œ&lt;code&gt;MSWeakTimer&lt;/code&gt;æœ€å€¼å¾—å…³æ³¨çš„å°±æ˜¯ä¸Šé¢è®²è§£å†³çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;MSWeakTimer&lt;/code&gt;è§£å†³äº†å‰é¢æåˆ°çš„é—®é¢˜ä¸­æ— æ³•æ·»åŠ æŒ‡å®šçº¿ç¨‹ï¼ˆå®é™…ä¸Šä¹Ÿä¸æ˜¯æ·»åŠ åˆ°é‚£ä¸ªçº¿ç¨‹ï¼Œè€Œæ˜¯æ–°å¼€äº†ä¸€ä¸ªçº¿ç¨‹ï¼‰ã€‚ç”±äºæ¨¡ä»¿çš„æ˜¯&lt;code&gt;NSTimer&lt;/code&gt;çš„APIï¼Œæ‰€ä»¥å¦å¤–ä¸¤ä¸ªæ–¹æ³•ä¹Ÿæ²¡æœ‰è§£å†³ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æˆ‘çš„å®ç°-â€“-ZXGCDTimer&quot;&gt;&lt;a href=&quot;#æˆ‘çš„å®ç°-â€“-ZXGCDTimer&quot; class=&quot;headerlink&quot; title=&quot;æˆ‘çš„å®ç° â€“ ZXGCDTimer&quot;&gt;&lt;/a&gt;æˆ‘çš„å®ç° â€“ ZXGCDTimer&lt;/h2&gt;&lt;p&gt;åœ¨å‚è€ƒäº†ä¸Šé¢çš„ä¸¤ä¸ªå¼€æºåº“åï¼Œè‡ªå·±åŠ¨æ‰‹æ’¸äº†ä¸€ä¸ªç®€å•çš„åŸºäºGCDçš„Timerã€‚åŸºæœ¬è§£å†³äº†ä¸Šé¢æåˆ°äº†ä¸‰ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä»£ç åœ°å€ï¼š&lt;a href=&quot;&quot;&gt;https://github.com/csbzhixing/ZXGCDTimer&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ€è·¯æ˜¯ï¼Œé€šè¿‡&lt;code&gt;ZXGCDTimerManager&lt;/code&gt;æä¾›å¯¹å¤–æ“ä½œåŒ…æ‹¬åˆ›å»ºï¼Œæ‰§è¡Œï¼Œå–æ¶ˆï¼ŒæŒ‚èµ·ï¼Œå›å¤åŠŸèƒ½ã€‚æ¯ä¸ªtimeré€šè¿‡&lt;code&gt;ZXGCDTimer&lt;/code&gt;ä¸ºå•ä½å»ç®¡ç†ï¼Œä»¥&lt;code&gt;timerName&lt;/code&gt;å»åŒºåˆ†ä¸åŒçš„timerã€‚æ”¯æŒè‡ªå®šä¹‰çº¿ç¨‹ï¼Œæ”¯æŒæ–°å¢Actionã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºæ˜¯è‡ªå·±å¤„äºç ”ç©¶ç›®çš„å†™çš„ï¼Œå¯èƒ½å­˜åœ¨å„ç§é—®é¢˜ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶æå‡ºæ‰¹è¯„å’ŒæŒ‡æ­£ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;##å°‘ç”¨NSTimer&lt;/p&gt;
&lt;p&gt;åœ¨iOSä¸­å¼€å‘ä¸­ï¼Œå®šæ—¶å™¨æ˜¯ç»å¸¸ç”¨åˆ°çš„å·¥å…·ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šå»ä½¿ç”¨&lt;code&gt;NSTimer&lt;/code&gt;è¿™ä¸ªç±»ã€‚ç„¶è€Œï¼Œè¿™ä¸ªç±»ä¸€æ—¦ä½¿ç”¨ä¸å½“çš„è¯ï¼Œä¼šç»™æˆ‘ä»¬é€ æˆå¾ˆå¤šæ— æ³•é¢„è§çš„å‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;NSTimer&lt;/code&gt;æœ‰å“ª
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ä¸€å¹´</title>
    <link href="http://csbzhixing.github.io/2016/04/07/post/"/>
    <id>http://csbzhixing.github.io/2016/04/07/post/</id>
    <published>2016-04-06T16:03:44.000Z</published>
    <updated>2016-04-06T16:04:24.000Z</updated>
    
    <content type="html">&lt;pre&gt;&lt;code&gt;è½¬çœ¼é—´ï¼Œæˆ‘å·²ç»å®ä¹ ä¸€å¹´äº†ã€‚
è½¬çœ¼é—´ï¼Œè¦å¤§å­¦æ¯•ä¸šäº†ã€‚

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœä¸çœ‹æ—¥å†ï¼Œä¸å»æƒ³æ—¶é—´ï¼Œä¼¼ä¹å’Œä¸€å¹´å‰çš„è¿™ä¸ªæ—¶å€™ä¹Ÿæ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚ä¸€æ ·çš„æ‹…å¿ƒï¼Œä¸€æ ·çš„ç„¦è™‘ã€‚&lt;br&gt;ä¸€å¹´å‰ï¼Œå› ä¸ºè‡ªå·±é™·å…¥äº†å­¦ä¹ çš„ç›²åŒºï¼Œä¸çŸ¥é“å¦‚ä½•å»æå‡è‡ªå·±ï¼Œåªå¥½æƒ³åŠæ³•æ‰¾ä¸ªå®ä¹ ï¼Œæƒ³è¯´è‡ªå·±æ‰¾æ‰¾è‡ªå·±çš„å­¦ä¹ çš„æ–¹å‘ã€‚è¿™ä¹ˆä¸€åšï¼Œå°±æ˜¯ä¸€å¹´è¿‡å»äº†ã€‚&lt;/p&gt;
&lt;p&gt;å®ä¹ çš„ä¸€å¹´ï¼Œå¯ä»¥è¯´å¾ˆè¾›è‹¦ï¼Œä¹Ÿå¾ˆå……å®ã€‚è¾›è‹¦æ˜¯å› ä¸ºä¸ä»…ä»…è¦å®Œæˆè‡ªå·±å­¦ä¹ ä¸Šçš„ä¸œè¥¿ï¼Œè¿˜è¦å»å®Œæˆå·¥ä½œä¸Šçš„äº‹æƒ…ï¼Œè¿™ç‚¹å¯¹æˆ‘æ¥è¯´çš„ç¡®æ˜¯ä¸å°çš„æŒ‘æˆ˜ã€‚å¤§å­¦çš„å‰ä¸¤å¹´é‡Œé¢ï¼Œæ¯å¤©ç™½å¤©ä¸Šä¸Šè¯¾ï¼Œæ™šä¸Šæä¸‹ä½œä¸šï¼Œç„¶åå°±å¯ä»¥å¿«ä¹çš„ç©è€äº†ã€‚ç„¶è€Œåˆ°äº†å®ä¹ ï¼Œç™½å¤©çš„å·¥ä½œå°±è¶³ä»¥è®©è‡ªå·±å¿ƒåŠ›äº¤ç˜ï¼Œæ™šä¸Šå›åˆ°å­¦æ ¡åè¿˜æœ‰è®¸å¤šè¯¾ä¸šè¦è¡¥ä¹ ã€‚å³ä½¿å¦‚æ­¤ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰åæ‚”ã€‚å¦‚æœä¸æ˜¯å®ä¹ ï¼Œæˆ‘ç°åœ¨å¯èƒ½è¿˜åœ¨ç›²ç›®ä¸çŸ¥é“æ€ä¹ˆå»æ‰¾å·¥ä½œï¼›å¦‚æœä¸æ˜¯å®ä¹ ï¼Œè‡ªå·±å¯èƒ½ç°åœ¨è¿˜åœ¨çº ç»“è‡ªå·±æœªæ¥åœ¨å“ªä¸ªæ–¹å‘å‰è¿›ï¼›å¦‚æœä¸æ˜¯å®ä¹ ï¼Œå¯èƒ½ç°åœ¨è¿˜æœ‰æ”¹ä¸æ‰çš„ä¸€å †å­¦ç”Ÿæ°”ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;æ—¶é—´ä¸ä¼šè®©äººæˆé•¿ï¼Œåªæœ‰ç—›è‹¦å¯ä»¥


&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿˜è®°å¾—åˆšå¼€å§‹å®ä¹ çš„æ—¶å€™ç‰¹åˆ«ç—›è‹¦ã€‚ç”¨å­¦æ ¡é‚£å¥—å­¦ä¹ æ–¹æ³•è¿›å…¥å·¥ä½œè‚¯å®šæ˜¯è¡Œä¸é€šçš„ã€‚æ‰€ä»¥å¼€å§‹çš„ä¸€ä¸ªæœˆï¼Œåœ¨iOSä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆé•¿è¿›ã€‚ç¡¬ç”Ÿç”Ÿçš„å•ƒäº†å‡ æœ¬ä¹¦ä¹Ÿç„¶å¹¶åµã€‚åˆ°äº†ç¬¬äºŒä¸ªæœˆï¼Œæ¥è§¦äº†é¡¹ç›®ï¼Œæœ‰äº†ç›®æ ‡ï¼Œä¸€ç‚¹ç‚¹çš„å»å®ç°ä¸€ä¸ªä¸ªç›®æ ‡ï¼Œç»“åˆåŸç†ï¼Œæ‰çœŸæ­£æœ‰äº†ä¸€ç‚¹ç‚¹çªç ´ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;çŸ¥è¯†æ°¸è¿œå­¦ä¸å®Œï¼Œé’±æ°¸è¿œèµšä¸å®Œï¼Œæ‰¾åˆ°è‡ªå·±çš„è·¯å°±è¡Œ


&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åæœˆä»½æ¢äº†ä¸ªå®ä¹ ï¼Œå›åˆ°äº†æ·±åœ³ã€‚ä¸€ä¸ªåŸå› æ˜¯åŸæ¥çš„å…¬å¸äººå‘˜å˜åŠ¨ï¼Œè‡ªå·±ä¹Ÿè§‰å¾—å¹³å°å¤ªå°å·²ç»æ²¡æ³•æ¥è§¦æ›´å¤šçš„ä¸œè¥¿äº†ï¼Œé™¤æ­¤å¤–å›åˆ°æ·±åœ³ä¹Ÿå¯ä»¥è§£æ”¾è‡ªå·±æ›´å¤šæ—¶é—´æ¥å­¦ä¹ ã€‚äºæ˜¯ä¹å¾ˆå¹¸è¿çš„æ¥åˆ°äº†ç°åœ¨çš„å…¬å¸ã€‚åœ¨è¿™é‡Œï¼Œä»å¤´å¼€å‘äº†å¤šä¸ªAPPï¼Œæ¥è§¦äº†React Nativeã€‚ä»ä¸€ä¸ªè¾…åŠ©æ…¢æ…¢æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„å¼€å‘ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¾ˆå¤šåŒå­¦å·²ç»ç¡®å®šä¸‹æ¥äº†Offer.çœ‹ç€åŒå­¦ä¸€ä¸ªä¸ªæ¯”è¾ƒè‡ªå·±çš„offerçš„æ—¶å€™ï¼Œè‡ªå·±çš„å¿ƒæ€ä¹Ÿæœ‰ç‚¹å°å°çš„æ³¢åŠ¨ã€‚ä½†æ˜¯ï¼Œæœ€åï¼Œè¿˜æ˜¯å†³å®šæ‰ä¸‹æ¥ã€‚ç°æœ‰çš„å¹³å°å¯¹äºè‡ªå·±æ¥è¯´æ˜¯è¶³å¤Ÿçš„ã€‚ä¸€æ–¹é¢èº«è¾¹æœ‰è¶³å¤Ÿå‰å®³çš„äººèƒ½å¤Ÿææºè‡ªå·±ï¼Œä¸€æ–¹é¢åœ¨é¡¹ç›®å’Œæ—¶é—´ä¸Šèƒ½å¤Ÿè®©è‡ªå·±å»æ·±å…¥å­¦ä¹ å’Œæé«˜ã€‚æ¯”è¾ƒ1K,2kè¿™ç‚¹å·®è·ï¼ŒæŠ€æœ¯ç§¯ç´¯å’Œåšäººçš„å­¦ä¹ ææ€•æ‰æ˜¯æœ€é‡è¦çš„ã€‚    &lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ä¸€å¹´å


&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è™½ç„¶å‰ä¸ä¹…æ‰å†™å®Œæ–°å¹´æ€»ç»“ï¼Œä¹‹åä¹Ÿå¥½ä¹…æ²¡æœ‰æ›´æ–°ä»€ä¹ˆæŠ€æœ¯æ–‡ç« ï¼Œè¿™ä¸ªæ€»ç»“ä¹Ÿç®—å¦å¼€ä¸€ä¸ªå¤´ã€‚å·²ç»ä»æ¯•è®¾ä¸­è§£æ”¾çš„æˆ‘æœ‰æ›´å¤šæ—¶é—´å»æ·±å…¥iOSå’Œjsäº†ã€‚å¸Œæœ›åœ¨ä¸€å¹´åçš„ä»Šå¤©ï¼Œèƒ½å¤Ÿåœ¨ä¸¤ä¸ªæŠ€æœ¯æ ˆä¸Šéƒ½æœ‰ä¸å°çš„æˆå°±ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;pre&gt;&lt;code&gt;è½¬çœ¼é—´ï¼Œæˆ‘å·²ç»å®ä¹ ä¸€å¹´äº†ã€‚
è½¬çœ¼é—´ï¼Œè¦å¤§å­¦æ¯•ä¸šäº†ã€‚

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœä¸çœ‹æ—¥å†ï¼Œä¸å»æƒ³æ—¶é—´ï¼Œä¼¼ä¹å’Œä¸€å¹´å‰çš„è¿™ä¸ªæ—¶å€™ä¹Ÿæ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚ä¸€æ ·çš„æ‹…å¿ƒï¼Œä¸€æ ·çš„ç„¦è™‘ã€‚&lt;br&gt;ä¸€å¹´å‰ï¼Œå› ä¸ºè‡ªå·±é™·å…¥äº†å­¦ä¹ çš„ç›²åŒºï¼Œä¸çŸ¥é“å¦‚ä½•å»æå‡è‡ªå·±ï¼Œåªå¥½æƒ³åŠæ³•æ‰¾ä¸ªå®ä¹ ï¼Œ
    
    </summary>
    
    
      <category term="å¿ƒå¾—" scheme="http://csbzhixing.github.io/tags/%E5%BF%83%E5%BE%97/"/>
    
  </entry>
  
  <entry>
    <title>2016</title>
    <link href="http://csbzhixing.github.io/2016/01/02/2016/"/>
    <id>http://csbzhixing.github.io/2016/01/02/2016/</id>
    <published>2016-01-01T16:51:17.000Z</published>
    <updated>2016-01-01T16:51:28.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Hello-2016-Goodbye-2015&quot;&gt;&lt;a href=&quot;#Hello-2016-Goodbye-2015&quot; class=&quot;headerlink&quot; title=&quot;Hello 2016, Goodbye 2015&quot;&gt;&lt;/a&gt;Hello 2016, Goodbye 2015&lt;/h1&gt;&lt;p&gt;è½¬çœ¼å°±ä¸€å¹´è¿‡å»äº†ã€‚æ„Ÿè§‰2015è¿‡çš„é£å¿«ã€‚è¿‡å¹´çš„æ—¶å€™å»é˜³æ±Ÿå¥½åƒå°±å†å‰ä¸ä¹…ï¼Œå¦‚ä»Šå·²ç»æ˜¯2016å¹´ã€‚æƒ³èµ·æ¥ä»Šå¤©è¿‡å¾—ç‰¹åˆ«å¿«ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºè‡ªå·±å·²ç»å¼€å§‹å·¥ä½œäº†å§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸‰æœˆä»½ï¼Œä¹Ÿå°±æ˜¯å¤§ä¸‰ä¸‹å­¦æœŸçš„æ—¶å€™ï¼Œå‘ç°è‡ªå·±å­¦ä¹ è¿›å…¥äº†ä¸€ä¸ªç“¶é¢ˆã€‚å¯¹å¾…å¾ˆå¤šæŠ€æœ¯éƒ½æ„Ÿåˆ°å¾ˆå¥½å¥‡ï¼Œä¹Ÿæ„Ÿè§‰è‡ªå·±æœ‰æƒ³æ³•åœ¨è¿™ä¸ªè¡Œä¸šåšä¸‹å»ï¼Œä½†æ˜¯å´æ‰¾ä¸åˆ°ä¸€ä¸ªæ–¹å‘å»æ·±å…¥åœ°å­¦ä¹ ã€‚äºæ˜¯ä¹ï¼Œåœ¨å¦¹å­çš„é¼“åŠ±ä¸‹ï¼Œå†³å®šæ‰¾å…¬å¸å»å®ä¹ ï¼Œé€šè¿‡å¯¹å®é™…å•†ä¸šç”Ÿäº§çš„äº†è§£ï¼Œè°ƒæ•´è‡ªå·±çš„æŠ€æœ¯å­¦ä¹ æ–¹å‘ã€‚ç„¶è€Œå°±è¿™ä¹ˆè¯¯æ‰“è¯¯æ’åœ°è¿›å…¥äº†iOSå¼€å‘ã€‚åœ¨å¹¿å·ä¸šé€Ÿçš„å…­ä¸ªæœˆé‡Œé¢ï¼Œæˆ‘ä»ä¸€ä¸ªåªæ˜¯å¬é—»iOSå¼€å‘å’Œè§‰å¾—macbookæœ€ç‰›é€¼çš„ä¸€ä¸ªä¹¡ä¸‹äººï¼ˆå¥½å§æˆ‘æ‰¿è®¤è¿™ä¸ªæ˜¯è‡ªå˜²ï¼‰åˆ°ä¸€ä¸ªåŸºæœ¬ç†Ÿæ‚‰iOSçš„åˆçº§å¼€å‘ã€‚åœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œå¾—ç›Šäºlikidçš„æŒ‡å¯¼å’Œå¸®åŠ©ï¼Œæ”¶è·äº†è®¸å¤šå­¦ä¹ ä¸Šçš„å¿ƒå¾—ã€‚åœ¨ä¹‹å‰è‡ªå·±çš„å­¦ä¹ éƒ½æ˜¯æµ…å°å³æ­¢ï¼Œå¹¶æ²¡æœ‰æ·±å…¥åˆ°æŠ€æœ¯çš„æœ¬è´¨ï¼Œæ‰€ä»¥å¯¼è‡´äº†è‡ªå·±å¥½åƒå¾ˆå¤šä¸œè¥¿éƒ½çŸ¥é“ï¼Œä½†æ˜¯è¯´èµ·æ¥å´åˆå¥½åƒä»€ä¹ˆéƒ½ä¸å¤ªæ‡‚çš„æ ·å­ã€‚åœ¨å­¦ä¹ iOSå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œä¹ŸçŸ«æ­£äº†è‡ªå·±å¾ˆå¤šä¸è‰¯çš„ä¹ æƒ¯ã€‚å…¶ä¸­æ˜¯æ‡‚äº†baiduéƒ½æ˜¯å‘µå‘µå‘µï¼Œè¦æŸ¥èµ„æ–™è¿˜æ˜¯è°·æ­Œå¤§æ³•å¥½ï¼ˆå¥½å§å…¶å®æˆ‘å­¦æ ¡ä¸èƒ½ç¿»å¢™ï¼Œæ€ä¹ˆå»ä¸€ä¸ªä¸å­˜åœ¨çš„ç½‘ç«™æœä¸œè¥¿ï¼‰ã€‚ç„¶åæ˜¯githubå’Œstackoverflowä¸¤ä¸ªç¤¾åŒºäº†è§£ä¹Ÿç®—çŸ¥é“äº†çœŸæ­£å­¦æŠ€æœ¯åº”è¯¥å»å•¥åœ°æ–¹å­¦ä¹ T T,åŸæ¥æˆ‘ä¹‹å‰ä¸‰å¹´åŸºæœ¬éƒ½ç™½è¿‡äº†ï¼Œè¿˜å¥½çŸ¥é“çš„ä¸æ™šã€‚&lt;/p&gt;
&lt;p&gt;åœ¨åæœˆçš„æ—¶å€™ï¼Œåœ¨é¹…å‚æ— æœ›åï¼ˆä¸»è¦æ˜¯è‡ªå·±å¤ªæ°´ï¼‰ï¼Œå†³å®šå›åˆ°æ·±åœ³ï¼Œæ¥åˆ°äº†ç°åœ¨çš„è¿™å®¶å…¬å¸ã€‚æ–°å…¬å¸ç»™æˆ‘æœ€å¤§çš„æ„Ÿå—å°±æ˜¯èº«è¾¹çš„å¤§ç¥ç‰¹åˆ«å¤šã€‚å…¶ä¸­æœ€è®©æˆ‘æ”¶ç›Šä¸€ä¸ªæ˜¯chargeå¯¹æˆ‘åœ¨iOSå¼€å‘ä¸Šçš„æŒ‡å¯¼ï¼Œä¸€ä¸ªæ˜¯æ˜¥å“¥å¯¹æˆ‘æŠ€æœ¯æ€è€ƒä¸Šçš„æŒ‡å¯¼ã€‚åœ¨æ–°å…¬å¸é‡Œé¢ï¼Œæˆ‘ä¸å†æŠŠè‡ªå·±ä»…ä»…å½“åšä¸€ä¸ªå®Œæˆä»»åŠ¡å°±å¥½çš„å®ä¹ ç”Ÿï¼Œè€Œæ˜¯æ›´å¤šåœ°å»ä½œä¸ºä¸€ä¸ªå›¢é˜Ÿçš„ä¸€ä»½å­ã€‚åœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œè§£å†³äº†ä¹‹å‰å¾ˆå¤šä»æ¥éƒ½æ²¡æ€è€ƒä¹Ÿæ²¡æœ‰é‡åˆ°è¿‡çš„é—®é¢˜ï¼Œæ…¢æ…¢åœ°èƒ½å¤Ÿæ›´åŠ ç‹¬ç«‹åœ°è§£å†³é—®é¢˜ã€‚è™½ç„¶åœ¨æ–°å…¬å¸ï¼ŒåŠ ç­çš„æ¬¡æ•°æ¯”èµ·åœ¨å¹¿å·å¤šäº†ä¸å°‘ï¼Œç„¶è€Œå¹¶æ²¡æœ‰è®©æˆ‘è§‰å¾—ä¸Šç­å¾ˆæ— èŠï¼Œä¼¼ä¹çœ‹æ¥æˆ‘è¿˜æ˜¯é€‚åˆå¹²è¿™è¡Œçš„ï¼Œå“ˆå“ˆã€‚åœ¨12æœˆï¼Œæ–°é¡¹ç›®å†³å®šä¸ŠReact Nativeï¼Œè¿™åˆç»™æˆ‘äº†ä¸€ä¸ªéå¸¸å¥½çš„å­¦ä¹ æœºä¼šã€‚åœ¨ä¸€å‘¨çš„æ—¶é—´å­¦ä¹ äº†ES6å’ŒReact Nativeçš„è¯­æ³•ï¼Œå†™äº†å‡ ä¸ªç®€é™‹çš„ç»„ä»¶ï¼Œä¹Ÿç®—ç¢°åˆ°äº†é—¨æ§›ã€‚è¯´ä¸å®š2016å¹´ä¹Ÿä¼šæ¥è§¦ä¸‹å®‰å“å’Œå‰ç«¯å¼€å‘ã€‚ä½œä¸ºä¸€ä¸ªæŠ€æœ¯äººï¼Œåƒä¸‡ä¸èƒ½æŠŠè‡ªå·±é™æ­»åœ¨ä¸€ä¸ªå›ºå®šçš„å¹³å°ä¸Šã€‚æŒæ¡äº†åŸºæœ¬çš„åŸåˆ™å’Œæ€æƒ³ï¼Œå°±åº”è¯¥èƒ½åœ¨æ‰€æœ‰çš„å¹³å°ä¸Šéƒ½æœ‰æ‰€ä½œä¸ºã€‚å­¦ä¹ èƒ½åŠ›å’Œæ‰§è¡ŒåŠ›æ°¸è¿œæ˜¯æŠ€æœ¯äººçš„æ ¸å¿ƒç«äº‰åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;å¾—ç›Šäºä»Šå¹´è‡ªå·±çš„å®ä¹ æœ‰äº†ä¸€äº›å°å°çš„å¤–å¿«å’Œå¤§ç‰›å¸‚ä¸€æ³¢è¡Œæƒ…ã€‚ä»Šå¹´ä¹°äº†ç‰¹åˆ«å¤šå¾—ä¸œè¥¿ã€‚ä»ä¸€å †è€³æœºï¼Œå‡ éƒ¨æ‰‹æœºï¼Œmacbookå’Œæ–°å°å¼ï¼ŒéŸ³å“ã€‚è™½ç„¶ä¹°äº†å¾ˆå¤šä¸œè¥¿ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šæ²¡æœ‰é çˆ¶æ¯å‡ºä»€ä¹ˆé’±ã€‚åœ¨æ¶ˆè´¹è§‚å¿µä¸Šï¼Œä¸€å¹´é‡Œé¢ä¹Ÿæ˜¯æ³¢åŠ¨äº†å¾ˆå¤šï¼Œä»èˆä¸å¾—èŠ±é’±ï¼Œåˆ°ä¹±èŠ±é’±ï¼Œåˆ°æœ‰ç›®çš„çš„èŠ±é’±ã€‚æ–°ä¸€å¹´é‡Œé¢ï¼Œå¦‚æœèƒ½é¡ºåˆ©æ‹¿åˆ°offerï¼Œä¹Ÿè¦ä¸ºæœªæ¥è€ƒè™‘ä¸‹äº†ã€‚è™½ç„¶æ¯”èµ·åˆ«äººä¸ç”¨åœ¨å¤–é¢ç§Ÿæˆ¿çœä¸‹äº†ä¸å°‘çš„å¼€æ”¯ï¼Œä½†ä¸æ„å‘³ç€è‡ªå·±èƒ½å¤Ÿä¹±èŠ±é’±ã€‚å¸Œæœ›èƒ½å¤Ÿåœ¨10å¹´å†…å°½æ—©çš„å®Œå…¨ç‹¬ç«‹ã€‚&lt;/p&gt;
&lt;p&gt;2015å¹´ï¼Œæœ€å¤§çš„æ”¶è·å°±æ˜¯æƒ³æ˜ç™½äº†ï¼Œè¯»ä¹¦å’Œé”»ç‚¼è¿™ä¸¤æ ·æ˜¯ç»å¯¹åœ°æ”¶ç›Šç»ˆèº«çš„äº‹æƒ…ã€‚äºæ˜¯ä¹ï¼Œè´­å…¥äº†kindleï¼Œä¹°äº†è·‘é‹ï¼Œå¼€å§‹äº†è‡ªå·±çš„ç²¾ç¥å’Œè‚‰ä½“çš„é”»ç‚¼ã€‚è¿™ä¸€å¹´ï¼Œè¯»äº†æ‚ä¸ƒæ‚å…«çš„å¾ˆå¤šä¹¦ï¼Œè·‘äº†å¿«ä¸¤ç™¾å…¬é‡Œï¼Œæ„Ÿè§‰å¾ˆä¸é”™ï¼Œæƒ³åœ¨2016èƒ½å¤Ÿç»§ç»­ã€‚åªæœ‰ä¿æŒå¥åº·çš„èº«ä½“å’Œæ¸…é†’åœ°å¤§è„‘æ‰èƒ½ä¿æŒæ¯å¤©éƒ½èƒ½å¿«ä¹åœ°ç”Ÿæ´»ã€‚&lt;/p&gt;
&lt;p&gt;2016å¹´ï¼Œæ˜¯è‡ªå·±å¤§å­¦çš„æœ€åä¸€å¹´ã€‚ä¸å‡ºæ„å¤–çš„è¯åº”è¯¥æ˜¯åœ¨å®ä¹ çš„è¿‡ç¨‹ä¸­å›½ä¸çŸ¥ä¸è§‰çš„ç»“æŸè‡ªå·±çš„å¤§å­¦ç”Ÿæ¶¯ã€‚å¯¹äºå¤§å­¦ï¼Œå¯¹æˆ‘ä¸ªäººè€Œè¨€ï¼Œæ”¶è·ææ€•ä¸å¤šï¼Œå”¯æœ‰æ˜ç™½äº†è‡ªå·±æ²¡æœ‰é€‰é”™è‡ªå·±æœªæ¥ä»äº‹çš„è¡Œä¸šã€‚æƒ³æ¥ï¼Œå¤§å­¦ä¹Ÿç®—ç©è¿‡ï¼Œå¼€å¿ƒè¿‡ï¼Œä¹Ÿä¸æ‰è‡ªå·±æœ€åä»»æ€§çš„é’æ˜¥ã€‚å³å°†è¸ä¸Šç¤¾ä¼šï¼Œå†ä¹Ÿæ²¡æœ‰å€Ÿå£ç»™è‡ªå·±æ‰¾é€€è·¯ï¼Œåªèƒ½å’Œä¸€åˆ‡å›°éš¾æ–—äº‰ä¸‹å»ã€‚2016ï¼Œåº”è¯¥æ˜¯ä¼šæ˜¯ä¸ªå€¼å¾—çºªå¿µçš„å¹´ä»½ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Hello-2016-Goodbye-2015&quot;&gt;&lt;a href=&quot;#Hello-2016-Goodbye-2015&quot; class=&quot;headerlink&quot; title=&quot;Hello 2016, Goodbye 2015&quot;&gt;&lt;/a&gt;Hello 2016, Good
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>è®©Xcodeçš„æ§åˆ¶å°æ›´ç»™åŠ›ç‚¹</title>
    <link href="http://csbzhixing.github.io/2015/12/03/xcode-color/"/>
    <id>http://csbzhixing.github.io/2015/12/03/xcode-color/</id>
    <published>2015-12-03T15:23:35.000Z</published>
    <updated>2016-04-04T06:10:25.000Z</updated>
    
    <content type="html">&lt;p&gt;ç”¨è¿‡Xcodeçš„äººéƒ½çŸ¥é“ï¼ŒLogæ˜¯æœ‰å¤šéš¾å ªå¤šéš¾å ªï¼Œæ§åˆ¶å°å„ç§è›‹ç–¼å„ç§æ— è¯­ï¼Œçœ‹åˆ°APPCodeçš„æ§åˆ¶å°åæˆ‘æ—¶å¯¹xcodeå½»åº•æ— çˆ±äº†ã€‚ç»è¿‡å„ç§æŠ˜è…¾ï¼Œå†³å®šåœ¨å½“å‰çš„é¡¹ç›®è¯•éªŒä¸‹å¢å¼ºlogçš„åŠŸèƒ½ï¼Œä½¿ç”¨CocoaLumberjackå’ŒXcodeColorsæ¥ä½¿æˆ‘ä»¬çš„æ§åˆ¶å°è¾¾åˆ°èƒ½çœ‹çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆ æ‰“å¼€CocoaLumberjackçš„githubåœ°å€&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/CocoaLumberjack/CocoaLumberjack&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/CocoaLumberjack/CocoaLumberjack&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨cocospod å®‰è£…&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;platform :ios, &amp;#39;8.0&amp;#39;
pod &amp;#39;CocoaLumberjack&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è‡ªå·±å·¥ç¨‹æ–‡ä»¶ä¸‹.pchä¸‹åŠ å…¥&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#define LOG_LEVEL_DEF ddLogLevel
#import &amp;lt;CocoaLumberjack/CocoaLumberjack.h&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨APPDelegateé‡Œé¢åˆå§‹åŒ–log&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- (void)initLogger
{

    // Standard lumberjack initialization
    [DDLog addLogger:[DDTTYLogger sharedInstance]];

    // And we also enable colors
    [[DDTTYLogger sharedInstance] setColorsEnabled:YES];

    [DDTTYLogger sharedInstance].logFormatter = [[DFCustomFormatter alloc] init];

    DDFileLogger *fileLogger = [[DDFileLogger alloc] init]; // File Logger
    fileLogger.rollingFrequency = 60 * 60 * 24; // 24 hour rolling
    fileLogger.logFileManager.maximumNumberOfLogFiles = 7;
    [DDLog addLogger:fileLogger];

    [self setConsoleColor];


}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ°è¿™é‡Œå°±å®Œæˆäº†ddlogçš„åˆå§‹åŒ–ï¼Œä½†æ˜¯åˆ°è¿™é‡Œè¿˜æ²¡ç»“æŸï¼Œå› ä¸ºè¿™æ ·ä»…ä»…æ˜¯è®©æ¡†æ¶è¿è¡Œèµ·æ¥ï¼Œè¿˜æ²¡æœ‰åˆ°æˆ‘ä»¬è¦çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æƒ³è¦çš„ï¼Œåº”è¯¥æ˜¯è¾¾åˆ°ä»¥ä¸‹çš„ç›®çš„&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;èƒ½å¤Ÿæ‰“å°Logçš„å‘ç”Ÿä½ç½®ï¼Œæ–¹æ³•ï¼Œæ—¶é—´&lt;/li&gt;
&lt;li&gt;èƒ½å¤Ÿæ ¹æ®ä¸åŒLogçº§åˆ«æœ‰ä¸åŒçš„é¢œè‰²å¯¹åº”&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å®Œæˆç¬¬ä¸€ç‚¹å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦å®ç°è‡ªå·±çš„formatterå°±å¯ä»¥äº†&lt;/p&gt;
&lt;p&gt;å®ç°&lt;code&gt;DDLogFormatter&lt;/code&gt;çš„åè®®&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#import &amp;lt;Foundation/Foundation.h&amp;gt;
#import &amp;quot;DDLog.h&amp;quot;

@interface DFCustomFormatter : NSObject &amp;lt;DDLogFormatter&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;@implementation DFCustomFormatter

- (NSString *)formatLogMessage:(DDLogMessage *)logMessage {
    NSString *logLevel;
    switch (logMessage-&amp;gt;_flag) {
        case DDLogFlagError    : logLevel = @&amp;quot;E&amp;quot;; break;
        case DDLogFlagWarning  : logLevel = @&amp;quot;W&amp;quot;; break;
        case DDLogFlagInfo     : logLevel = @&amp;quot;I&amp;quot;; break;
        case DDLogFlagDebug    : logLevel = @&amp;quot;D&amp;quot;; break;
        default                : logLevel = @&amp;quot;V&amp;quot;; break;
    }

    NSString *formatStr = [NSString stringWithFormat:@&amp;quot;[%@ %@][line %lu] %@&amp;quot;,
                            logMessage.fileName, logMessage-&amp;gt;_function,
                           (unsigned long)logMessage-&amp;gt;_line, logMessage-&amp;gt;_message];
    return formatStr;

}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·æˆ‘ä»¬å°±æ‰“å°äº†éœ€è¦çš„ä¿¡æ¯ï¼Œæ›´å¤šçš„æ–¹æ³•å¯ä»¥åˆ°DDLogMessageé‡Œé¢çœ‹æä¾›äº†ä»€ä¹ˆå±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å®Œæˆç¬¬äºŒç‚¹ï¼Œå°±è¦å€ŸåŠ©XcodeColors&lt;/p&gt;
&lt;p&gt;åœ°å€ï¼š&lt;a href=&quot;https://github.com/robbiehanson/XcodeColors&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/robbiehanson/XcodeColors&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å®‰è£…åï¼Œåœ¨APPDelegateä¸­åˆå§‹åŒ–&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// æ‰“å¼€é¢œè‰²æ”¯æŒ
[[DDTTYLogger sharedInstance] setColorsEnabled:YES];
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½è®¾ç½®ä¸åŒçº§åˆ«çš„Logçš„é¢œè‰²&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- (void)setConsoleColor
{
#if TARGET_OS_IPHONE
    UIColor *pink = [UIColor colorWithRed:(255/255.0) green:(58/255.0) blue:(159/255.0) alpha:1.0];

#else
    NSColor *pink = [NSColor colorWithCalibratedRed:(255/255.0) green:(58/255.0) blue:(159/255.0) alpha:1.0];
#endif

    [[DDTTYLogger sharedInstance] setForegroundColor:pink backgroundColor:nil forFlag:DDLogFlagInfo];
    [[DDTTYLogger sharedInstance] setForegroundColor:[UIColor redColor] backgroundColor:nil forFlag:DDLogFlagError];
    [[DDTTYLogger sharedInstance] setForegroundColor:[UIColor orangeColor] backgroundColor:nil forFlag:DDLogFlagWarning];


}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ°è¿™é‡Œï¼Œè¿˜ä¸èƒ½è®©æ§åˆ¶å°æ˜¾ç¤ºå‡ºé¢œè‰²ï¼Œè¦è®¾ç½®å¯¹åº”schema&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14491562929176.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ·»åŠ åï¼Œå°±å¯ä»¥è®©xcodeçš„æ§åˆ¶æ˜¾ç¤ºæˆ‘ä»¬è¦çš„æ•ˆæœäº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè‡ªå·±çš„é¡¹ç›®æœ¬èº«æœ‰å¯¹åº”çš„logæ–¹æ³•ï¼Œå¯ä»¥ç”¨å®ç›´æ¥æ›¿æ¢&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ç”¨è¿‡Xcodeçš„äººéƒ½çŸ¥é“ï¼ŒLogæ˜¯æœ‰å¤šéš¾å ªå¤šéš¾å ªï¼Œæ§åˆ¶å°å„ç§è›‹ç–¼å„ç§æ— è¯­ï¼Œçœ‹åˆ°APPCodeçš„æ§åˆ¶å°åæˆ‘æ—¶å¯¹xcodeå½»åº•æ— çˆ±äº†ã€‚ç»è¿‡å„ç§æŠ˜è…¾ï¼Œå†³å®šåœ¨å½“å‰çš„é¡¹ç›®è¯•éªŒä¸‹å¢å¼ºlogçš„åŠŸèƒ½ï¼Œä½¿ç”¨CocoaLumberjackå’ŒXcodeColorsæ¥ä½¿æˆ‘ä»¬çš„æ§åˆ¶å°è¾¾åˆ°èƒ½çœ‹çš„æ•ˆæœã€‚
    
    </summary>
    
      <category term="Xcode" scheme="http://csbzhixing.github.io/categories/Xcode/"/>
    
    
  </entry>
  
  <entry>
    <title>ä¸€å‘¨åˆ·é¢˜æ€»ç»“ - 2</title>
    <link href="http://csbzhixing.github.io/2015/11/13/leetcode2/"/>
    <id>http://csbzhixing.github.io/2015/11/13/leetcode2/</id>
    <published>2015-11-13T14:08:35.000Z</published>
    <updated>2015-11-13T16:03:13.000Z</updated>
    
    <content type="html">&lt;p&gt;åˆåˆ°äº†ä¸€å‘¨é¢˜ç›®æ€»ç»“æ—¶é—´ã€‚åˆ°ç°åœ¨ä¸ºæ­¢æ€»å…±å®Œæˆäº†ä¸‰åé“é¢˜ï¼Œæ¯å¤©å¤§æ¦‚åš1-3é¢˜ã€‚æ„Ÿè§‰è¿™ä¸ªæ­¥éª¤è¿˜æ˜¯æ¯”è¾ƒé€‚åˆè‡ªå·±çš„è¿›åº¦çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;leetcode 9&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç»™å‡ºä¸€ä¸ªIntå€¼ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯å›æ–‡æ•°å­—ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥æƒ³åˆ°ï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²çš„å¤„ç†æ–¹å¼æ¥å¤„ç†ï¼Œä½†è¿™é‡Œæ˜¯ä¸€ä¸ªæ•°å­—ã€‚æˆ‘ä»¬å¯ä»¥ä»å›æ–‡çš„å®šä¹‰çŸ¥é“ï¼Œå¦‚æœæˆ‘ä»¬å°†æ•´ä¸ªæ•°å­—åè½¬è¿‡æ¥ï¼Œå¦‚æœä»ç„¶ç­‰äºåŸæ¥çš„æ•°å­—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å­—å°±æ˜¯å›æ–‡æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;C&quot;&gt;bool isPalindrome(int x) {
    if(x&amp;lt;0) return false;
    if(x&amp;lt;10) return true;

    int y=0,temp = x;

    while(temp)
    {
        y = y*10 + (temp%10);
        temp/=10;
    }

    return x==y;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;leetcode 26&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç§»é™¤ä¸€ä¸ªæ•°ç»„ä¸­é‡å¤çš„æ•°å­—ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®é¢˜æ„ï¼Œæˆ‘ä»¬åªéœ€è¦å°†é‡å¤çš„æ•°å­—ä¸åœåœ°ç§»åŠ¨åˆ°æ•°ç»„æœ«å°¾ï¼Œç„¶åç¼©çŸ­æ•°ç»„å¤§å°å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;C&quot;&gt;int removeDuplicates(int* nums, int numsSize) {

    if(numsSize&amp;lt;2) return numsSize;

    int cur = 0;int temp = nums[0];

    for(int i = 1;i&amp;lt;numsSize;i++)
    {
        if(nums[i] == temp) continue;
        else
        {
            nums[cur+1] = nums[i];
            cur++;
            temp = nums[i];
        }
    }    
    return cur+1;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;leetcode 136&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç»™å‡ºä¸€ä¸ªæ•°ç»„ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­å”¯ä¸€ä¸€ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„æ•°ï¼Œå…¶ä»–çš„æ•°éƒ½å‡ºç°äº†ä¸¤æ¬¡ï¼Œè¦æ±‚çº¿æ€§æ—¶é—´å†…å®Œæˆä¸”ä¸èƒ½ç”¨é¢å¤–çš„ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é“é¢˜ç»™çš„éš¾åº¦åˆ†ç±»æ˜¯ä¸­ç­‰ï¼Œä½†æ˜¯æˆ‘çœ‹äº†ä¸‹é¢˜ç›®çš„é€šè¿‡ç‡å¾ˆé«˜ï¼Œè¯´æ˜åˆå¾ˆå·§å¦™åœ°æ–¹æ³•ã€‚æˆ‘è‡ªå·±åœ¨å¼€å§‹åšå¾—æ—¶å€™æƒ³åˆ°çš„éƒ½éƒ½è¦ç”¨é¢å¤–çš„å­˜å‚¨ç©ºé—´ã€‚åœ¨çœ‹äº†åˆ«äººçš„æ–¹æ³•åæ‰çŸ¥é“åŸæ¥å¯ä»¥ç”¨å¼‚æˆ–æ–¹æ³•ï¼Œå› ä¸ºå¼‚æˆ–æ–¹æ³•ç›¸å½“äºäº¤æ¢äº†ä¸¤ä¸ªæ•°ã€‚æ‰€ä»¥æˆ‘ä»¬è¦åšå¾—å°±æ˜¯éå†ä¸€æ¬¡æ•°ç»„ï¼Œç”¨ä¸€ä¸ªæ•°ä¸æ¯ä¸ªæ•°ç»„çš„æ•°å¼‚æˆ–ï¼Œæœ€åä¿ç•™çš„æ•°å°±æ˜¯å”¯ä¸€ä¸€ä¸ªå‡ºç°äº†ä¸€æ¬¡çš„æ•°ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;C&quot;&gt;int removeDuplicates(int* nums, int numsSize) {

    if(numsSize&amp;lt;2) return numsSize;

    int cur = 0;int temp = nums[0];

    for(int i = 1;i&amp;lt;numsSize;i++)
    {
        if(nums[i] == temp) continue;
        else
        {
            nums[cur+1] = nums[i];
            cur++;
            temp = nums[i];
        }
    }

    return cur+1;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åŒæ ·åœ°,leetcodeè¿˜ç»™å‡ºäº†ä¸€é“ç›¸ä¼¼çš„é¢˜ç›®ï¼Œå°±æ˜¯&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;leetcode 260&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é“é¢˜ç›®å’Œä¸Šé¢çš„é¢˜ç›®åŸºæœ¬ä¸€æ ·ï¼Œå”¯ç‹¬ä¸åŒçš„æ˜¯ç»™å‡ºçš„æ•°ç»„ä¸­æœ‰ä¸¤ä¸ªæ•°åªå‡ºç°äº†ä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;é¢˜ç›®ä¸­æåˆ°äº†ï¼Œè¦åœ¨çº¿æ€§æ—¶é—´å†…å®Œæˆï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦è€ƒè™‘ä»ä¸Šé¢çš„é¢˜ç›®ä¸­æ€ä¹ˆæ”¹è¿›å°±å¯ä»¥å®Œæˆè¿™é“é¢˜ç›®ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;C&quot;&gt;int* singleNumber(int* nums, int numsSize, int* returnSize) {
    int i, *result = calloc(*returnSize = 2, sizeof(int));
    for(i = 0; i &amp;lt; numsSize; result[0] ^= nums[i++]);
    for(i = 0; i &amp;lt; numsSize; i++)
        if(nums[i] &amp;amp; result[0] &amp;amp; -result[0])
            result[1] ^= nums[i];
    result[0] ^= result[1];
    return result;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªæ–¹æ³•ï¼Œé¦–å…ˆæ‰¾å‡ºäº†ä¸€ä¸ªresult[0]ï¼Œè¿™ä¸ªæ˜¯ä¿å­˜äº†ä¸¤ä¸ªå‡ºç°äº†ä¸€æ¬¡çš„çš„æ•°å­—çš„å¼‚æˆ–ç»“æœa xor b;&lt;br&gt;æˆ‘ä»¬çŸ¥é“ å¦‚æœa != bçš„è¯ï¼Œé‚£ä¹ˆa xor bå°±ä¼šä¿å‡†ä»–ä»¬æ¯ä¸ªæ•°å­—çš„ä¸€éƒ¨åˆ†çš„äºŒè¿›åˆ¶ã€‚&lt;br&gt;é‚£ä¹ˆç¬¬äºŒéƒ¨æˆ‘ä»¬é€šè¿‡å¼‚æˆ–å°±å¯ä»¥åˆ·é€‰å‡ºä¸€ä¸ªç»“æœã€‚&lt;br&gt;é€šè¿‡ a xor bçš„ç»“æœå†å¼‚æˆ–ï¼Œå°±å¯ä»¥å¾—å‡ºå¦ä¸€ä¸ªç»“æœã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢ä¸¤é“é¢˜ç›®å¯ä»¥å¾—å‡ºï¼Œç®€ç®€å•å•çš„å¼‚æˆ–æœ‰æ—¶å€™å¯æ˜¯éå¸¸å¼ºå¤§çš„ã€‚&lt;/p&gt;
&lt;p&gt;##å°ç»“&lt;/p&gt;
&lt;p&gt;è™½ç„¶æ¯å‘¨åšå¾—é¢˜ç›®ä¸æ­¢è¿™ä¹ˆå¤šï¼Œä½†æ˜¯å—é™æ—¶é—´ï¼Œåªèƒ½æ…¢æ…¢æ•´ç†ï¼Œä¼˜å…ˆæ•´ç†æˆ‘è§‰å¾—å€¼å¾—æ€è€ƒçš„é¢˜ç›®ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;åˆåˆ°äº†ä¸€å‘¨é¢˜ç›®æ€»ç»“æ—¶é—´ã€‚åˆ°ç°åœ¨ä¸ºæ­¢æ€»å…±å®Œæˆäº†ä¸‰åé“é¢˜ï¼Œæ¯å¤©å¤§æ¦‚åš1-3é¢˜ã€‚æ„Ÿè§‰è¿™ä¸ªæ­¥éª¤è¿˜æ˜¯æ¯”è¾ƒé€‚åˆè‡ªå·±çš„è¿›åº¦çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;leetcode 9&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç»™å‡ºä¸€ä¸ªIntå€¼ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯å›æ–‡æ•°å­—ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥æƒ³åˆ°ï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²çš„è¯
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://csbzhixing.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
  </entry>
  
  <entry>
    <title>rac</title>
    <link href="http://csbzhixing.github.io/2015/11/10/rac/"/>
    <id>http://csbzhixing.github.io/2015/11/10/rac/</id>
    <published>2015-11-09T16:39:45.000Z</published>
    <updated>2015-11-09T16:46:26.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;RACå­¦ä¹ &quot;&gt;&lt;a href=&quot;#RACå­¦ä¹ &quot; class=&quot;headerlink&quot; title=&quot;RACå­¦ä¹ &quot;&gt;&lt;/a&gt;RACå­¦ä¹ &lt;/h1&gt;&lt;p&gt;RACï¼ŒReactiveCocoa,æ˜¯githubä¸Šä¸€ä¸ªéå¸¸æœ‰åçš„å¼€æºåº“ï¼Œå®ä¹ äº†åœ¨iOSä¸Šçš„å‡½æ•°å¼ç¼–ç¨‹ã€‚åœ¨2.xç‰ˆæœ¬ä¹‹å‰åº“æ˜¯ä½¿ç”¨Objective-C å®ç°çš„ï¼Œåœ¨3.xç‰ˆæœ¬ä¹‹åä½¿ç”¨swiftå®ç°ã€‚ç›®å‰æœ€æ–°çš„ç‰ˆæœ¬æ˜¯4.04;&lt;/p&gt;
&lt;p&gt;##RACçš„æ”¹å˜&lt;/p&gt;
&lt;p&gt;RACé€šè¿‡ä¿¡å·å°†ä¸åŒçš„éƒ¨åˆ†è”ç³»åœ¨äº†ä¸€èµ·ã€‚&lt;/p&gt;
&lt;p&gt;RACç»Ÿä¸€äº†å¯¹KVOã€UI Eventã€Network requestã€Async workçš„å¤„ç†ï¼Œå› ä¸ºå®ƒä»¬æœ¬è´¨ä¸Šéƒ½æ˜¯å€¼çš„å˜åŒ–(Values over time)ã€‚&lt;/p&gt;
&lt;p&gt;###KVO&lt;/p&gt;
&lt;p&gt;RACé€šè¿‡ç›‘æµ‹å±æ€§çš„å€¼çš„æ”¹å˜æ¥åšç›¸å…³çš„æ“ä½œã€‚ä¸è¿‡ä½¿ç”¨çš„æ˜¯blockã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Objective-C&quot;&gt;[RACAble(self.username) subscribeNext:^(NSString *newName) {
    NSLog(@&amp;quot;%@&amp;quot;, newName);
}];
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;çœ‹èµ·æ¥æ¯”KVOè¦å®¹æ˜“çš„å¤šï¼Œæˆ‘ä»¬ä¸ç”¨å…³æ³¨å»åˆ›å»ºå’Œé‡Šæ”¾KVOã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†ä¿¡å·ä¸²è”èµ·æ¥ï¼Œè¾¾æˆæ›´å¤šçš„ç›®çš„ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Objective-C&quot;&gt;// åªæœ‰å½“åå­—ä»¥&amp;#39;j&amp;#39;å¼€å¤´ï¼Œæ‰ä¼šè¢«è®°å½•
[[RACAble(self.username)
   filter:^(NSString *newName) {
       return [newName hasPrefix:@&amp;quot;j&amp;quot;];
   }]
   subscribeNext:^(NSString *newName) {
       NSLog(@&amp;quot;%@&amp;quot;, newName);
   }];
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;###UI Event&lt;/p&gt;
&lt;p&gt;æ ¹æ®UIå‘ç”Ÿçš„æ”¹å˜åšç›¸åº”çš„å¤„ç†ï¼Œå¦‚æœä¸ç”¨RACçš„è¯ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æœ‰å¾ˆå¤šæ­¥éª¤ã€‚æ¯”å¦‚æ£€æŸ¥è¾“å…¥æ¡†ä¸­çš„è¾“å…¥æ˜¯å¦åˆæ³•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ actionï¼Œå½“é”®å…¥çš„æ—¶å€™å°±è®²è¾“å…¥æ¡†çš„å€¼æ‹¿å‡ºæ¥æ£€æŸ¥ã€‚è¿™é‡Œæˆ‘ä»¬åªéœ€è¦å¾ˆç®€å•çš„ä¸€æ®µblockå°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Objective-C&quot;&gt;RAC(self.logInButton, enabled) = [RACSignal
        combineLatest:@[
            self.usernameTextField.rac_textSignal,
            self.passwordTextField.rac_textSignal,
            RACObserve(LoginManager.sharedManager, loggingIn),
            RACObserve(self, loggedIn)
        ] reduce:^(NSString *username, NSString *password, NSNumber *loggingIn, NSNumber *loggedIn) {
            return @(username.length &amp;gt; 0 &amp;amp;&amp;amp; password.length &amp;gt; 0 &amp;amp;&amp;amp; !loggingIn.boolValue &amp;amp;&amp;amp; !loggedIn.boolValue);
        }];
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¯æ¬¡å½“textçš„å€¼æ”¹å˜çš„æ—¶å€™ï¼Œè‡ªåŠ¨å‘æ•°æ®æµä¸­æ·»åŠ æ–°çš„æ•°æ®ã€‚å¦‚æœæœ‰subscriberè®¢é˜…è€…çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘ã€‚&lt;/p&gt;
&lt;p&gt;###ç½‘ç»œå¼‚æ­¥&lt;/p&gt;
&lt;p&gt;å½“æˆ‘ä»¬æœ‰éœ€æ±‚çš„æ—¶å€™ï¼Œå¯ä»¥è‡ªå·±åˆ›å»º&lt;code&gt;RACSubject&lt;/code&gt;ç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸º&lt;code&gt;RACSubject&lt;/code&gt;æ˜¯ä¸€ä¸ªå…·æœ‰é«˜åº¦è‡ªå®šä¹‰çš„ä¿¡å·(æ˜¯RACSignalçš„å­ç±»)ï¼›&lt;/p&gt;
&lt;p&gt;å½“æˆ‘ä»¬è¦è¿›è¡Œä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºä¿¡å·çš„æ–¹å¼ï¼Œè®©ç›¸å…³çš„æˆå‘˜è®¢é˜…è¯¥ä¿¡å·ï¼Œå°±å¯ä»¥åœ¨è¯·æ±‚è¿”å›çš„æ—¶å€™æ‰§è¡Œç›¸å…³çš„æ–¹æ³•äº†ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Objective-C&quot;&gt;
- (void)doTest
{
    RACSubject *subject = [self doRequest];

    [subject subscribeNext:^(NSString *value){
        NSLog(@&amp;quot;value:%@&amp;quot;, value);
    }];
}

- (RACSubject *)doRequest
{
    RACSubject *subject = [RACSubject subject];
    // æ¨¡æ‹Ÿ2ç§’åå¾—åˆ°è¯·æ±‚å†…å®¹
    // åªè§¦å‘1æ¬¡
    // å°½ç®¡subscribeNextä»€ä¹ˆä¹Ÿæ²¡åšï¼Œä½†å¦‚æœæ²¡æœ‰çš„è¯mapæ˜¯ä¸ä¼šæ‰§è¡Œçš„
    // subscribeNextå°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªæ¥æ”¶ä½“
    [[[[RACSignal interval:2] take:1] map:^id(id _){
        // the value is from url request
        NSString *value = @&amp;quot;content fetched from web&amp;quot;;
        [subject sendNext:value];
        return nil;
    }] subscribeNext:^(id _){}];
    return subject;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;##å¸¸è§çš„æ¦‚å¿µ&lt;/p&gt;
&lt;p&gt;###Signal and Subscriber&lt;/p&gt;
&lt;p&gt;åœ¨RACä¸­ï¼Œæœ€é‡è¦çš„æ¦‚å¿µå°±æ˜¯ä¿¡å·å’Œè®¢é˜…è€…ã€‚ä¿¡å·å¿…é¡»æœ‰äº†è®¢é˜…è€…æ‰ä¼šè¢«è·å–åˆ°ï¼ˆçƒ­ä¿¡å·ï¼‰ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™æ˜¯å¤„äºå†·è—çŠ¶æ€ï¼ˆå†·ä¿¡å·ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä¿¡å·è·å¾—äº†ç›¸å…³æ•°æ®åï¼Œå°±ä¼šæ‰§è¡Œè®¢é˜…è€…çš„&lt;code&gt;sendNext, sendComplete, sendError&lt;/code&gt;æ–¹æ³•ã€‚è®¢é˜…è€…ä¹Ÿæœ‰ç›¸å…³çš„æ–¹æ³•æ¥è·å–ç›¸å…³çš„æ•°æ®ï¼Œæ¯”å¦‚&lt;code&gt;[signal subscribeNext:error:completed]&lt;/code&gt;ã€‚è¿™ä¸ªæ—¶å€™åªè¦æ²¡æœ‰&lt;code&gt;sendError&lt;/code&gt;å’Œ&lt;code&gt;sendComplete&lt;/code&gt;ä¼ è¿‡æ¥ï¼Œå°±ä¼šæœ‰æºæºä¸æ–­çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Objective-C&quot;&gt;[RACObserve(self, username) subscribeNext: ^(NSString *newName){
    NSLog(@&amp;quot;newName:%@&amp;quot;, newName);
}];
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;RACObserveä½¿ç”¨äº†KVOæ¥ç›‘å¬propertyçš„å˜åŒ–ï¼Œåªè¦usernameè¢«è‡ªå·±æˆ–å¤–éƒ¨æ”¹å˜ï¼Œblockå°±ä¼šè¢«æ‰§è¡Œã€‚ä½†ä¸æ˜¯æ‰€æœ‰çš„propertyéƒ½å¯ä»¥è¢«RACObserveï¼Œè¯¥propertyå¿…é¡»æ”¯æŒKVOï¼Œæ¯”å¦‚NSURLCacheçš„currentDiskUsageå°±ä¸èƒ½è¢«RACObserveã€‚&lt;/p&gt;
&lt;p&gt;ä¿¡å·æ˜¯å¯ä»¥è¢«å¤„ç†çš„ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§å¤„ç†ä¿¡å·çš„æ–¹å¼&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;map ä¿®æ”¹&lt;/li&gt;
&lt;li&gt;filter è¿‡æ»¤&lt;/li&gt;
&lt;li&gt;combine ç»„åˆ&lt;/li&gt;
&lt;li&gt;chain ä¸²è”&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&quot;Objective-C&quot;&gt;
RAC(self.logInButton, enabled) = [RACSignal
        combineLatest:@[
            self.usernameTextField.rac_textSignal,
            self.passwordTextField.rac_textSignal,
            RACObserve(LoginManager.sharedManager, loggingIn),
            RACObserve(self, loggedIn)
        ] reduce:^(NSString *username, NSString *password, NSNumber *loggingIn, NSNumber *loggedIn) {
            return @(username.length &amp;gt; 0 &amp;amp;&amp;amp; password.length &amp;gt; 0 &amp;amp;&amp;amp; !loggingIn.boolValue &amp;amp;&amp;amp; !loggedIn.boolValue);
        }];
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢è¿™ä¸ªä¾‹å­å°±æ˜¯é€šè¿‡ç»„åˆäº†å››ä¸ªä¿¡å·æ¥å¤„ç†ä¸€ä¸ªå¤æ‚çš„å…´çŸ¿ã€‚&lt;/p&gt;
&lt;p&gt;###å†·ä¿¡å·å’Œçƒ­ä¿¡å·&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æåˆ°è¿‡å†·çƒ­ä¿¡å·çš„é—®é¢˜ï¼Œç®€å•çš„æ¥è¯´å°±æ˜¯ä¸€ä¸ªä¿¡å·æ˜¯å¦æœ‰è®¢é˜…è€…çš„å…³ç³»ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼Œå¦‚æœä¸€ä¸ªä¿¡å·æœ‰å¤šä¸ªè®¢é˜…è€…çš„æ—¶å€™ï¼Œsignalé‡Œé¢çš„blockä¼šè¢«æ‰§è¡Œå¤šæ¬¡ï¼Œè¦æ§åˆ¶çš„è¯å°±è¦é€šè¿‡replayçš„æ–¹æ³•å»æ§åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;###UI Category&lt;/p&gt;
&lt;p&gt;RACæä¾›äº†å¾ˆå¤šcategoryçš„æ–¹æ³•æ¥ä¸ºæˆ‘ä»¬å¢åŠ äº†ä¾¿åˆ©ï¼Œæ¯”å¦‚ä¸Šæ–‡çš„rac_textSignalå°±æ˜¯å¯¹labelçš„ä¸€ä¸ªæ–¹æ³•ã€‚å…·ä½“çš„å¯ä»¥é€šè¿‡è‡ªå·±åœ¨å®è·µä¸­æ‘¸ç´¢ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªè¦ç‰¹åˆ«æ³¨æ„çš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“å¸¸ç”¨çš„ç»„ä»¶å½“ä¸­ï¼Œæœ€éº»çƒ¦çš„å°±æ˜¯tableview çš„åº”ç”¨ã€‚åœ¨RACä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è·Ÿè¸ª&lt;code&gt;NSArray&lt;/code&gt;æ¥è·Ÿè¸ªæ•°æ®æºï¼Œè¿™æ ·åœ¨æ–°çš„æ•°æ®å¢åŠ çš„æ—¶å€™æˆ–è€…æ—§çš„æ•°æ®è¢«ç§»é™¤çš„æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥æ›´æ–°tableviewã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸ªå¾ˆç‰¹æ®Šçš„æƒ…å†µå°±æ˜¯cellåœ¨é‡è½½æ—¶å€™ã€‚RACæä¾›äº†ä¸€ä¸ªæ–¹æ³•&lt;code&gt;rac_prepareForReuseSignal&lt;/code&gt;ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨cellå³å°†è¢«é‡ç”¨çš„æ—¶å€™ï¼Œå‘Šè¯‰cellã€‚æˆ‘ä»¬å¯ä»¥æƒ³å¤šï¼Œå¦‚æœæ¯ä¸ªcellä¸Šé¢éƒ½æœ‰å¤šä¸ªbuttonï¼Œæ¯æ¬¡é‡è½½çš„æ—¶å€™éƒ½è¦å»addTarget,è¢«é‡ç”¨çš„æ—¶å€™åˆè¦å»ç§»é™¤è¿™äº›targetï¼Œä¸‹é¢æ˜¯æˆ‘çœ‹åˆ°çš„ä¸€ä¸ªå®ä¾‹ä»£ç ï¼Œå¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Objective-C&quot;&gt;[[[self.cancelButton
    rac_signalForControlEvents:UIControlEventTouchUpInside]
    takeUntil:self.rac_prepareForReuseSignal]
    subscribeNext:^(UIButton *x) {
    // do other things
}];
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿˜æœ‰ä¸ªå¾ˆå¸¸ç”¨çš„åœ°æ–¹å°±æ˜¯buttonã€‚æˆ‘ä»¬çŸ¥é“buttonçš„ç‚¹å‡»å¯èƒ½ä¼šæ ¹æ®ä¸åŒçš„çŠ¶æ€æœ‰ä¸åŒçš„è¡Œä¸ºã€‚RACæä¾›äº†ä¸€ä¸ªcategoryï¼Œæœ‰ä¸€ä¸ªæ–¹æ³•&lt;code&gt;rac_command&lt;/code&gt;ã€‚è¿™æ ·æ¯æ¬¡buttonæŒ‰ä¸‹åéƒ½æ˜¯è¿”å›ä¸€ä¸ªä¿¡å·ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ›´çµæ´»åœ°å¤„ç†è¿™ä¸ªbuttonçš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Objective-C&quot;&gt;
voteButton.rac_command = [[RACCommand alloc] initWithEnabled:self.viewModel.voteCommand.enabled signalBlock:^RACSignal *(id input) {
    // Assume that we&amp;#39;re logged in at first. We&amp;#39;ll replace this signal later if not.
    RACSignal *authSignal = [RACSignal empty];

    if ([[PXRequest apiHelper] authMode] == PXAPIHelperModeNoAuth) {
        // Not logged in. Replace signal.
        authSignal = [[RACSignal createSignal:^RACDisposable *(id&amp;lt;RACSubscriber&amp;gt; subscriber) {
            @strongify(self);

            FRPLoginViewController *viewController = [[FRPLoginViewController alloc] initWithNibName:@&amp;quot;FRPLoginViewController&amp;quot; bundle:nil];
            UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:viewController];

            [self presentViewController:navigationController animated:YES completion:^{
                [subscriber sendCompleted];
            }];

            return nil;
        }]];
    }

    return [authSignal then:^RACSignal *{
        @strongify(self);
        return [[self.viewModel.voteCommand execute:nil] ignoreValues];
    }];
}];
[voteButton.rac_command.errors subscribeNext:^(id x) {
    [x subscribeNext:^(NSError *error) {
        [SVProgressHUD showErrorWithStatus:[error localizedDescription]];
    }];
}];
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢çš„è¿™æ®µä»£ç æä¾›äº†ä¸€ä¸ªæŠ•ç¥¨çš„æŒ‰é’®çš„äº‹ä»¶å¤„ç†ã€‚é¦–å…ˆåˆ¤æ–­æ˜¯å¦å·²ç»ç™»å½•äº†ï¼Œå¦‚æœæ²¡æœ‰ç™»å½•ï¼Œåˆ™å¼¹å‡ºç™»é™†æ¡†ã€‚å¦‚æœç™»å½•äº†ï¼Œå°±å‘é€HTTPè¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæ•°æ®ç»“æ„ï¼Œé€šçŸ¥ä¸­å¿ƒï¼ŒNSObjectéƒ½æœ‰ä¸åŒçš„categoryã€‚ä¸è¿‡æˆ‘è¿˜æ²¡ç ”ç©¶é‚£ä¹ˆæ·±ï¼Œæ‰€ä»¥æœ‰å¿ƒå¾—çš„æ—¶å€™ä¼šå†æ¥è¯´è¯´ã€‚&lt;/p&gt;
&lt;p&gt;##å°ç»“&lt;br&gt;ç”±äºåˆšå¥½è¦åšæ¯•è®¾ï¼Œæœ¬æ¥å¤§å®¶çš„å»ºè®®æœ€å¥½æ˜¯æ‹¿ä»¥å‰çš„é¡¹ç›®æ¥æäº¤ï¼Œè¿™æ ·çš„è¯æ¯”è¾ƒçœäº‹ï¼Œä½†æ˜¯æˆ‘è§‰å¾—è¿™ä¸ªæ˜¯ä¸€ä¸ªæœºä¼šï¼Œèƒ½å¤Ÿè®©è‡ªå·±å»ç ”ç©¶ä¸€äº›æ–°çš„æŠ€æœ¯ï¼Œä¹Ÿå¯ä»¥è®©è‡ªå·±å»æ¥è§¦ä¸€äº›å¯èƒ½åœ¨å…¬å¸ä¸­æ¥è§¦çš„ä¸åˆ°çš„æ–¹é¢ã€‚é€šè¿‡ä¸€å‘¨çš„å­¦ä¹ ï¼Œå¯¹RACå·²ç»æœ‰äº†ä¸€ç‚¹ç‚¹å¿ƒå¾—ï¼Œæ¥ä¸‹æ¥ä¼šåœ¨æ¯•è®¾é¡¹ç›®ä¸­å¤§é‡ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;åé¢å¯èƒ½è¿˜æ˜¯æƒ³ç»“åˆç½‘ç»œè¯·æ±‚æ¥çœ‹çœ‹æ€ä¹ˆä½¿ç”¨RACï¼Œæ¯•ç«Ÿå¤šæ•°çš„ä¸šåŠ¡éƒ½æ˜¯ç½‘ç»œè¯·æ±‚-&amp;gt;æ•°æ®ç»„ç»‡-&amp;gt;é¡µé¢å±•ç¤º-&amp;gt;äº¤äº’çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;RACå­¦ä¹ &quot;&gt;&lt;a href=&quot;#RACå­¦ä¹ &quot; class=&quot;headerlink&quot; title=&quot;RACå­¦ä¹ &quot;&gt;&lt;/a&gt;RACå­¦ä¹ &lt;/h1&gt;&lt;p&gt;RACï¼ŒReactiveCocoa,æ˜¯githubä¸Šä¸€ä¸ªéå¸¸æœ‰åçš„å¼€æºåº“ï¼Œå®ä¹ äº†åœ¨iOSä¸Šçš„å‡½æ•°å¼ç¼–ç¨‹ã€‚åœ¨2.xç‰ˆæœ¬
    
    </summary>
    
      <category term="Objective-C" scheme="http://csbzhixing.github.io/categories/Objective-C/"/>
    
    
  </entry>
  
  <entry>
    <title>ä¸€å‘¨åˆ·é¢˜æ€»ç»“ - 1</title>
    <link href="http://csbzhixing.github.io/2015/11/06/week-code-1/"/>
    <id>http://csbzhixing.github.io/2015/11/06/week-code-1/</id>
    <published>2015-11-06T14:36:06.000Z</published>
    <updated>2015-11-06T14:36:56.000Z</updated>
    
    <content type="html">&lt;p&gt;ä¸Šå‘¨å¼€å§‹å¤ä¹ ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œä¸€å‘¨æ¯å¤©åœ¨ç¡å‰éƒ½æ‹¿å‡ºä¸å°‘æ—¶é—´å»å­¦ä¹ ï¼Œåšäº†ä¸€äº›é¢˜ç›®ï¼Œæƒ³æ¥æ¯å‘¨éƒ½åº”è¯¥æŠŠç›¸å…³çš„é¢˜ç›®æ€»ç»“ä¸€ä¸‹ï¼Œæ‰èƒ½æ›´å¥½çš„å»å­¦ä¹ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;237    Delete Node in a Linked List&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ˜¯ä¸Šæ¬¡ç¬”è®°é‡Œé¢å†™è¿‡çš„å†…å®¹ï¼Œä½†æ˜¯æˆ‘è‡ªå·±å†™å¾—æ—¶å€™åˆå‡ºç°äº†é—®é¢˜ï¼Œçœ‹æ¥ç®€å•çš„é—®é¢˜ä¸šä¸èƒ½å»å¿½ç•¥ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;c&quot;&gt;/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     struct ListNode *next;
 * };
 */
void deleteNode(struct ListNode* node) {
    if(node == NULL) return;
    struct ListNode *temp = node-&amp;gt;next;
    node-&amp;gt;val = temp-&amp;gt;val;
    node-&amp;gt;next = temp-&amp;gt;next;
    free(temp);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;171    Excel Sheet Column Number&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€å•çš„æ¥è¯´å°±æ˜¯ä¸€ä¸ª26è¿›åˆ¶çš„æ•°ï¼Œæ²¡ä»€ä¹ˆéš¾ç‚¹&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;c&quot;&gt;int titleToNumber(char* s) {
    int length = strlen(s);

    int all = 0;

    for(int i=0;i&amp;lt;length;i++)
    {
        all=((s[i]-&amp;#39;A&amp;#39;)+1) + all * 26;
    }

    return all;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;169    Majority Element&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‡ºç°è¶…è¿‡n/2çš„æ•°ï¼Œé€šè¿‡éå†å°±å¯ä»¥äº†&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;c&quot;&gt;
int majorityElement(int* nums, int numsSize) {
    int time=0,maj;
    for(int i=0;i&amp;lt;numsSize;i++)
    {
        if(time == 0)
        {
            maj = nums[i];
        }
        if(nums[i]==maj) 
        {
            time++;
        }
       else{
         time--;  
       } 
    }
    return maj;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;206    Reverse Linked List&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åè½¬é“¾è¡¨ï¼ŒåŸºç¡€é¢˜ç›®&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;c&quot;&gt;/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     struct ListNode *next;
 * };
 */
struct ListNode* reverseList(struct ListNode* head) {

    struct ListNode* pre = NULL;
    struct ListNode* cur = head;
    struct ListNode* next = NULL;

    while(cur)
    {
        next = cur-&amp;gt;next;
        cur-&amp;gt;next = pre;
        pre = cur;
        cur = next;
    }
    return pre;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;263    Ugly Number&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€å•çš„é€’å½’é—®é¢˜&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;c&quot;&gt;
bool isUgly(int num) {

    if(num&amp;lt;1) return false;

    if(num%2==0)
    {
        num/=2;
        return isUgly(num);
    }

     if(num%3==0)
    {
        num/=3;
        return isUgly(num);
    }

     if(num%5==0)
    {
        num/=5;
        return isUgly(num);
    }

    if(num == 1) return true;

    return false;

}
&lt;/code&gt;&lt;/pre&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸Šå‘¨å¼€å§‹å¤ä¹ ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œä¸€å‘¨æ¯å¤©åœ¨ç¡å‰éƒ½æ‹¿å‡ºä¸å°‘æ—¶é—´å»å­¦ä¹ ï¼Œåšäº†ä¸€äº›é¢˜ç›®ï¼Œæƒ³æ¥æ¯å‘¨éƒ½åº”è¯¥æŠŠç›¸å…³çš„é¢˜ç›®æ€»ç»“ä¸€ä¸‹ï¼Œæ‰èƒ½æ›´å¥½çš„å»å­¦ä¹ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;237    Delete Node in a Linked List&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ˜¯ä¸Šæ¬¡ç¬”è®°é‡Œ
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://csbzhixing.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
  </entry>
  
  <entry>
    <title>runtime</title>
    <link href="http://csbzhixing.github.io/2015/11/01/runtime/"/>
    <id>http://csbzhixing.github.io/2015/11/01/runtime/</id>
    <published>2015-11-01T02:07:27.000Z</published>
    <updated>2015-11-01T16:57:36.000Z</updated>
    
    <content type="html">&lt;p&gt;ä»å¼€å§‹å†™åšå®¢çš„æ—¶å€™ï¼Œå°±ç”±ä¸€ä¸ªå‡†å¤‡æŠŠRuntimeå¥½å¥½ç ”ç©¶æ•´ç†å‡ºæ¥ã€‚åæ¥å‘ç°å†™runtimeå¾—æ–‡ç« å¤ªå¤šäº†ï¼Œè€Œä¸”è‡ªå·±ç ”ç©¶çš„ä¹Ÿç®—ä¸ä¸Šæœ‰å¤šä¹ˆæ·±å…¥ï¼Œå†™å‡ºæ¥ä¼°è®¡å¾ˆå¤šé”™è¯¯- â€”â€“ï¼ˆå› ä¸ºä¸»è¦æ˜¯ç»™è‡ªå·±çœ‹å¾—ï¼‰ã€‚æœ€è¿‘åœ¨é¡¹ç›®ä¸­ï¼Œç¬¬ä¸€æ¬¡ç”¨åˆ°äº†runtimeè§£å†³äº†ä¸€ä¸ªå®é™…é—®é¢˜ï¼Œè¿™å¯å‘æˆ‘ï¼Œæˆ‘çš„æ–‡ç« åº”è¯¥ä»æ€ä¹ˆåˆ©ç”¨runtimeå»è§£å†³å®é™…çš„é—®é¢˜ï¼Œç»™è‡ªå·±æä¾›ä¸€ä¸ªè§£å†³é—®é¢˜çš„æ–°æ€è·¯ã€‚&lt;/p&gt;
&lt;p&gt;##runtime å…³è”å¯¹è±¡&lt;/p&gt;
&lt;p&gt;ä»å…³è”å¯¹è±¡è¯´èµ·ï¼Œæ˜¯å› ä¸ºåœ¨æœ€è¿‘çš„é¡¹ç›®ä¸­ç”¨åˆ°äº†è¿™ä¸ªæ–¹æ³•ã€‚å½“æ—¶çš„åœºæ™¯æ˜¯ï¼Œæˆ‘éœ€è¦åˆ›å»ºä¸€ä¸ªcategoryï¼Œé‡Œé¢éœ€è¦ä¸€ä¸ªblockå¯¹è±¡ã€‚ç„¶è€Œæˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨categoryä¸­æ·»åŠ æˆå‘˜å˜é‡ã€‚å¦‚æœæˆ‘ä»¬å°è¯•æ·»åŠ çš„è¯ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚å½“ç„¶ï¼Œä½¿ç”¨å…¨å±€å˜é‡èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜æ˜¾æ˜¯ä¸€ä¸ªå¾ˆä¼˜é›…çš„æ–¹æ³•ï¼Œä¹Ÿå¾ˆå®¹æ˜“é€ æˆé”™è¯¯ã€‚Objective-Cé’ˆå¯¹è¿™ä¸€ä¸­é—®é¢˜ï¼Œæä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯&lt;code&gt;å…³è”å¯¹è±¡(Associated Object)ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥æƒ³è±¡ï¼Œå…³è”å¯¹è±¡å°±æ˜¯ä¸€ä¸ªkey - valueçš„æ¨¡å‹ï¼ŒæŠŠå¯¹è±¡é€šè¿‡ç‰¹å®šçš„Keyé“¾æ¥åˆ°ç›¸å…³çš„å®ä¾‹ä¸Šã€‚ä¸è¿‡ç”±äºä½¿ç”¨çš„æ˜¯Cçš„å€Ÿå£ï¼Œæ‰€ä»¥keyæ˜¯ä¸€ä¸ªvoidæŒ‡é’ˆã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¦éœ€è¦ä¸ºè¿™ä¸ªå…³è”å¯¹è±¡è®¾å®šå†…å­˜ç®¡ç†ç­–ç•¥ã€‚ç›¸å…³çš„å†…å­˜çš„ç®¡ç†ç­–ç•¥å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;OBJC_ASSOCIATION_ASSIGN

OBJC_ASSOCIATION_RETAIN_NONATOMIC

OBJC_ASSOCIATION_COPY_NONATOMIC

OBJC_ASSOCIATION_RETAIN

OBJC_ASSOCIATION_COPY
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯¹&lt;code&gt;OBJC_ASSOCIATION_ASSIGN&lt;/code&gt;çš„ï¼Œå½“å…³è”å¯¹è±¡æ‰€å…³è”çš„å®ä¾‹è¢«é‡Šæ”¾æ‰åï¼Œå¯¹è±¡ä¸ä¼šè¢«é‡Šæ”¾æ‰ã€‚è€Œ&lt;code&gt;OBJC_ASSOCIATION_RETAIN&lt;/code&gt;å’Œ&lt;code&gt;OBJC_ASSOCIATION_COPY&lt;/code&gt;ä¸¤ä¸ªçš„è¯ï¼Œåœ¨å®ä¾‹è¢«é‡Šæ”¾æ‰åŒæ—¶ï¼Œå…³è”å¯¹è±¡ä¹Ÿä¼šè¢«releaseæ‰ã€‚å½“æˆ‘ä»¬ç”¨åŒä¸€ä¸ªkeyå»å…³è”å¦å¤–çš„å®ä¾‹å¯¹è±¡çš„æ—¶å€™ï¼Œä¹Ÿä¼šè‡ªåŠ¨é‡Šæ”¾æ‰ä¹‹å‰å…³è”çš„å¯¹è±¡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå…ˆå‰çš„å…³è”å¯¹è±¡ä¼šè¢«å¦¥å–„åœ°å¤„ç†æ‰ï¼Œå¹¶ä¸”æ–°çš„å¯¹è±¡ä¼šä½¿ç”¨å®ƒçš„å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;å…³è”å¯¹è±¡çš„çš„runtimeå‡½æ•°å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// è®¾ç½®å…³è”å¯¹è±¡

void objc_setAssociatedObject ( id object, const void *key, id value, objc_AssociationPolicy policy );



// è·å–å…³è”å¯¹è±¡

id objc_getAssociatedObject ( id object, const void *key );



// ç§»é™¤å…³è”å¯¹è±¡

void objc_removeAssociatedObjects ( id object );
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸‹é¢å°±ç»™å‡ºåœ¨é¡¹ç›®ä¸­å®é™…é‡åˆ°çš„é—®é¢˜ç»™åšä¸€ä¸ªä¾‹å­ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆåœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰äº†ä»¥ä¸‹å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14463463210542.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªcategoryæ˜¯ä¸ºäº†æ‰©å±•vcï¼Œè®©vcå…·æœ‰ä¸€ä¸ªå¼¹å‡ºç³»ç»Ÿé€šè®¯å½•çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨.mæ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹å®ç°blockå…³è”å¯¹è±¡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14463464447032.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åå°±åƒæ­£å¸¸çš„å¯¹è±¡ä¸€æ ·æ“ä½œå°±è¡Œäº†&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14463464914602.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14463464837182.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šé¢çœ‹åˆ°ï¼Œæˆ‘å¯¹å…³è”å¯¹è±¡ä½¿ç”¨çš„keyæ˜¯ç”¨äº†&lt;code&gt;@selector()&lt;/code&gt;ã€‚é‚£ä¸ºä»€ä¹ˆå¯ä»¥ä½¿ç”¨SELæ¥ä»£æ›¿è®¾å®šä¸€ä¸ªå›ºå®šçš„keyå‘¢ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;æ–¹æ³•ä¸æ¶ˆæ¯&quot;&gt;&lt;a href=&quot;#æ–¹æ³•ä¸æ¶ˆæ¯&quot; class=&quot;headerlink&quot; title=&quot;æ–¹æ³•ä¸æ¶ˆæ¯&quot;&gt;&lt;/a&gt;æ–¹æ³•ä¸æ¶ˆæ¯&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;SEL&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åˆå«é€‰æ‹©å™¨ï¼Œæ˜¯è¡¨ç¤ºä¸€ä¸ªæ–¹æ³•çš„selectorçš„æŒ‡é’ˆï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;typedef struct objc_selector *SEL;&lt;/code&gt;&lt;br&gt;objc_selectorç»“æ„ä½“çš„è¯¦ç»†å®šä¹‰æ²¡æœ‰åœ¨&amp;lt;objc/runtime.h&amp;gt;å¤´æ–‡ä»¶ä¸­æ‰¾åˆ°ã€‚æ–¹æ³•çš„selectorç”¨äºè¡¨ç¤ºè¿è¡Œæ—¶æ–¹æ³•çš„åå­—ã€‚Objective-Cåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šä¾æ®æ¯ä¸€ä¸ªæ–¹æ³•çš„åå­—ã€å‚æ•°åºåˆ—ï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ•´å‹æ ‡è¯†(Intç±»å‹çš„åœ°å€)ï¼Œè¿™ä¸ªæ ‡è¯†å°±æ˜¯SELã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IMP&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡SELæ‰¾åˆ°å‡½æ•°åï¼Œå°±å¯ä»¥è·å–åˆ°è¯¥å‡½æ•°çš„IMPã€‚IMPå®é™…ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘æ–¹æ³•å®ç°çš„é¦–åœ°å€ã€‚å…¶å®šä¹‰å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;id (*IMP)(id, SEL, ...)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é€šè¿‡å–å¾—IMPï¼Œæˆ‘ä»¬å¯ä»¥è·³è¿‡runtimeçš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œç›´æ¥é€šè¿‡IMPæ‰§è¡ŒæŒ‡å‘çš„å‡½æ•°å®ç°ã€‚è¿™æ ·ä¸€æ¥å¯ä»¥æé«˜æ•ˆç‡ï¼Œçœå»äº†æ¶ˆæ¯ä¼ é€’ä¸­çš„ä¸€ç³»åˆ—è¿‡ç¨‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;å›ç­”ä¸Šé¢çš„é—®é¢˜

æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨åŒä¸€ä¸ªç±»æ–‡ä»¶é‡Œé¢ï¼Œä¸èƒ½å­˜åœ¨åŒä¸€ä¸ªåå­—çš„æ–¹æ³•ï¼Œå³ä½¿æ˜¯å‚æ•°ç±»å‹ä¸åŒä¸šä¸è¡Œã€‚åŒç†ï¼ŒåŒä¸€ä¸ªç±»æ–‡ä»¶é‡Œé¢ä¸èƒ½å­˜åœ¨åŒä¸€ä¸ªåå­—çš„å¯¹è±¡ï¼Œæ‰€ä»¥setæ–¹æ³•æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨SELæ¥è·å–å”¯ä¸€çš„æ•´ç†æ ‡è¯†æ¥ä½œä¸ºkeyã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;##ä¸‹é¢æ˜¯çœ‹çš„ä¸€äº›æ–‡ç« çš„æ‘˜å½•å’Œè‡ªå·±çš„ä¸€é¡¹å¿ƒå¾—ï¼Œä¸»è¦æ˜¯ç»™è‡ªå·±åšä¸€ä¸ªå¤‡å¿˜ã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©å™¨ç›¸å…³çš„æ“ä½œå‡½æ•°åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// è¿”å›ç»™å®šé€‰æ‹©å™¨æŒ‡å®šçš„æ–¹æ³•çš„åç§°
const char * sel_getName ( SEL sel );
// åœ¨Objective-C Runtimeç³»ç»Ÿä¸­æ³¨å†Œä¸€ä¸ªæ–¹æ³•ï¼Œå°†æ–¹æ³•åæ˜ å°„åˆ°ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œå¹¶è¿”å›è¿™ä¸ªé€‰æ‹©å™¨

SEL sel_registerName ( const char *str );



// åœ¨Objective-C Runtimeç³»ç»Ÿä¸­æ³¨å†Œä¸€ä¸ªæ–¹æ³•

SEL sel_getUid ( const char *str );



// æ¯”è¾ƒä¸¤ä¸ªé€‰æ‹©å™¨

BOOL sel_isEqual ( SEL lhs, SEL rhs );
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ–¹æ³•æ“ä½œçš„å‡½æ•°å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// è°ƒç”¨æŒ‡å®šæ–¹æ³•çš„å®ç°
// receiverä¸èƒ½ä¸ºç©º
// æ¯”method_getImplementationå’Œmethod_getNameæ›´å¿«

id method_invoke ( id receiver, Method m, ... );



// è°ƒç”¨è¿”å›ä¸€ä¸ªæ•°æ®ç»“æ„çš„æ–¹æ³•çš„å®ç°

void method_invoke_stret ( id receiver, Method m, ... );



// è·å–æ–¹æ³•å
// è¿”å›ä¸€ä¸ªSELã€‚å¦‚æœè¦è·å–æ–¹æ³•åå¾—Cå­—ç¬¦ä¸²ï¼Œè¦ç”¨sel_getName(method_getName(method))ã€‚

SEL method_getName ( Method m );



// è¿”å›æ–¹æ³•çš„å®ç°
// æ³¨æ„è¯¥å‡½æ•°è¿”å›å€¼æ˜¯æ–¹æ³•ä¹‹å‰çš„å®ç°ã€‚
IMP method_getImplementation ( Method m );



// è·å–æè¿°æ–¹æ³•å‚æ•°å’Œè¿”å›å€¼ç±»å‹çš„å­—ç¬¦ä¸²

const char * method_getTypeEncoding ( Method m );



// è·å–æ–¹æ³•çš„è¿”å›å€¼ç±»å‹çš„å­—ç¬¦ä¸²

char * method_copyReturnType ( Method m );



// è·å–æ–¹æ³•çš„æŒ‡å®šä½ç½®å‚æ•°çš„ç±»å‹å­—ç¬¦ä¸²

char * method_copyArgumentType ( Method m, unsigned int index );



// é€šè¿‡å¼•ç”¨è¿”å›æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å­—ç¬¦ä¸²

void method_getReturnType ( Method m, char *dst, size_t dst_len );



// è¿”å›æ–¹æ³•çš„å‚æ•°çš„ä¸ªæ•°

unsigned int method_getNumberOfArguments ( Method m );



// é€šè¿‡å¼•ç”¨è¿”å›æ–¹æ³•æŒ‡å®šä½ç½®å‚æ•°çš„ç±»å‹å­—ç¬¦ä¸²

void method_getArgumentType ( Method m, unsigned int index, char *dst, size_t dst_len );



// è¿”å›æŒ‡å®šæ–¹æ³•çš„æ–¹æ³•æè¿°ç»“æ„ä½“

struct objc_method_description * method_getDescription ( Method m );



// è®¾ç½®æ–¹æ³•çš„å®ç°

IMP method_setImplementation ( Method m, IMP imp );



// äº¤æ¢ä¸¤ä¸ªæ–¹æ³•çš„å®ç°

void method_exchangeImplementations ( Method m1, Method m2 );
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;##æ–¹æ³•è°ƒç”¨æµç¨‹&lt;/p&gt;
&lt;p&gt;åœ¨Objective-Cä¸­ï¼Œæ¶ˆæ¯ä¼šä¸€ç›´åˆ°è¿è¡Œæ—¶ç»‘å®šçš„æ–¹æ³•å®ç°ä¸Šã€‚æˆ‘ä»¬å¸¸ç”¨çš„[receiver message]ä¼šè¢«runtimeè½¬æ¢ä¸ºä¸€ä¸ªå‡½æ•°è°ƒç”¨&lt;code&gt;objc_msgSend&lt;/code&gt;ã€‚å¦‚ä¸‹&lt;/p&gt;
&lt;p&gt;&lt;code&gt;objc_msgSend(receiver, selector)&lt;/code&gt;&lt;br&gt;å¦‚æœæ¶ˆæ¯ä¸­è¿˜æœ‰å…¶å®ƒå‚æ•°ï¼Œåˆ™è¯¥æ–¹æ³•çš„å½¢å¼å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;objc_msgSend(receiver, selector, arg1, arg2, ...)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå‡½æ•°åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å®Œæˆäº†æ‰€æœ‰åŠ¨æ€ç»‘å®šçš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ‰¾åˆ°SELå¯¹åº”çš„æ–¹æ³•å®ç°ã€‚ç”±äºä¸€ä¸ªæ–¹æ³•å¯èƒ½åœ¨ä¸åŒçš„ç±»æœ‰ä¸åŒçš„å®ç°ï¼Œæ‰€æœ‰æˆ‘ä»¬è¦ä¾èµ–äºæ¥å—è€…çš„ç±»æ¥ç¡®å®šç¡®åˆ‡çš„å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨æ–¹æ³•çš„å®ç°ï¼Œå°†å‚æ•°ä¼ å…¥ã€‚&lt;/li&gt;
&lt;li&gt;å°†æ–¹æ³•çš„è¿”å›è¿™ä½œä¸ºçš„è‡ªå·±çš„è¿”å›å€¼ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸€ä¸ªåŸºæœ¬æ¶ˆæ¯çš„æ¡†æ¶&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14463917464901.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„åˆ°ï¼Œåœ¨&lt;code&gt;objc_msgSend&lt;/code&gt;ä¸­æœ‰ä¸¤ä¸ªéšè—å‚æ•°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¶ˆæ¯æ¥å—å¯¹è±¡&lt;/li&gt;
&lt;li&gt;æ–¹æ³•çš„selecor&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;éšè—æ˜¯ä»¥ä¸ºå†…åœ¨å®šä¹‰çš„æ–¹æ³•ä¸­æ²¡æœ‰ç”³æ˜ï¼Œæ˜¯åœ¨ç¼–è¯‘æœŸè¢«æ’å…¥å®ç°ä»£ç çš„ã€‚&lt;/p&gt;
&lt;p&gt;##æ¶ˆæ¯è½¬å‘&lt;/p&gt;
&lt;p&gt;å½“ä¸€ä¸ªå¯¹è±¡èƒ½æ¥å—ä¸€ä¸ªæ¶ˆæ¯çš„æ—¶å€™ï¼Œé‚£ä¹ˆä¸€åˆ‡éƒ½ä¼šæŒ‰ç…§æˆ‘ä»¬æƒ³å¾—å»åšï¼Œä½†æ˜¯å¦‚æœä¸èƒ½æ¥å—æ¶ˆæ¯çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœä¸èƒ½ç›¸åº”[object message],ç¼–è¯‘æœŸä¼šæŠ¥é”™ã€‚å¦‚æœæ˜¯ä»¥performæ¥è°ƒç”¨çš„ï¼Œé‚£ä¹ˆåœ¨è¿è¡Œæ—¶æ‰ä¼šç¡®å®šobjectæ˜¯å¦ä¼šæ¥æ”¶æ¶ˆæ¯ï¼Œå¦‚æœä¸è¡Œçš„è¯ï¼Œå°±ä¼šé€ æˆç¨‹åºå´©æºƒã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡&lt;code&gt;respondsToSelector:&lt;/code&gt;æ¥åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦ä¼šå“åº”è¿™ä¸ªæ¶ˆæ¯ï¼Œä½†æ˜¯æˆ‘ä»¬è¦ç”¨runtimeæ¥æä¸€æï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä»&lt;code&gt;æ¶ˆæ¯è½¬å‘æœºåˆ¶&lt;/code&gt;æ¥è€ƒè™‘ã€‚&lt;/p&gt;
&lt;p&gt;æ¶ˆæ¯è½¬å‘æœºåˆ¶åŸºæœ¬åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åŠ¨æ€æ–¹æ³•è§£æ&lt;/li&gt;
&lt;li&gt;å¤‡ç”¨æ¥æ”¶è€…&lt;/li&gt;
&lt;li&gt;å®Œæˆè½¬å‘&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;###åŠ¨æ€æ–¹æ³•è§£æ&lt;/p&gt;
&lt;p&gt;å½“å½“å¯¹è±¡æ¥æ”¶åˆ°ä½ç½®çš„æ¶ˆæ¯æ—¶ï¼Œé¦–å…ˆä¼šè°ƒç”¨ç±»çš„&lt;code&gt;+resolveInstanceMethod:(å®ä¾‹æ–¹æ³•)&lt;/code&gt;æˆ–è€…&lt;code&gt;+resolveClassMethod:(ç±»æ–¹æ³•)&lt;/code&gt;ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å»å¢åŠ ä¸€ä¸ªå¤„ç†æ–¹æ³•ã€‚åœ¨æ¶ˆæ¯ä¸èƒ½è¢«å¯¹è±¡æ¥æ”¶çš„æ—¶å€™å°±è¿è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œå‰ææ˜¯è¿™ä¸ªæ–¹æ³•å·²ç»è¢«å®ç°äº†ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;void functionForMethod1(id self, SEL _cmd) {

   NSLog(@&amp;quot;%@, %p&amp;quot;, self, _cmd);

}



+ (BOOL)resolveInstanceMethod:(SEL)sel {



    NSString *selectorString = NSStringFromSelector(sel);



    if ([selectorString isEqualToString:@&amp;quot;method1&amp;quot;]) {

        class_addMethod(self.class, @selector(method1), (IMP)functionForMethod1, &amp;quot;@:&amp;quot;);

    }



    return [super resolveInstanceMethod:sel];

}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;å¤‡ç”¨æ¥æ”¶è€…&quot;&gt;&lt;a href=&quot;#å¤‡ç”¨æ¥æ”¶è€…&quot; class=&quot;headerlink&quot; title=&quot;å¤‡ç”¨æ¥æ”¶è€…&quot;&gt;&lt;/a&gt;å¤‡ç”¨æ¥æ”¶è€…&lt;/h3&gt;&lt;p&gt;å½“æˆ‘ä»¬çš„å¯¹è±¡ä¸èƒ½å¤„ç†æ¶ˆæ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†æ¶ˆæ¯è½¬å‘åˆ°ä¸€ä¸ªå¤‡ç”¨çš„å¯¹è±¡ï¼Œåªè¦è¿™ä¸ªå¯¹è±¡çš„ç±»å®ç°äº†è¿™ä¸ªæ–¹æ³•&lt;br&gt;&lt;code&gt;- (id)forwardingTargetForSelector:(SEL)aSelector&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœè¿”å›çš„ä¸æ˜¯ä¸€ä¸ªnilçš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±ä¼šè¢«ä½œä¸ºæ¶ˆæ¯çš„å¿ƒçš„æ¥æ”¶è€…ã€‚è€Œåœ¨å¤–éƒ¨çœ‹æ¥ï¼Œè¿™ä¸ªæ¶ˆæ¯ä»ç„¶è¢«æˆ‘ä»¬çš„å‘é€çš„å¯¹è±¡å¤„ç†äº†ã€‚æ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡ä¸æ˜¯selfè‡ªèº«ï¼Œä¸ç„¶å°±æ˜¯ä¸ªæ— é™å¾ªç¯äº†ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;@interface SUTRuntimeMethodHelper : NSObject



- (void)method2;



@end



@implementation SUTRuntimeMethodHelper



- (void)method2 {

    NSLog(@&amp;quot;%@, %p&amp;quot;, self, _cmd);

}



@end



#pragma mark -



@interface SUTRuntimeMethod () {

    SUTRuntimeMethodHelper *_helper;

}



@end



@implementation SUTRuntimeMethod



+ (instancetype)object {

    return [[self alloc] init];

}



- (instancetype)init {

    self = [super init];

    if (self != nil) {

        _helper = [[SUTRuntimeMethodHelper alloc] init];

    }



    return self;

}



- (void)test {

    [self performSelector:@selector(method2)];

}



- (id)forwardingTargetForSelector:(SEL)aSelector {



    NSLog(@&amp;quot;forwardingTargetForSelector&amp;quot;);



    NSString *selectorString = NSStringFromSelector(aSelector);



    // å°†æ¶ˆæ¯è½¬å‘ç»™_helperæ¥å¤„ç†

    if ([selectorString isEqualToString:@&amp;quot;method2&amp;quot;]) {

        return _helper;

    }



    return [super forwardingTargetForSelector:aSelector];

}



@end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;###å®Œæˆçš„æ¶ˆæ¯è½¬å‘&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸Šè¿°çš„è¡Œä¸ºéƒ½ä¸èƒ½è§£å†³çš„è¯ï¼Œruntimeåœ¨è¿™æ—¶å€™ä¼šç»™å¯¹è±¡æœ€åä¸€æ¬¡æœºä¼šï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- (void)forwardInvocation:(NSInvocation *)anInvocation
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™ï¼Œæ¶ˆæ¯çš„æ‰€æœ‰æœªå¤„ç†çš„å†…å®¹éƒ½è¢«å°è£…åˆ°äº†anInvocationä¸­ï¼ŒåŒ…æ‹¬SEL,targetï¼Œå‚æ•°ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥é€‰ç€å°†æ¶ˆæ¯è½¬å‘ç»™å…¶ä»–çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;forwardInvocation:æ–¹æ³•çš„å®ç°æœ‰ä¸¤ä¸ªä»»åŠ¡ï¼š&lt;/p&gt;
&lt;p&gt;å®šä½å¯ä»¥å“åº”å°è£…åœ¨anInvocationä¸­çš„æ¶ˆæ¯çš„å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ä¸éœ€è¦èƒ½å¤„ç†æ‰€æœ‰æœªçŸ¥æ¶ˆæ¯ã€‚&lt;br&gt;ä½¿ç”¨anInvocationä½œä¸ºå‚æ•°ï¼Œå°†æ¶ˆæ¯å‘é€åˆ°é€‰ä¸­çš„å¯¹è±¡ã€‚anInvocationå°†ä¼šä¿ç•™è°ƒç”¨ç»“æœï¼Œè¿è¡Œæ—¶ç³»ç»Ÿä¼šæå–è¿™ä¸€ç»“æœå¹¶å°†å…¶å‘é€åˆ°æ¶ˆæ¯çš„åŸå§‹å‘é€è€…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯¹äºè¿™ä¸€å—ï¼Œè¿˜æ²¡æœ‰å…·ä½“çš„å®è·µï¼Œæ¯•ç«Ÿåˆ°è¿™ä¸€æ­¥ï¼Œç”¨runtimeæ¥è§£å†³ä¸å¦‚å¥½å¥½å›å»checkä»¥ä¸‹ä»£ç å§ã€‚&lt;/p&gt;
&lt;p&gt;##Method Swizze&lt;/p&gt;
&lt;p&gt;Method Swizzlingæ˜¯æ”¹å˜ä¸€ä¸ªselectorçš„å®é™…å®ç°çš„æŠ€æœ¯.è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨runtimeçš„æ—¶å€™ä¿®æ”¹ç±»åˆ†å‘çš„é˜Ÿå½¢çš„å‡½æ•°ï¼Œä¿®æ”¹å¯¹åº”çš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œæˆ‘ä»¬æƒ³åœ¨æ¯ä¸€ä¸ª&lt;code&gt;viewDidAppear&lt;/code&gt;å¢åŠ ä¸€ä¸ªè·Ÿè¸ªä»£ç ï¼Œè§‚å¯Ÿå“ªä¸ªvcè¢«è°ƒç”¨äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡&lt;code&gt;Method Swizzling&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;###Swizzling æ³¨æ„äº‹é¡¹&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Swizzlingåº”è¯¥æ€»æ˜¯åœ¨+loadä¸­æ‰§è¡Œ&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åœ¨Objective-Cä¸­ï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨è°ƒç”¨æ¯ä¸ªç±»çš„ä¸¤ä¸ªæ–¹æ³•ã€‚+loadä¼šåœ¨ç±»åˆå§‹åŠ è½½æ—¶è°ƒç”¨ï¼Œ+initializeä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ç±»çš„ç±»æ–¹æ³•æˆ–å®ä¾‹æ–¹æ³•ä¹‹å‰è¢«è°ƒç”¨ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯å¯é€‰çš„ï¼Œä¸”åªæœ‰åœ¨å®ç°äº†å®ƒä»¬æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚ç”±äºmethod swizzlingä¼šå½±å“åˆ°ç±»çš„å…¨å±€çŠ¶æ€ï¼Œå› æ­¤è¦å°½é‡é¿å…åœ¨å¹¶å‘å¤„ç†ä¸­å‡ºç°ç«äº‰çš„æƒ…å†µã€‚+loadèƒ½ä¿è¯åœ¨ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¢«åŠ è½½ï¼Œå¹¶ä¿è¯è¿™ç§æ”¹å˜åº”ç”¨çº§åˆ«çš„è¡Œä¸ºçš„ä¸€è‡´æ€§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ+initializeåœ¨å…¶æ‰§è¡Œæ—¶ä¸æä¾›è¿™ç§ä¿è¯â€”äº‹å®ä¸Šï¼Œå¦‚æœåœ¨åº”ç”¨ä¸­æ²¡ä¸ºç»™è¿™ä¸ªç±»å‘é€æ¶ˆæ¯ï¼Œåˆ™å®ƒå¯èƒ½æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;+loadåœ¨çˆ¶ç±»ï¼Œå­ç±»ï¼Œåˆ†ç±»çš„å®ç°éƒ½ä¼šåˆ†åˆ«è°ƒç”¨ï¼Œæ‰€ä»¥+loadæ›´é€‚åˆ&lt;/p&gt;
&lt;p&gt;###Swizzlingåº”è¯¥æ€»æ˜¯åœ¨dispatch_onceä¸­æ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;ä¸ä¸Šé¢ç›¸åŒï¼Œå› ä¸ºswizzlingä¼šæ”¹å˜å…¨å±€çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è¿è¡Œæ—¶é‡‡å–ä¸€äº›é¢„é˜²æªæ–½ã€‚åŸå­æ€§å°±æ˜¯è¿™æ ·ä¸€ç§æªæ–½ï¼Œå®ƒç¡®ä¿ä»£ç åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œä¸ç®¡æœ‰å¤šå°‘ä¸ªçº¿ç¨‹ã€‚GCDçš„dispatch_onceå¯ä»¥ç¡®ä¿è¿™ç§è¡Œä¸ºï¼Œæˆ‘ä»¬åº”è¯¥å°†å…¶ä½œä¸ºmethod swizzlingçš„æœ€ä½³å®è·µã€‚&lt;/p&gt;
&lt;p&gt;###ç‰¹åˆ«çš„åœ°æ–¹&lt;/p&gt;
&lt;p&gt;&amp;gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ€»æ˜¯è°ƒç”¨æ–¹æ³•çš„åŸå§‹å®ç°(é™¤éæœ‰æ›´å¥½çš„ç†ç”±ä¸è¿™ä¹ˆåš)ï¼šAPIæä¾›äº†ä¸€ä¸ªè¾“å…¥ä¸è¾“å‡ºçº¦å®šï¼Œä½†å…¶å†…éƒ¨å®ç°æ˜¯ä¸€ä¸ªé»‘ç›’ã€‚Swizzleä¸€ä¸ªæ–¹æ³•è€Œä¸è°ƒç”¨åŸå§‹å®ç°å¯èƒ½ä¼šæ‰“ç ´ç§æœ‰çŠ¶æ€åº•å±‚æ“ä½œï¼Œä»è€Œå½±å“åˆ°ç¨‹åºçš„å…¶å®ƒéƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;é¿å…å†²çªï¼šç»™è‡ªå®šä¹‰çš„åˆ†ç±»æ–¹æ³•åŠ å‰ç¼€ï¼Œä»è€Œä½¿å…¶ä¸æ‰€ä¾èµ–çš„ä»£ç åº“ä¸ä¼šå­˜åœ¨å‘½åå†²çªã€‚&lt;/li&gt;
&lt;li&gt;æ˜ç™½æ˜¯æ€ä¹ˆå›äº‹ï¼šç®€å•åœ°æ‹·è´ç²˜è´´swizzleä»£ç è€Œä¸ç†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä¸ä»…å±é™©ï¼Œè€Œä¸”ä¼šæµªè´¹å­¦ä¹ Objective-Cè¿è¡Œæ—¶çš„æœºä¼šã€‚é˜…è¯»Objective-C Runtime Referenceå’ŒæŸ¥çœ‹&amp;lt;objc/runtime.h&amp;gt;å¤´æ–‡ä»¶ä»¥äº†è§£äº‹ä»¶æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚&lt;/li&gt;
&lt;li&gt;å°å¿ƒæ“ä½œï¼šæ— è®ºæˆ‘ä»¬å¯¹Foundation, UIKitæˆ–å…¶å®ƒå†…å»ºæ¡†æ¶æ‰§è¡ŒSwizzleæ“ä½œæŠ±æœ‰å¤šå¤§ä¿¡å¿ƒï¼Œéœ€è¦çŸ¥é“åœ¨ä¸‹ä¸€ç‰ˆæœ¬ä¸­è®¸å¤šäº‹å¯èƒ½ä¼šä¸ä¸€æ ·ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;##æ€»ç»“&lt;/p&gt;
&lt;p&gt;runtimeåˆ°è¿™é‡Œï¼Œå¤§æ¦‚è®²äº†ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼Œæ–¹æ³•è½¬å‘å’Œå…³è”å¯¹è±¡ã€‚è§‰å¾—è¿˜æ˜¯ä¸å¤Ÿï¼Œå› ä¸ºå¾ˆå¤šä¸œè¥¿å†™èµ·æ¥å‘ç°è‡ªå·±ä¹Ÿä¸æ˜¯å¾ˆäº†è§£ï¼Œæš‚ä¸”åšä¸€ä¸ªç¬”è®°ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæ„Ÿè°¢å—å³°å­ï¼Œå†™å¾—runtimeæ•™ç¨‹éå¸¸è¯¦ç»†ï¼Œç»™äº†æˆ‘å¾ˆå¤šå¸®åŠ©ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡å‚è€ƒäº†å¤§é‡ä¸‹é¢ä¸‰ç¯‡æ–‡ç« çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://southpeak.github.io/blog/2014/11/06/objective-c-runtime-yun-xing-shi-zhi-si-:method-swizzling/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://southpeak.github.io/blog/2014/11/03/objective-c-runtime-yun-xing-shi-zhi-san-:fang-fa-yu-xiao-xi-zhuan-fa/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://southpeak.github.io/blog/2014/10/30/objective-c-runtime-yun-xing-shi-zhi-er-:cheng-yuan-bian-liang-yu-shu-xing/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ä»å¼€å§‹å†™åšå®¢çš„æ—¶å€™ï¼Œå°±ç”±ä¸€ä¸ªå‡†å¤‡æŠŠRuntimeå¥½å¥½ç ”ç©¶æ•´ç†å‡ºæ¥ã€‚åæ¥å‘ç°å†™runtimeå¾—æ–‡ç« å¤ªå¤šäº†ï¼Œè€Œä¸”è‡ªå·±ç ”ç©¶çš„ä¹Ÿç®—ä¸ä¸Šæœ‰å¤šä¹ˆæ·±å…¥ï¼Œå†™å‡ºæ¥ä¼°è®¡å¾ˆå¤šé”™è¯¯- â€”â€“ï¼ˆå› ä¸ºä¸»è¦æ˜¯ç»™è‡ªå·±çœ‹å¾—ï¼‰ã€‚æœ€è¿‘åœ¨é¡¹ç›®ä¸­ï¼Œç¬¬ä¸€æ¬¡ç”¨åˆ°äº†runtimeè§£å†³äº†ä¸€ä¸ªå®é™…é—®é¢˜ï¼Œè¿™å¯å‘æˆ‘ï¼Œæˆ‘çš„æ–‡ç« åº”è¯¥ä»
    
    </summary>
    
      <category term="Objective-C" scheme="http://csbzhixing.github.io/categories/Objective-C/"/>
    
    
  </entry>
  
  <entry>
    <title>list</title>
    <link href="http://csbzhixing.github.io/2015/10/25/list/"/>
    <id>http://csbzhixing.github.io/2015/10/25/list/</id>
    <published>2015-10-25T15:38:26.000Z</published>
    <updated>2015-10-27T16:42:39.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;å¼€å§‹å†…åŠŸï¼&quot;&gt;&lt;a href=&quot;#å¼€å§‹å†…åŠŸï¼&quot; class=&quot;headerlink&quot; title=&quot;å¼€å§‹å†…åŠŸï¼&quot;&gt;&lt;/a&gt;å¼€å§‹å†…åŠŸï¼&lt;/h1&gt;&lt;p&gt;å‰å‡ æ—¥å’Œå‰è€å¤§è°ˆäº†è°ˆï¼Œæ€»ç»“èµ·æ¥å†…åŠŸä¸èƒ½ä¸ç»ƒã€‚å®ä¹ ä»¥æ¥æœ‰ä¸‰æ¬¡æƒ³å¥½å¥½å¤ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•ï¼Œä½†æ˜¯æœ€åéƒ½åŠé€”è€ŒåºŸã€‚ç°åœ¨ä¸åº”è¯¥å†æœ‰ä»»ä½•ç†ç”±äº†ï¼Œä¸ç„¶ä»¥åå†ä¹Ÿæ²¡æœ‰æ—¶é—´å¥½å¥½å»å¤ä¹ è¿™äº›ä¸œè¥¿ã€‚ä»ç°åœ¨å¼€å§‹åˆ·å¥½é¢˜ç›®ï¼Œæ‰“å¥½åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;##é“¾è¡¨&lt;/p&gt;
&lt;p&gt;é“¾è¡¨æ˜¯çº¿æ€§è¡¨çš„ä¸€ç§ã€‚&lt;/p&gt;
&lt;p&gt;çº¿æ€§è¡¨æ˜¯æœ€ç®€å•åŸºç¡€çš„ä¸€ç§æ•°æ®ç»“æ„ã€‚çº¿æ€§è¡¨ä¸­çš„æ•°æ®å…ƒç´ ä¹‹é—´çš„å…³ç³»æ˜¯ä¸€å¯¹ä¸€çš„ï¼Œé™¤äº†å¤´å…ƒç´ å’Œå°¾å…ƒç´ ä¹‹å¤–ï¼Œå…¶ä»–å…ƒç´ é¦–å°¾ç›¸è¿ã€‚çº¿æ€§è¡¨æœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é¡ºåºå­˜å‚¨æ–¹å¼&lt;/li&gt;
&lt;li&gt;é“¾å¼å­˜å‚¨æ–¹å¼&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ•°ç»„æ˜¯å…¸å‹çš„é¡ºåºå­˜å‚¨æ–¹å¼ã€‚é“¾è¡¨æ˜¯å…¸å‹çš„é“¾å¼å­˜å‚¨æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;é“¾å¼å­˜å‚¨ç»“æ„ï¼ŒæŒ‡çš„æ˜¯ç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ åœ¨å†…å­˜ä¸­å¯èƒ½ä¸æ˜¯ç›¸é‚»çš„ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªæŒ‡é’ˆåŸŸï¼ŒæŒ‡é’ˆåŸŸå­˜æ”¾çš„æ˜¯ä¸‹ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚&lt;/p&gt;
&lt;p&gt;é“¾å¼ç»“æ„çš„ä¼˜ç¼ºç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ä¼˜ç‚¹&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ’å…¥å’Œåˆ é™¤çš„å¤æ‚åº¦ä¸ºO(1)&lt;/li&gt;
&lt;li&gt;ä¸ä¼šæµªè´¹å¤ªå¤šå†…å­˜ï¼Œåœ¨éœ€è¦æ·»åŠ å…ƒç´ çš„æ—¶å€™æ‰ä¼šç”³è¯·å†…å­˜ï¼Œåˆ é™¤å…ƒç´ åé‡Šæ”¾å†…å­˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç¼ºç‚¹&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è®¿é—®å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦æœ€åä¸ºO(N)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é“¾è¡¨å°±æ˜¯é“¾å¼å­˜å‚¨çš„çº¿æ€§è¡¨ã€‚æ ¹æ®æŒ‡é’ˆåŸŸçš„ä¸åŒï¼Œé“¾è¡¨åˆ†ä¸ºå•é¡¹é“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨ï¼Œå¾ªç¯é“¾è¡¨ç­‰ç­‰&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªç®€å•çš„Listå®šä¹‰&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;C&quot;&gt;struct list {
int ver;
struct list *next;
};
typedef struct list *listLink;
// æ’å…¥
void insert_list(listLink *, int);
// æ‰“å°
void print_list(listLink *, int);
// é“¾è¡¨é•¿
int list_length(listLink);
// æœç´¢ä¸€ä¸ªç‰¹å®šçš„å€¼
listLink search_list(listLink, int);
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å››ä¸ªæ–¹æ³•çš„å®ç°&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14459585444278.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;##æŒ‡é’ˆå¸¸å‡ºç°çš„é—®é¢˜&lt;/p&gt;
&lt;p&gt;###åè½¬é“¾è¡¨&lt;/p&gt;
&lt;p&gt;åè½¬é“¾è¡¨ï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µè®¨è®ºï¼Œå•å‘é“¾è¡¨å’ŒåŒå‘é“¾è¡¨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å•å‘é“¾è¡¨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;è€ƒè™‘åˆ°è®¿é—®æŸä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œè¦æ£€æŸ¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;è¦æŠŠåè½¬åçš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¤´èŠ‚ç‚¹ï¼‰çš„æŒ‡é’ˆæŒ‡å‘null&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®ç°ä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14459590472638.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒå‘é“¾è¡¨&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŒå‘é“¾è¡¨æ¯”è¾ƒéº»çƒ¦çš„åœ°æ–¹åœ¨äºNextå’Œpreè¦å‘¼å”¤ï¼Œéœ€è¦ä¸»è¦å½“å‰èŠ‚ç‚¹å’Œä¸Šä¸ªèŠ‚ç‚¹çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;###åˆ é™¤èŠ‚ç‚¹&lt;/p&gt;
&lt;p&gt;åˆ é™¤èŠ‚ç‚¹å¿…é¡»è¦çŸ¥é“è¢«åˆ é™¤èŠ‚ç‚¹çš„å‰ç½®èŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14459596886157.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;###å¾ªç¯é“¾è¡¨&lt;/p&gt;
&lt;p&gt;å¾ªç¯é“¾è¡¨è¡¨ç°äºå°¾å…ƒç´ çš„nextæŒ‡é’ˆæŒ‡å‘headå…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡å¿«æ…¢æŒ‡é’ˆå»æ ¡éªŒã€‚å…·ä½“çš„æ–¹æ³•ä¼šåœ¨ä¸‹é¢çš„é“¾è¡¨çš„æŠ€å·§ä¸­æåˆ°.&lt;/p&gt;
&lt;h2 id=&quot;é“¾è¡¨çš„æŠ€å·§&quot;&gt;&lt;a href=&quot;#é“¾è¡¨çš„æŠ€å·§&quot; class=&quot;headerlink&quot; title=&quot;é“¾è¡¨çš„æŠ€å·§&quot;&gt;&lt;/a&gt;é“¾è¡¨çš„æŠ€å·§&lt;/h2&gt;&lt;p&gt;###é²æ£’æ€§&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“è®¿é—®é“¾è¡¨ä¸­æŸä¸ªèŠ‚ç‚¹çš„nextèŠ‚ç‚¹çš„æ—¶å€™ï¼Œä¸€ç‚¹è¦å…ˆåˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºã€‚&lt;/li&gt;
&lt;li&gt;å…¨éƒ¨æ“ä½œç»“æŸåï¼Œåˆ¤æ–­æ˜¯å¦æœ‰ç¯ã€‚è‹¥æœ‰ç¯ï¼Œåˆ™ç½®å…¶ä¸­ä¸€ç«¯ä¸ºNull;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;Dummy-Node&quot;&gt;&lt;a href=&quot;#Dummy-Node&quot; class=&quot;headerlink&quot; title=&quot;Dummy Node&quot;&gt;&lt;/a&gt;Dummy Node&lt;/h3&gt;&lt;p&gt;å‡èŠ‚ç‚¹ï¼Œä¼ªå¤´èŠ‚ç‚¹ã€‚Dummy &lt;code&gt;Node&lt;/code&gt; å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªå‡çš„å¤´ç»“ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ª&lt;code&gt;Dummy Node&lt;/code&gt; ï¼Œä½¿ä»–çš„nextæŒ‡é’ˆæŒ‡å‘Head nodeã€‚ä½¿ç”¨&lt;code&gt;Dummy Node&lt;/code&gt;ç›®çš„æ˜¯ï¼Œåœ¨å•å‘é“¾è¡¨ä¸­ï¼Œä¿æ­£headä¸ä¼šå†åˆ é™¤æ“ä½œä¸­ä¸¢å¤±ã€‚æ­¤å¤–ï¼Œæ¯”è¾ƒç‰¹æ®Šçš„æ–¹æ³•æ˜¯ç”¨æ¥è¿›è¡Œåˆ é™¤headã€‚&lt;/p&gt;
&lt;p&gt;Dummy Nodeå¯ä»¥å¤„ç†å¯¹äºhead Nodeå˜åŒ–çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¿«æ…¢æŒ‡é’ˆ&quot;&gt;&lt;a href=&quot;#å¿«æ…¢æŒ‡é’ˆ&quot; class=&quot;headerlink&quot; title=&quot;å¿«æ…¢æŒ‡é’ˆ&quot;&gt;&lt;/a&gt;å¿«æ…¢æŒ‡é’ˆ&lt;/h2&gt;&lt;p&gt;å¿«æ…¢æŒ‡é’ˆå¼è§£å†³å¾ˆå¤šé“¾è¡¨çš„é—®é¢˜çš„å…³é”®ã€‚å¿«æ…¢æŒ‡çš„æ˜¯æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨çš„æ­¥é•¿ã€‚å¸¸ç”¨çš„å¿«æŒ‡é’ˆæ­¥é•¿ä¸º2ï¼Œæ…¢æŒ‡é’ˆæ­¥é•¿ä¸º1.å¿«æ…¢æŒ‡é’ˆåŒæ—¶ä»å¤´ç»“ç‚¹å¼€å§‹ç§»åŠ¨é™ªä½ è¿‡ã€‚&lt;/p&gt;
&lt;p&gt;å¿«æ…¢æŒ‡é’ˆçš„åº”ç”¨å¯ä»¥è§£å†³ä»¥ä¸‹é—®é¢˜&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¿«é€Ÿæ‰¾å‡ºä¸ºæ­¢é•¿åº¦çš„é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ã€‚æˆ‘ä»¬è®©å¿«æŒ‡é’ˆçš„æ­¥é•¿æ˜¯æ…¢æŒ‡é’ˆçš„ä¸¤å€ã€‚å½“å¿«æŒ‡é’ˆåˆ°è¾¾å°¾èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ…¢æŒ‡é’ˆæ‰€æŒ‡å‘çš„èŠ‚ç‚¹å°±æ˜¯ä¸­é—´èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­å•å‘é“¾è¡¨æ˜¯å¦æˆç¯ã€‚åŒæ ·çš„åŸç†ï¼Œå¦‚æœå¿«æŒ‡é’ˆ &lt;code&gt;*fase =NULL&lt;/code&gt;çš„æ—¶å€™ï¼Œè¯´æ˜é“¾è¡¨æ˜¯NULLç»“å°¾çš„ã€‚å¦‚æœå¿«æŒ‡é’ˆç­‰äºæ…¢æŒ‡é’ˆçš„æ—¶å€™ï¼Œåˆ™è¯´æ˜è¯¥é“¾è¡¨æˆç¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å¼€å§‹å†…åŠŸï¼&quot;&gt;&lt;a href=&quot;#å¼€å§‹å†…åŠŸï¼&quot; class=&quot;headerlink&quot; title=&quot;å¼€å§‹å†…åŠŸï¼&quot;&gt;&lt;/a&gt;å¼€å§‹å†…åŠŸï¼&lt;/h1&gt;&lt;p&gt;å‰å‡ æ—¥å’Œå‰è€å¤§è°ˆäº†è°ˆï¼Œæ€»ç»“èµ·æ¥å†…åŠŸä¸èƒ½ä¸ç»ƒã€‚å®ä¹ ä»¥æ¥æœ‰ä¸‰æ¬¡æƒ³å¥½å¥½å¤ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•ï¼Œä½†æ˜¯æœ€åéƒ½åŠé€”è€ŒåºŸã€‚ç°åœ¨ä¸åº”è¯¥å†
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://csbzhixing.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
  </entry>
  
  <entry>
    <title>AFNetworking å­¦ä¹ ç¬”è®° 1</title>
    <link href="http://csbzhixing.github.io/2015/10/23/afnetworking-1/"/>
    <id>http://csbzhixing.github.io/2015/10/23/afnetworking-1/</id>
    <published>2015-10-23T02:31:15.000Z</published>
    <updated>2015-10-23T02:37:00.000Z</updated>
    
    <content type="html">&lt;p&gt;##ä»3.0å¼€å§‹&lt;/p&gt;
&lt;p&gt;ä¸€è½¬çœ¼ï¼ŒAFå·²ç»æ›´æ–°åˆ°äº†3.0ç‰ˆæœ¬ã€‚ç›®å‰cocoapodsä¸Šçš„æœ€æ–°ç‰ˆæœ¬æ˜¯3.0 beta1ã€‚åœ¨3.0çš„ç‰ˆæœ¬é‡Œé¢ï¼ŒAFå…¨é¢åœ°ä½¿ç”¨&lt;code&gt;NSURLSession&lt;/code&gt;ä»£æ›¿äº†&lt;code&gt;NSURLConnection&lt;/code&gt;ã€‚ä¹‹å‰èŠ±äº†ä¸€äº›æ—¶é—´å­¦ä¹ &lt;code&gt;NSURLSession&lt;/code&gt;ï¼Œåœ¨è¿™é‡Œçš„å­¦ä¹ ç»ˆäºæ´¾ä¸Šäº†ç”¨åœºã€‚åœ¨è¿™é‡Œä¸»è¦å­¦ä¹ 3.0ç‰ˆæœ¬çš„ä½¿ç”¨ã€‚å¸Œæœ›åœ¨é¡¹ç›®ä¸­èƒ½å¤Ÿé¡ºåˆ©åœ°è¿‡åº¦åˆ°AFNetwoking 3.0ç‰ˆæœ¬ã€‚æ­¤å¤–ï¼Œéšç€Objective-cæ…¢æ…¢è¢«Swiftæ›¿ä»£ï¼ŒAFNetworking 3.0å¯èƒ½æ˜¯æœ€åä¸€ä¸ªå¤§ç‰ˆæœ¬æ›´æ–°ã€‚æœ¬æ–‡ä¼šä¸€ç›´éšç€ANçš„æ›´æ–°ç»§ç»­æ›´æ–°ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸æ–­å­¦ä¹ çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;##ç»“æ„&lt;/p&gt;
&lt;p&gt;åœ¨3.0æ—¶ä»£ï¼ŒAFNç²¾ç®€äº†ç»“æ„ï¼Œå…¨é¢ä½¿ç”¨äº†&lt;code&gt;NSURLSession&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14451531667191.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;beta1é‡Œé¢åªå‰©ä¸‹äº†å½“å‰å‡ ä¸ªManagerã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;AFHTTPSessionManager&lt;/code&gt;æ˜¯&lt;code&gt;AFURLSessionManager&lt;/code&gt;çš„å­ç±»ã€‚&lt;/p&gt;
&lt;p&gt;##AFURLSessionManager&lt;/p&gt;
&lt;p&gt;&lt;code&gt;AFURLSessionManager&lt;/code&gt;å®ç°äº†ä»¥ä¸‹å‡ ç§&lt;code&gt;NSURLSession&lt;/code&gt;çš„ä»£ç†æ–¹æ³•&lt;/p&gt;
&lt;h4 id=&quot;NSURLSessionDelegate&quot;&gt;&lt;a href=&quot;#NSURLSessionDelegate&quot; class=&quot;headerlink&quot; title=&quot;NSURLSessionDelegate&quot;&gt;&lt;/a&gt;&lt;code&gt;NSURLSessionDelegate&lt;/code&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;URLSession:didBecomeInvalidWithError:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;URLSession:didReceiveChallenge:completionHandler:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;URLSessionDidFinishEventsForBackgroundURLSession:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;NSURLSessionTaskDelegate&quot;&gt;&lt;a href=&quot;#NSURLSessionTaskDelegate&quot; class=&quot;headerlink&quot; title=&quot;NSURLSessionTaskDelegate&quot;&gt;&lt;/a&gt;&lt;code&gt;NSURLSessionTaskDelegate&lt;/code&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;URLSession:willPerformHTTPRedirection:newRequest:completionHandler:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;URLSession:task:didReceiveChallenge:completionHandler:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;URLSession:task:didSendBodyData:totalBytesSent:totalBytesExpectedToSend:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;URLSession:task:didCompleteWithError:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;NSURLSessionDataDelegate&quot;&gt;&lt;a href=&quot;#NSURLSessionDataDelegate&quot; class=&quot;headerlink&quot; title=&quot;NSURLSessionDataDelegate&quot;&gt;&lt;/a&gt;&lt;code&gt;NSURLSessionDataDelegate&lt;/code&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;URLSession:dataTask:didReceiveResponse:completionHandler:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;URLSession:dataTask:didBecomeDownloadTask:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;URLSession:dataTask:didReceiveData:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;URLSession:dataTask:willCacheResponse:completionHandler:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;NSURLSessionDownloadDelegate&quot;&gt;&lt;a href=&quot;#NSURLSessionDownloadDelegate&quot; class=&quot;headerlink&quot; title=&quot;NSURLSessionDownloadDelegate&quot;&gt;&lt;/a&gt;&lt;code&gt;NSURLSessionDownloadDelegate&lt;/code&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;URLSession:downloadTask:didFinishDownloadingToURL:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;URLSession:downloadTask:didWriteData:totalBytesWritten:totalBytesWritten:totalBytesExpectedToWrite:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;URLSession:downloadTask:didResumeAtOffset:expectedTotalBytes:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;###æˆå‘˜&lt;/p&gt;
&lt;p&gt;####å±æ€§&lt;/p&gt;
&lt;p&gt;åœ¨&lt;code&gt;AFURLSessionManager&lt;/code&gt;ä¸­ï¼Œä¸»è¦çš„ä¸‰ä¸ªå±æ€§å¦‚ä¸‹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14451544109695.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;session&lt;/code&gt;å®ç°äº†ä¼šè¯ï¼Œ&lt;code&gt;operationQueue&lt;/code&gt;æ˜¯ä¸€ä¸ªæ“ä½œé˜Ÿåˆ—ã€‚&lt;code&gt;responseSerializer&lt;/code&gt;æ˜¯å®ç°äº†&lt;code&gt;AFURLResponseSerialization&lt;/code&gt;åè®®çš„ä¸€ä¸ªå¯¹è±¡ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Managerä¸­è¿˜åŒ…æ‹¬äº†å®‰å…¨åè®®çš„å¯¹è±¡å’Œè¿é€šæ€§çš„å¯¹è±¡ã€‚è¿™ä¸¤ä¸ªç±»å°†åœ¨åé¢è°ˆåˆ°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14451545558576.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä¸‹é¢æ˜¯Taskçš„å†…å®¹ï¼ŒåŒ…å«ä¸å½“å‰&lt;code&gt;Session&lt;/code&gt;ä¸­&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14451547233232.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å›è°ƒå—é˜Ÿåˆ—ï¼ŒåŒ…æ‹¬äº†åœ¨ä¸»é˜Ÿåˆ—å’Œç§æœ‰é˜Ÿåˆ—çš„ä¸¤ä¸ªéƒ¨åˆ†&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14451548418504.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;####æ–¹æ³•&lt;/p&gt;
&lt;p&gt; åˆå§‹åŒ–æ–¹æ³•&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;/media/14455211888103.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ª&lt;code&gt;NSURLSessionDataTask&lt;/code&gt;æ•°æ®æ€§ä»»åŠ¡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14455212385758.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;åˆ›å»º&lt;code&gt;`NSURLSessionUploadTask&lt;/code&gt; ä¸Šä¼ ä»»åŠ¡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14455213126912.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;/media/14455213190110.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;åˆ›å»º&lt;code&gt;NSURLSessionDownloadTask&lt;/code&gt; ä¸‹è½½ä»»åŠ¡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14455213738134.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;/media/14455213826398.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;è·å¾—ä¸€ä¸ªç‰¹å®šä»»åŠ¡çš„&lt;code&gt;progressè¿›åº¦&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14455214651069.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;/media/14455214692883.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;/media/14455214742512.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;code&gt;Session Delegate Callbacks è®¾ç½®ä¼šè¯ä»£ç†å›è°ƒ&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14455217046547.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;/media/14455217113671.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Task Delegate Callbacks è®¾ç½®ä»»åŠ¡ä»£ç†å›è°ƒ&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å½“ä»»åŠ¡éœ€è¦ä¸€ä¸ªæ–°çš„è¯·æ±‚ä½“å‘é€ç»™æœåŠ¡å™¨çš„æ—¶å€™ã€‚&lt;br&gt;&lt;img src=&quot;/media/14455219470133.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å½“HTTPè¯·æ±‚å›è°ƒæœ‰é‡å®šå‘çš„çš„è¯è®¾ç½®è¿™ä¸ªBlock&lt;br&gt;&lt;img src=&quot;/media/14455219533707.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å½“ä¸€ä¸ªè¯·æ±‚éœ€è¦ç‰¹åˆ«çš„é‰´æƒçš„æ—¶å€™è®¾ç½®è¿™ä¸ªchallenge&lt;br&gt;&lt;img src=&quot;/media/14455219599178.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®ä¸€ä¸ªblockå»è¿½è¸ªä¸Šä¼ è¿›åº¦&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14455658294340.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®ä¸€ä¸ªblockå½“ä»»åŠ¡å®Œæˆåæ‰§è¡Œ&lt;br&gt;&lt;img src=&quot;/media/14455658635389.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;####&lt;code&gt;Setting Data Task Delegate Callbacks è®¾ç½®æ•°æ®ä»»åŠ¡ä»£ç†çš„å›è°ƒ&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®ä¸€ä¸ªåœ¨æ•°æ®ä»»åŠ¡è·å¾—responseçš„æ—¶å€™å›è°ƒblock&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14455662011592.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®ä¸€ä¸ªblockå½“æ•°æ®ä»»åŠ¡å˜æˆä¸‹è½½çš„ä»»åŠ¡çš„æ—¶å€™æ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14455662317310.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®ä¸€ä¸ªblockå½“æ•°æ®ä»»åŠ¡è·å¾—åˆ°æ•°æ®çš„æ—¶å€™&lt;br&gt;&lt;img src=&quot;/media/14455662434172.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®ä¸€ä¸ªblockç»å¯¹æ˜¯å¦ç¼“å­˜æ•°æ®ä»»åŠ¡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14455662958106.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;####&lt;code&gt;Download Task Delegate Callbacks ä¸‹è½½ä»»åŠ¡ä»£ç†å›è°ƒ&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®blockå½“ä¸‹è½½ä»»åŠ¡å®Œæˆä¸‹è½½å&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14455666105437.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®blockå»è¿½è¸ªä¸‹è½½ä»»åŠ¡è¿›åº¦æƒ…å†µ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14455666301025.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®blockå½“ä¸‹è½½ä»»åŠ¡æ‰§è¡Œ/æ¢å¤çš„æ—¶å€™ æ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14455666958363.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¤´æ–‡ä»¶çš„å†…å®¹åŸºæœ¬å°±æ˜¯ä»¥ä¸Šçš„äº†ã€‚å¯ä»¥çœ‹åˆ°æ•´ä¸ªAFçš„ä½“ç³»éå¸¸æ¸…æ™°å®Œæ•´ï¼Œæ²¡æœ‰å¤šä½™çš„ä¸œè¥¿ï¼Œå¤´æ–‡ä»¶åªæš´éœ²äº†åº”è¯¥æš´éœ²çš„ä¸œè¥¿ï¼Œå€¼å¾—æˆ‘ä»¬å»å­¦ä¹ ã€‚&lt;/p&gt;
&lt;p&gt;##ä½¿ç”¨çš„ä¾‹å­&lt;/p&gt;
&lt;p&gt;###ä½¿ç”¨&lt;code&gt;AFURLSessionManager&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä»æºç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œ&lt;code&gt;AFURLSessionManager&lt;/code&gt;å®ç°äº†&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Objective-c&quot;&gt;NSURLSessionDelegate, NSURLSessionTaskDelegate, NSURLSessionDataDelegate, NSURLSessionDownloadDelegate, NSSecureCoding, NSCopying
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é¦–å…ˆéœ€è¦è®¾ç½®urlå’ŒNSURLConfirguration&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæ˜¯ä½¿ç”¨ç™¾åº¦APIå•†åº—çš„å…¬å¼€API&lt;br&gt;&lt;img src=&quot;/media/14453928846040.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç„¶ååˆå§‹åŒ–Manager&lt;img src=&quot;/media/14453929237373.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®ResponseSerializer&lt;br&gt;&lt;img src=&quot;/media/14453931412125.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;åˆå§‹åŒ–request&lt;br&gt;&lt;img src=&quot;/media/14453932169242.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¯¹requestè¿›è¡Œç›¸å…³è®¾ç½®&lt;br&gt;&lt;img src=&quot;/media/14453932396509.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®requestç”Ÿæˆå¯¹åº”çš„&lt;code&gt;NSURLSessionTask&lt;/code&gt;ã€‚&lt;br&gt;&lt;img src=&quot;/media/14453935717679.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œä»»åŠ¡&lt;br&gt;&lt;img src=&quot;/media/14453936154108.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ¥çœ‹çœ‹æ‰§è¡Œåçš„ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14453937344699.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œç”±äºä½¿ç”¨çš„&lt;code&gt;AFHTTPResponseSerializer&lt;/code&gt;(APIçš„é—®é¢˜ï¼Œä»…ä»…æ”¯æŒtext/plain)æ‰€ä»¥åœ¨è·å–çš„æ•°æ®åï¼Œæˆ‘ä»¬è‡ªå·±è¦jsonåºåˆ—åŒ–ã€‚å¦‚æœæ˜¯è®¾è®¡å¥½çš„API,ç›´æ¥ä½¿ç”¨&lt;code&gt;AFJSONRequestSerializer&lt;/code&gt;å°±å¯ä»¥åœ¨å›è°ƒä¸­è·å–åˆ°jsonæ ¼å¼çš„æ•°æ®äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªä½¿ç”¨è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é…ç½®ä¸åŒè®¾ç½®ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;##ä»3.0å¼€å§‹&lt;/p&gt;
&lt;p&gt;ä¸€è½¬çœ¼ï¼ŒAFå·²ç»æ›´æ–°åˆ°äº†3.0ç‰ˆæœ¬ã€‚ç›®å‰cocoapodsä¸Šçš„æœ€æ–°ç‰ˆæœ¬æ˜¯3.0 beta1ã€‚åœ¨3.0çš„ç‰ˆæœ¬é‡Œé¢ï¼ŒAFå…¨é¢åœ°ä½¿ç”¨&lt;code&gt;NSURLSession&lt;/code&gt;ä»£æ›¿äº†&lt;code&gt;NSURLConnection&lt;/code&gt;ã€‚ä¹‹
    
    </summary>
    
      <category term="Network" scheme="http://csbzhixing.github.io/categories/Network/"/>
    
    
  </entry>
  
  <entry>
    <title>æ”¹å˜ï¼Œä¸€åˆ»éƒ½ä¸èƒ½åœæ­¢</title>
    <link href="http://csbzhixing.github.io/2015/10/09/other/"/>
    <id>http://csbzhixing.github.io/2015/10/09/other/</id>
    <published>2015-10-09T05:36:46.000Z</published>
    <updated>2015-10-09T06:03:11.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;æ‚è°ˆï¼Œç”Ÿæ´»ï¼Œå­¦ä¹ &quot;&gt;&lt;a href=&quot;#æ‚è°ˆï¼Œç”Ÿæ´»ï¼Œå­¦ä¹ &quot; class=&quot;headerlink&quot; title=&quot;æ‚è°ˆï¼Œç”Ÿæ´»ï¼Œå­¦ä¹ &quot;&gt;&lt;/a&gt;æ‚è°ˆï¼Œç”Ÿæ´»ï¼Œå­¦ä¹ &lt;/h1&gt;&lt;p&gt;##ä»iTunes storeè¯´èµ·&lt;/p&gt;
&lt;p&gt;9.30å·å‡Œæ™¨ï¼Œåœ¨æˆ‘åŠç¡åŠé†’çš„æ—¶å€™ï¼Œå‡†å¤‡æ›´æ–°ä¸‹ä¸€äº›APPã€‚ç„¶åå°±å‘ç°äº†iTunes æé†’æˆ‘è¦åŒæ„æ–°çš„åè®®ï¼Œå½“æ—¶å¾ˆå›°å°±ç¡ç€äº†ï¼Œæ²¡æœ‰æƒ³å¤ªå¤šã€‚æ—©ä¸Šèµ·æ¥ï¼Œå‘ç°apple musicå¯ä»¥ç”¨äº†ï¼æ²¡é”™ï¼å…è´¹ä¸‰ä¸ªæœˆï¼Œç»­è´¹åå—é’±ä¸€ä¸ªæœˆï¼ç„¶åçœ‹äº†ä¸‹ç”µå½±ã€‚ä¸€å †ä¸€å—é’±çš„æ­£ç‰ˆç”µå½±ä½ ç›¸ä¿¡å—ï¼Ÿï¼Ÿï¼ã€‚&lt;/p&gt;
&lt;p&gt;å¥½å§ï¼Œä¸ºä½•æˆ‘é‚£ä¹ˆæ¿€åŠ¨å—ï¼Œå¯¹äºå¾ˆå¤šäººæ˜¯ä¸ç†è§£çš„ã€‚ç›¸å¯¹äºä¸€äº›å¿…é¡»æ¶ˆè´¹çš„å•†å“ã€‚å›¾ä¹¦ï¼ŒéŸ³ä¹ï¼Œç”µå½±ï¼Œæ¸¸æˆï¼Œè½¯ä»¶è¿™äº›è™šæ‹ŸæœåŠ¡ï¼Œåœ¨è®¸å¤šäººçœ¼é‡Œå°±æ˜¯å…è´¹çš„åˆé¤ã€‚ä»æ¥æ²¡æƒ³åˆ°è¿‡æˆ‘ä»¬ä¸ºä½•è¦å»ä¸ºè¿™äº›ä¸œè¥¿æé’±ã€‚æ‰€ä»¥ï¼Œå¾ˆå¤šäººå¹¶ä¸çœ‹å¥½è‹¹æœè¿™æ¬¡åœ¨å¤§é™†æ¨è¡Œçš„è¿™äº›æœåŠ¡ã€‚ç„¶è€Œæˆ‘è®¤ä¸ºï¼Œè‹¹æœè¿™æ˜¯ä»¥ä¸€å·±ä¹‹åŠ›ï¼Œå°†è¦æ”¹å˜ä¸­å›½äººå¯¹ç‰ˆæƒçš„è®¤è¯†ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Ÿä»·æ ¼è¯´æ˜ä¸€åˆ‡ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä»Šï¼Œå‡ºå»åƒé¡¿é¥­ä¸€ä¸ªäººåŠ¨ä¸åŠ¨ä¸Šç™¾ï¼Œä¸€æ¯æœæ±å¥¶èŒ¶éƒ½å‡ åå—é’±çš„æ—¶ä»£ï¼Œå´è¿˜åœ¨ä¸ºä¸€ä¸ªä¼˜ç§€APPå‡ åå—é’±è€Œçƒ¦æ¼ã€‚å…¥æ‰‹æ–°æ‰‹æœºåï¼Œä¹°äº†å‡ æ¬¾APPã€‚å…¶ä¸­æœ‰ä¸€ä¸ªç¬¬ä¸‰æ–¹å¾®åšå®¢æˆ·ç«¯å¢¨å®¢ã€‚æˆ‘å®¶é‡Œå¾ˆä¸ç†è§£ä¸ºä»€ä¹ˆæœ‰å¾®åšå®¢æˆ·ç«¯æˆ‘è¿˜ä¼šå»é€‰æ‹©æé’±å»ä¹°ã€‚æˆ‘è§‰å¾—ï¼Œä»…ä»…æ˜¯å¹²å‡€èˆ’é€‚çš„UIè®¾è®¡å°±è¶³å¤Ÿæˆ‘èŠ±è¿™ä¸ªé’±ï¼Œè€Œä¸”å†ä¸ç”¨çœ‹åˆ°ä¸€å¤§å †ä¹±ä¸ƒå…«ç³Ÿçš„æ¨å¹¿ï¼Œèƒ½å¤Ÿæœ€å¿«çš„çœ‹åˆ°è‡ªå·±éœ€è¦çš„å†…å®¹ï¼Œè¿™ä¸€åˆ‡ä»…ä»…18å—é’±ï¼Œéš¾é“ä¸æ¯”ä¹°ä¸€åŒ…çƒŸï¼Œå–ä¸€æ¯æœæ±æ¥çš„å€¼å¾—å—ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;æ–°çš„å·¥ä½œï¼Œä¸€æ ·çš„ç”Ÿæ´»&quot;&gt;&lt;a href=&quot;#æ–°çš„å·¥ä½œï¼Œä¸€æ ·çš„ç”Ÿæ´»&quot; class=&quot;headerlink&quot; title=&quot;æ–°çš„å·¥ä½œï¼Œä¸€æ ·çš„ç”Ÿæ´»&quot;&gt;&lt;/a&gt;æ–°çš„å·¥ä½œï¼Œä¸€æ ·çš„ç”Ÿæ´»&lt;/h2&gt;&lt;p&gt;å›½åº†ç¬¬ä¸€å¤©ï¼ŒæŠŠå®¿èˆå‡ ä¹æ‰€æœ‰çš„ä¸œè¥¿éƒ½å¸¦å›å®¶äº†ã€‚8å·åˆ°äº†æ–°å…¬å¸æŠ¥é“ã€‚åœ¨å›½åº†çš„æ—¶å€™ï¼Œå¥½å¥½çš„å›é¡¾äº†ä¸‹ä»¥å‰çš„å •è½çš„ç”Ÿæ´»ï¼Œé¡ºä¾¿æ•´ç†äº†ä¸‹è‡ªå·±çš„å­¦ä¹ å’Œå·¥ä½œä¸Šçš„é—®é¢˜ã€‚å‘ç°è‡ªå·±ä»»ç„¶æœ‰è®¸å¤šåœ°æ–¹çš„æ¬ ç¼ºã€‚ç‰›é€¼çš„äººï¼Œæ€»æ˜¯æœ‰å¼ºè¿«ç—‡çš„ã€‚è€Œæˆ‘ï¼Œä¼¼ä¹ä¸èƒ½ç§°ä¸ºç‰›é€¼çš„äººï¼Œå°±æ˜¯å› ä¸ºæ²¡æœ‰å¼ºè¿«ç—‡ã€‚é¢å¯¹ä»£ç ï¼Œèƒ½Copy/Pasteçš„è¯å°±åšäº†ï¼Œæ²¡æœ‰æƒ³åˆ°æ€ä¹ˆå»é‡æ„ï¼Œå»æ€è€ƒæ€ä¹ˆåšçš„æ›´å¥½ã€‚é¢å¯¹é‡å¤çš„ä¸œè¥¿ï¼Œæ€»æ˜¯å°½å¯èƒ½å»é¿å…ã€‚ä¸æ„¿æ„è€å¿ƒçš„å»è§£å†³çš„å›°éš¾çš„é—®é¢˜ï¼Œæ€»æ˜¯æƒ³ä¾èµ–å…¶ä»–çš„äººçš„ç»éªŒæ¥è§£å†³ã€‚ä¸è¸è¿‡åƒåƒä¸‡ä¸‡ä¸ªå‘ï¼Œæ€ä¹ˆèƒ½è¯´è‡ªå·±æ˜¯ä¸ªå‡ºè‰²çš„å·¥ç¨‹å¸ˆï¼Ÿæ€»ä¸èƒ½ä¸€è¾ˆå­éƒ½åœ¨æ¬ç –å§ã€‚å…»æˆå¼ºè¿«ç—‡ï¼Œæ‰ä¸ä¼šæ€»æ˜¯å›ºå®ˆåŸæ¥çš„ç”Ÿæ´»ã€‚&lt;/p&gt;
&lt;p&gt;##æ·±åº¦å’Œå¹¿åº¦&lt;/p&gt;
&lt;p&gt;åœ¨é¢è¯•çš„æ—¶å€™ï¼Œå’Œè¿™å®¶å…¬å¸çš„å›¢é˜Ÿè€å¤§æœ‰ä¸€ç•ªäº¤æµè®©æˆ‘æ„Ÿè§¦å¾ˆæ·±ã€‚ææŠ€æœ¯çš„ï¼Œé™¤äº†è¦æœ‰æ·±åº¦ï¼Œè¿˜è¦æœ‰å¹¿åº¦ã€‚å¯¹äºå¹¿åº¦å’Œæ·±åº¦ï¼Œä¹‹å‰ä¹Ÿå’ŒæŸè€å¤§è°ˆè¿‡ã€‚å…¨æ ˆå¥½ä¸å¥½ï¼Œè¿™ä¸ªè¯ææ€•åªæœ‰è‡ªå·±åˆ°äº†é‚£ä¸ªå±‚æ¬¡æ‰èƒ½è°ˆè°ˆã€‚æ¯•ç«Ÿç°åœ¨ï¼Œå“ªæ€•ä»…ä»…æ˜¯ä¸€ä¸ªæ–¹é¢ï¼Œè‡ªå·±éƒ½å¾ˆéš¾ä¿è¯èƒ½è§£å†³å¤šæ•°çš„é—®é¢˜ã€‚å¦‚ä»Šè¿›å…¥åˆ°äº†è¿™ä¸ªå›¢é˜Ÿï¼Œæ„Ÿå—åˆ°äº†èº«è¾¹çš„ç‰›äººè¿˜çœŸçš„å¾ˆå¤šï¼Œè®¸å¤šéƒ½æ˜¯å¤šé¢æ‰‹ã€‚çœ‹æ¥ä¸èƒ½ä»…ä»…æŠŠè‡ªå·±çš„å›°åœ¨ä¸€ä¸ªæ–¹é¢ã€‚å¤šå­¦å¤šç”¨ç»™ä½ æ‰æ˜¯ç‹é“ã€‚åé¢æ‰“ç®—æ•´ç†ä¸‹è‡ªå·±çš„æŠ€èƒ½æ ‘ï¼Œç„¶åæ ¹æ®è½»é‡æ¥è®¾è®¡è‡ªå·±çš„å­¦ä¹ è·¯çº¿ã€‚&lt;/p&gt;
&lt;p&gt;##è®©æ€ç»´å’Œèº«ä½“éƒ½è·‘èµ·æ¥å§ï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14443703278870.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;åšæŒè·‘æ­¥å·²ç»æœ‰äº†ä¸¤ä¸ªæœˆã€‚è™½ç„¶ä¸­é—´å› ä¸ºå„ç§åŸå› åœé¡¿äº†å‡ æ¬¡ï¼Œè¿™ä¸ªæœˆçš„è·‘é‡ä¸€ç›´æ²¡ä¸Šå»ã€‚ç„¶è€Œç°åœ¨å›ºå®šäº†ä¸‹æ¥ï¼Œä¹Ÿè¦æ¢å¤åˆ°ä¹‹å‰çš„è¿åŠ¨æ¨¡å¼ã€‚èº«ä½“çš„è¿åŠ¨ï¼Œä¹Ÿæ”¹å–„äº†æˆ‘æ€è€ƒçš„æ¨¡å¼ã€‚ä¸å†ä¼šå› ä¸ºå› ä¸ºå°å°çš„äº‹æƒ…è€Œå»åˆ†å¿ƒã€‚æ‰§è¡ŒåŠ›ä¹Ÿè¶Šæ¥è¶Šå¥½ï¼Œä¹Ÿå®¹æ˜“æ§åˆ¶è‡ªå·±çš„æƒ…ç»ªäº†ã€‚æ€ç»´è·Ÿéšçš„èº«ä½“ï¼Œä¸€èµ·å¥”è·‘çš„æ„Ÿè§‰ï¼Œå®åœ¨æ˜¯å¤ªå¥½ä¸è¿‡äº†ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åä¸€å¥è¯ï¼Œé€ç»™è‡ªå·±ã€‚&lt;/p&gt;
&lt;p&gt;##ä¸€åˆ‡ä¸å˜çš„ï¼Œå°±æ˜¯æ”¹å˜&lt;/p&gt;
&lt;p&gt;Ë™&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ‚è°ˆï¼Œç”Ÿæ´»ï¼Œå­¦ä¹ &quot;&gt;&lt;a href=&quot;#æ‚è°ˆï¼Œç”Ÿæ´»ï¼Œå­¦ä¹ &quot; class=&quot;headerlink&quot; title=&quot;æ‚è°ˆï¼Œç”Ÿæ´»ï¼Œå­¦ä¹ &quot;&gt;&lt;/a&gt;æ‚è°ˆï¼Œç”Ÿæ´»ï¼Œå­¦ä¹ &lt;/h1&gt;&lt;p&gt;##ä»iTunes storeè¯´èµ·&lt;/p&gt;
&lt;p&gt;9.30å·å‡Œæ™¨ï¼Œåœ¨æˆ‘åŠç¡åŠé†’çš„æ—¶å€™ï¼Œå‡†å¤‡æ›´
    
    </summary>
    
      <category term="personal" scheme="http://csbzhixing.github.io/categories/personal/"/>
    
    
  </entry>
  
  <entry>
    <title>ä¸ªäººçŸ¥è¯†ç®¡ç†</title>
    <link href="http://csbzhixing.github.io/2015/09/29/update-self/"/>
    <id>http://csbzhixing.github.io/2015/09/29/update-self/</id>
    <published>2015-09-29T06:27:00.000Z</published>
    <updated>2015-09-29T08:00:42.000Z</updated>
    
    <content type="html">&lt;p&gt;9æœˆ25å·ä¸Šå‘¨äº”æ”¶åˆ°äº†æ–°çš„iphone6s plusã€‚åœ¨æŠ˜è…¾äº†å‡ å¤©åï¼Œæ•´ç†äº†å‡ºè‡ªå·±çš„ä¸€å¥—æ•ˆç‡å·¥ä½œç³»ç»Ÿï¼Œç›®å‰çœ‹æ¥æ•ˆæœè‰¯å¥½ï¼Œä¸çŸ¥é“æœªæ¥ä½¿ç”¨å‡ ä¸ªæœˆæ˜¯å¦ä¼šç»™è‡ªå·±å¸¦æ¥ä¸ä¸€æ ·çš„ä½“éªŒã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ç³»ç»Ÿå¤§çº²&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14435106554403.jpg&quot; alt=&quot;å¤§çº²&quot;&gt;&lt;/p&gt;
&lt;p&gt;##æ•ˆç‡å·¥å…·&lt;/p&gt;
&lt;p&gt;å¥½çš„è®¡åˆ’æ˜¯æˆåŠŸçš„ä¸€èˆ¬ã€‚åœ¨ä¹‹å‰ç”±äºå›½å†…å®‰å“æœºæ— æ³•ä½¿ç”¨è°·æ­ŒæœåŠ¡ï¼Œè®¸å¤šéœ€è¦è°·æ­ŒæœåŠ¡æ¡†æ¶çš„è½¯ä»¶éƒ½ç”¨ä¸äº†ï¼Œä¸€ç›´ä»¥æ¥éƒ½æ²¡æœ‰å»ºç«‹ä¸€ä¸ªä½“ç³»å·¥å…·ã€‚å…¥æ‰‹iPhoneä¹‹åï¼Œå€ŸåŠ©äºVPNï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„ç»“åˆè°·æ­ŒæœåŠ¡å’Œè‹¹æœäº‘æœåŠ¡äº†ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;sunriseã€‚æˆ‘èƒ½æ‰¾åˆ°å…è´¹çš„æ—¥å†é‡Œé¢æœ€å¥½çš„ã€‚èƒ½å¤ŸåŒæ­¥iCloudå’Œè°·æ­Œæ—¥å†ã€‚èƒ½å¤Ÿè·¨å¹³å°ã€‚ç•Œé¢ä¹Ÿå¾ˆç¾è§‚ã€‚èƒ½å¤ŸåŒæ­¥iCloudæ—¥å†å°±ä¸ç”¨æ‰‹åŠ¨åœ¨sunriseä¸Šé¢æ·»åŠ è¡Œç¨‹ï¼Œåªéœ€è¦åœ¨macæˆ–è€…iPhoneä¸Šé¢æ·»åŠ æé†’äº‹é¡¹å°±å¯ä»¥äº†ã€‚&lt;/li&gt;
&lt;li&gt;Noti:Do é™å…å…¥æ‰‹çš„ã€‚å°è€Œç¾çš„TODOè½¯ä»¶ã€‚èƒ½å¤ŸåŒæ­¥åˆ°ç³»ç»Ÿçš„æé†’äº‹é¡¹ã€‚ä½¿ç”¨ç®€å•æ–¹ä¾¿ã€‚&lt;/li&gt;
&lt;li&gt;appleçš„æé†’äº‹é¡¹ã€‚ç³»ç»Ÿå†…ç½®çš„è½¯ä»¶ï¼Œå¯¹æ¯”äº†å‡ ä¸ªå¤§è€Œå…¨çš„ç¬¬ä¸‰æ–¹è½¯ä»¶åï¼Œæˆ‘å‘ç°æé†’äº‹é¡¹å·²ç»èƒ½å¤Ÿæ»¡è¶³å¤šæ•°çš„éœ€æ±‚äº†ï¼Œèƒ½å¤ŸiCloudåŒæ­¥ï¼Œéå¸¸æ–¹ä¾¿ã€‚&lt;/li&gt;
&lt;li&gt;SimpleNoteã€‚ç®€å•å¥½ç”¨çš„ç¬¬ä¸‰æ–¹ç¬”è®°è½¯ä»¶ã€‚æ²¡æœ‰ä½¿ç”¨è‡ªå¸¦noteæ˜¯å› ä¸ºåŒæ­¥å‡ºç°äº†ä¸€äº›é—®é¢˜ã€‚SimpleNoteåŒæ­¥ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œèƒ½å¤Ÿåœ¨webä¸Šä½¿ç”¨ä¹Ÿä½¿å¾—åœ¨Windowsä¸Šä¹Ÿèƒ½ä½¿ç”¨ã€‚å°†ä¸€äº›éœ€è¦å¤‡å¿˜çš„æ¯”å¦‚é‚®ç®±ï¼Œè´¦å·æ”¾å…¥éå¸¸å¥½ã€‚åŒæ—¶åœ¨iPhoneä¸Šæ”¯æŒä½¿ç”¨Touch IDåŠ å¯†ï¼Œæ„Ÿè§‰å¤ªæ£’äº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;##å­˜å‚¨&lt;/p&gt;
&lt;p&gt;ç½‘ç›˜çš„ä½¿ç”¨å‚è€ƒäº†è®¸å¤šï¼Œæœ€ç»ˆé€‰æ‹©äº†å›½å†…çš„åšæœäº‘å’Œå›½å¤–çš„DropBox&lt;/p&gt;
&lt;p&gt;##é‚®ä»¶&lt;/p&gt;
&lt;p&gt;åœ¨å¤§å­¦çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰å¾ˆæ³¨æ„ä½¿ç”¨é‚®ä»¶ï¼Œæ‰€æœ‰è¦é‚®ä»¶è®¢é˜…çš„åœ°æ–¹éƒ½æ˜¯ä¸€ä¸ªQQé‚®ç®±å°±æå®šäº†ã€‚åæ¥å‘ç°å…¶å®é‚®ä»¶ç”¨å¤„å®åœ¨æ˜¯å¤ªå¤§äº†ã€‚ä¸ä»…å¯ä»¥è®¢é˜…æ¶ˆæ¯ï¼Œæ³¨å†Œï¼Œæ²Ÿé€šï¼Œè¿˜å¯ä»¥åšè®¡åˆ’ï¼Œå®‰æ’ï¼Œå¤‡ä»½ï¼ˆç½‘ç›˜ï¼‰ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;GMailã€‚è¿™ä¼°è®¡æ˜¯æ‰€æœ‰Geekçš„ç¬¬ä¸€é€‰æ‹©ã€‚å”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯è¦ç¿»å¢™ã€‚è€Œä¸”æˆ‘å‘ç°GMailçš„SMTPçš„æœåŠ¡å™¨åœ¨macä¸Šç‰¹åˆ«ä¸å¥½è¿æ¥ã€‚GMailçš„è´¦å·å¯ä»¥é€šè¡Œæ‰€æœ‰è°·æ­ŒæœåŠ¡ï¼Œè€Œä¸”å¯ä»¥å¾ˆä¾¿æ·åœ°ç™»é™†å›½å¤–çš„ç½‘ç«™æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;QQã€‚ç»¼åˆæ¥çœ‹ï¼Œç°åœ¨å›½å†…é‚®ç®±æœåŠ¡åšçš„æœ€å¥½çš„å°±æ˜¯QQé‚®ç®±äº†ã€‚æ²¡ä»€ä¹ˆå¤ªå¤§çš„æ§½ç‚¹ï¼Œåç¼€ç¨å¾®lowç‚¹ï¼Œä½†æ˜¯å¯ä»¥æ”¹æˆfoxmailã€‚&lt;/li&gt;
&lt;li&gt;apple mail.app ã€‚è‹¹æœè‡ªå¸¦çš„é‚®ç®±è½¯ä»¶ã€‚åœ¨è¿™ä¸Šé¢æ‰¾äº†å‡ ä¸ªå…è´¹çš„ï¼Œæ„Ÿè§‰éƒ½ä¸æ˜¯å¾ˆå¥½ã€‚è®¸å¤šäººä¹Ÿè¯´å…¶å®è‡ªå¸¦çš„å°±å·²ç»èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚äº†ã€‚å—¯ï¼Œè¿˜æ˜¯åŸç”Ÿçš„å¥½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;##èµ„è®¯&lt;/p&gt;
&lt;p&gt;ç½‘ç»œæ—¶ä»£æ˜¯ä¿¡æ¯å¤§çˆ†ç‚¸çš„æ—¶ä»£ï¼Œæ€ä¹ˆæ ¹æ®è‡ªå·±çš„éœ€æ±‚å»è®¢åˆ¶æ•´ç†å’¨è¯¢æ˜¯å¾ˆé‡è¦çš„ã€‚åœ¨è¾—è½¬äº†ä¸€å¤§å’¨è¯¢ç±»APPä»¥åï¼Œå‘ç°è¦ä¹ˆå¤ªå¤æ‚è¦ä¹ˆå†…å®¹å•ä¸€ã€‚æœ€åå†³å®šé€šè¿‡RSSè®¢é˜…æ¥è‡ªå·±è°ƒæ•´ä¿¡æ¯æºã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¾®åšå®¢æˆ·ç«¯ Mokeã€‚æ”¶è´¹çš„å®¢æˆ·ç«¯ï¼Œ18å…ƒäººæ°‘å¸ï¼Œå°‘æ•°å‡ ä¸ªèŠ±é’±çš„APPã€‚æ²¡æœ‰å¹¿å‘ŠçœŸçš„å¾ˆæ¸…çˆ½ï¼Œæœ‰è®¸å¤šæ‰‹åŠ¿ä½†æ˜¯è¿˜æ²¡æœ‰æŒæ¡å¥½ã€‚&lt;/li&gt;
&lt;li&gt;Pocketã€‚å¯¹äºPocketï¼Œæˆ‘æ˜¯ä½œä¸ºæ–‡æ¡£å­˜æ”¾æ•´ç†çš„åœ°æ–¹ã€‚å¥½çš„æ–‡ç« å…ˆåŠ å…¥åˆ°Pocketä¸­ï¼Œç„¶åæ ¹æ®å†…å®¹åˆ†ç±»ï¼Œåé¢å†³å®šæ¯å‘¨èŠ±æ—¶é—´æ•´ç†ä¸€ä¸ªåˆ†ç±»ã€‚&lt;/li&gt;
&lt;li&gt;çŸ¥ä¹ã€‚ä¸Šäº†çŸ¥ä¹èº«ä½“ä¸€å¤©ä¸å¦‚ä¸€å¤©äº†ã€‚ã€‚ã€‚å¼€ç©ç¬‘çš„ã€‚çŸ¥ä¹è¿˜æ˜¯æœ‰å¾ˆå¤šå¹²è´§ï¼Œéœ€è¦è‡ªå·±å»æŒ–æ˜ï¼Œä½†æ˜¯éšç€ç”¨æˆ·ç¾¤ä½“çš„æ‰©å¤§ï¼Œæ„Ÿè§‰å›ç­”çš„è´¨é‡ä¸‹é™çš„å¾ˆå‰å®³ï¼Œå¤ªå¤šçš„è€æœºçµç®€ç›´æµªè´¹æˆ‘ç”Ÿå‘½ã€‚ã€‚&lt;/li&gt;
&lt;li&gt;Feedlyã€‚RSSè®¢é˜…è½¯ä»¶ã€‚çœ‹ä¸­çš„å°±æ˜¯ä»–è·¨å¹³å°çš„èƒ½åŠ›ã€‚ç¼ºç‚¹æ˜¯è¦ç¿»å¢™ã€‚ã€‚ã€‚è€Œä¸”å¾ˆå¤šåŠŸèƒ½å¿…é¡»ä»˜è´¹æ‰å¼€é€šï¼ˆæˆ‘æƒ³åˆ†äº«æˆ‘çš„è®¢é˜…éƒ½è¦ä»˜è´¹ã€‚ã€‚ã€‚ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;å†™ä½œ&quot;&gt;&lt;a href=&quot;#å†™ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å†™ä½œ&quot;&gt;&lt;/a&gt;å†™ä½œ&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;MWebã€‚åˆæ˜¯ä¸€ä¸ªä»˜è´¹åº”ç”¨ï¼Œè€Œä¸”å¾ˆä¸ä¾¿å®œã€‚ã€‚9.9åˆ€ã€‚ä½†æ˜¯æˆ‘æ„Ÿè§‰ç‰©è¶…æ‰€å€¼ã€‚åŠŸèƒ½å¾ˆå¼ºå¤§çš„MarkDownå†™ä½œè½¯ä»¶ã€‚ç°åœ¨ä¹ æƒ¯äº†ç”¨MWebè§‰å¾—WordçœŸçš„ã€‚ã€‚è·Ÿä¸ä¸Šä»–çš„è®¾è®¡äº†ã€‚&lt;/li&gt;
&lt;li&gt;SimpleNoteã€‚ä¸€äº›ç®€å•çš„å¤‡å¿˜ï¼Œä¸´æ—¶çš„çµæ„Ÿè®°å½•ï¼Œä¸Šé¢å·²ç»è®²è¿‡äº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;##ä¸ºä»€ä¹ˆè¦å»ºç«‹ä¸ªäººçŸ¥è¯†ç®¡ç†ç³»ç»Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨æœ€è¿‘å‡ ä¸ªæœˆçš„å­¦ä¹ ä¸­ï¼Œæˆ‘å‘ç°è‡ªå·±æ¥æ”¶äº†å¤ªå¤šçš„ä¿¡æ¯è€Œä¸èƒ½å¾ˆå¥½çš„å¸æ”¶ï¼Œæ—¶é—´å®‰æ’ä¹Ÿå¤ªéšæ€§æµªè´¹äº†å¾ˆå¤šæ—¶é—´ã€‚æ—¢ç„¶ä¹°äº†æ–°æ‰‹æœºï¼Œä¸èƒ½å’Œä¸€èˆ¬äººä¸€æ ·ä½œä¸ºä¸€ä¸ªå¨±ä¹å·¥å…·ï¼Œä¹Ÿåº”è¯¥å»å¸®åŠ©è‡ªå·±æé«˜ã€‚æ‰€ä»¥åœ¨åšäº†ä¸€ç•ªå·¥ä½œåï¼Œè‡ªå·±è®¾è®¡äº†è¿™ä¸€ä¸ªç³»ç»Ÿï¼Œå¯èƒ½ä¸å®Œå–„ï¼Œå¾ˆç®€å•ï¼Œä½†ä¹Ÿæ˜¯ä¸ªå¼€å§‹ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;9æœˆ25å·ä¸Šå‘¨äº”æ”¶åˆ°äº†æ–°çš„iphone6s plusã€‚åœ¨æŠ˜è…¾äº†å‡ å¤©åï¼Œæ•´ç†äº†å‡ºè‡ªå·±çš„ä¸€å¥—æ•ˆç‡å·¥ä½œç³»ç»Ÿï¼Œç›®å‰çœ‹æ¥æ•ˆæœè‰¯å¥½ï¼Œä¸çŸ¥é“æœªæ¥ä½¿ç”¨å‡ ä¸ªæœˆæ˜¯å¦ä¼šç»™è‡ªå·±å¸¦æ¥ä¸ä¸€æ ·çš„ä½“éªŒã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ç³»ç»Ÿå¤§çº²&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/144351065544
    
    </summary>
    
      <category term="personal" scheme="http://csbzhixing.github.io/categories/personal/"/>
    
    
  </entry>
  
  <entry>
    <title>å¤šçº¿ç¨‹å¼€å‘è¯¦è°ˆ</title>
    <link href="http://csbzhixing.github.io/2015/09/25/thread/"/>
    <id>http://csbzhixing.github.io/2015/09/25/thread/</id>
    <published>2015-09-25T01:49:52.000Z</published>
    <updated>2015-10-23T02:36:56.000Z</updated>
    
    <content type="html">&lt;p&gt;æŒ‰ç…§è®¡åˆ’ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦è°ˆiOSä¸‹çš„å¹¶å‘ç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰çš„æ–‡ç« å·²ç»è°ˆè¿‡äº†GCDçš„å®ç°ï¼ŒåŒ…æ‹¬è‹¹æœåœ¨GCDä¹‹ä¸Šå®ç°çš„NSOperationã€‚ä½†æ˜¯åœ¨å‡ æ¬¡é¢è¯•åå‘ç°ï¼Œä»…ä»…äº†è§£APIè¿˜ä¸å¤Ÿï¼Œè¦å»æ·±å…¥çš„äº†è§£æ•´ä¸ªè¿è¡Œçš„æœºåˆ¶ã€‚åªæœ‰å¯¹æ•´ä¸ªç³»ç»Ÿæœ‰äº†æ›´æ·±åˆ»çš„äº†è§£ï¼Œæ‰èƒ½ä¸è¢«APIç»™é™åˆ¶ä½ã€‚&lt;/p&gt;
&lt;p&gt;##å¹¶å‘&lt;/p&gt;
&lt;p&gt;å¹¶å‘ï¼Œæ¦‚å¿µå°±æ˜¯åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚è¿™äº›ä»»åŠ¡å¯ä»¥ä»¥åˆ†æ—¶çš„æ–¹å¼è¿è¡Œåœ¨å•æ ¸CPUä¸Šé¢ï¼Œä¹Ÿå¯ä»¥ä»¥çœŸæ­£çš„å¹¶å‘è¿è¡Œåœ¨å¤šæ ¸CPUä¸Šé¢ã€‚&lt;/p&gt;
&lt;p&gt;å®ç°å¹¶å‘ï¼Œä¸ä»…å¯ä»¥æœ€å¤§åŒ–åœ°åˆ©ç”¨ç¡¬ä»¶çš„æ€§èƒ½ï¼Œä¹Ÿå¯ä»¥æé«˜ç¨‹åºçš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;###çº¿ç¨‹&lt;/p&gt;
&lt;p&gt;&lt;code&gt;çº¿ç¨‹(thread)&lt;/code&gt;æ˜¯ç»„æˆè¿›ç¨‹çš„å­å•å…ƒï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥å¯¹çº¿ç¨‹è¿›è¡Œå•ç‹¬çš„è°ƒç”¨ã€‚åœ¨è‹¹æœç³»ç»Ÿä¸Šçš„APIéƒ½æ˜¯ä»¥çº¿ç¨‹ä¸ºå•å…ƒè¿›è¡Œè°ƒåº¦çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¤šçº¿ç¨‹è¿è¡Œä¸ä»…èƒ½å¤Ÿåœ¨å¤šæ ¸CPUä¸Šè¿è¡Œï¼Œä¹Ÿå¯ä»¥ä»…ä»…è¿è¡Œåœ¨å•æ ¸CPUä¸Šã€‚é€šè¿‡CPUåˆ†æ—¶ï¼Œç³»ç»Ÿå°†æå°çš„æ—¶é—´ç‰‡åˆ†é…ç»™ä¸åŒçº¿ç¨‹ï¼Œè®©ç”¨æˆ·ä»¥ä¸ºæ˜¯å¤šä»»åŠ¡è¿è¡Œçš„ã€‚ä½†æ˜¯é€šè¿‡åˆ†æ—¶çš„æ•ˆæœä¸å¦‚å¤šçº¿ç¨‹ç›´æ¥è¿è¡Œåœ¨å¤šæ ¸CPUä¸Šã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä½¿ç”¨&lt;code&gt;Instruments&lt;/code&gt;ä¸­çš„&lt;code&gt;CPU strategy view&lt;/code&gt;å¯ä»¥è§‚å¯Ÿä»£ç å¦‚ä½•åœ¨å¤šæ ¸CPUè¿è¡Œçš„ã€‚&lt;/p&gt;
&lt;p&gt;##å¹¶å‘å˜æˆçš„API&lt;/p&gt;
&lt;p&gt;åœ¨ä¹‹å‰çš„æ–‡ç« å·²ç»è°ˆè¿‡äº†é«˜å±‚å°è£…çš„ä¸¤ç§ï¼Œè¿™é‡Œçš„é‡ç‚¹ä¸æ˜¯å¦‚ä½•ä½¿ç”¨APIã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è‹¹æœçš„å¤šçº¿ç¨‹ä¸­ï¼Œæœ‰ä»¥ä¸‹APIä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œä»åº•å±‚åˆ°é«˜å±‚ä¸€æ¬¡å¦‚ä¸‹:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;pthread&lt;/li&gt;
&lt;li&gt;NSThread, è‹¹æœåœ¨pthreadä¸Šçš„å°è£…&lt;/li&gt;
&lt;li&gt;Grand Central Dispatchï¼ˆGCDï¼‰&lt;/li&gt;
&lt;li&gt;Operation Queues&lt;/li&gt;
&lt;li&gt;Run Loops&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™é‡Œæƒ³é‡ç‚¹è°ˆä¸€ä¸‹Run Loopsã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Run Loops&lt;/code&gt;ä¸åŒäº&lt;code&gt;GCD&lt;/code&gt;æˆ–è€…&lt;code&gt;Operation Queues&lt;/code&gt;ä¸€æ ·çš„å¹¶å‘æœºåˆ¶ï¼Œå› ä¸º&lt;code&gt;Run Loops&lt;/code&gt;å¹¶ä¸èƒ½å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ã€‚ä¸è¿‡åœ¨ä¸»dispatch/operationä¸­ï¼ŒRun Loopsæä¾›äº†ä¸€ç§å¼‚æ­¥æ‰§è¡Œä»£ç çš„æœºåˆ¶ã€‚é€šè¿‡Run Loopsï¼Œæˆ‘ä»¬ä¸å¿…æ‹…å¿ƒå¹¶å‘ä¸­çš„å„ç§é™·é˜±ï¼Œå°±èƒ½&lt;code&gt;å¼‚æ­¥&lt;/code&gt;æ‰§è¡Œä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œæ¯ä¸€ä¸ª Cocoa å’Œ CocoaTouch ç¨‹åºä¸­ï¼ŒMain run loopéƒ½æ˜¯æ‰®æ¼”äº†æœ€é‡è¦çš„è§’è‰²ã€‚å› ä¸ºæ˜¯run loop æ¥å¤„ç†ç›¸å…³çš„å†…æ ¸äº‹ä»¶çš„ã€‚&lt;/p&gt;
&lt;p&gt;çº¿ç¨‹å’Œrun loopæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚çº¿ç¨‹åœ¨åˆ›å»ºçš„æ—¶å€™å¹¶æ²¡æœ‰run loopï¼Œå¦‚æœä¸ä¸»åŠ¨è·å–ï¼Œé‚£run loopå°±ä¸ä¼šå­˜åœ¨ã€‚Run Loopçš„åˆ›å»ºåœ¨ç¬¬ä¸€æ¬¡è·å–çš„æ—¶å€™ï¼Œé”€æ¯åœ¨çº¿ç¨‹ç»“æŸçš„æ—¶å€™ã€‚é™¤äº†ä¸»çº¿ç¨‹å¤–ï¼Œåªèƒ½åœ¨ä¸€ä¸ªçº¿ç¨‹çš„å†…éƒ¨è·å–run loopã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºrun loopçš„è¯¦ç»†ï¼Œåˆæ˜¯ä¸€ç¯‡å¾ˆé•¿çš„æ–‡ç« æ¥è¯´äº†ã€‚è¿™é‡Œå°±ä¸è¯¦ç»†è¯´äº†ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æŒ‰ç…§è®¡åˆ’ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦è°ˆiOSä¸‹çš„å¹¶å‘ç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰çš„æ–‡ç« å·²ç»è°ˆè¿‡äº†GCDçš„å®ç°ï¼ŒåŒ…æ‹¬è‹¹æœåœ¨GCDä¹‹ä¸Šå®ç°çš„NSOperationã€‚ä½†æ˜¯åœ¨å‡ æ¬¡é¢è¯•åå‘ç°ï¼Œä»…ä»…äº†è§£APIè¿˜ä¸å¤Ÿï¼Œè¦å»æ·±å…¥çš„äº†è§£æ•´ä¸ªè¿è¡Œçš„æœºåˆ¶ã€‚åªæœ‰å¯¹æ•´ä¸ªç³»ç»Ÿæœ‰äº†æ›´æ·±åˆ»çš„äº†è§£ï¼Œæ‰èƒ½ä¸è¢«APIç»™é™åˆ¶ä½ã€‚
    
    </summary>
    
      <category term="base" scheme="http://csbzhixing.github.io/categories/base/"/>
    
    
  </entry>
  
  <entry>
    <title>json&amp;amp;xml</title>
    <link href="http://csbzhixing.github.io/2015/09/24/json-and-xml/"/>
    <id>http://csbzhixing.github.io/2015/09/24/json-and-xml/</id>
    <published>2015-09-24T08:44:36.000Z</published>
    <updated>2015-09-24T09:07:01.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;ç½‘ç»œä¼ è¾“æ ¼å¼-JSON-amp-XML&quot;&gt;&lt;a href=&quot;#ç½‘ç»œä¼ è¾“æ ¼å¼-JSON-amp-XML&quot; class=&quot;headerlink&quot; title=&quot;ç½‘ç»œä¼ è¾“æ ¼å¼ JSON &amp;amp; XML&quot;&gt;&lt;/a&gt;ç½‘ç»œä¼ è¾“æ ¼å¼ JSON &amp;amp; XML&lt;/h1&gt;&lt;p&gt;ç¬¬ä¸€æ¬¡æ¥è§¦è¿™ä¸¤ä¸ªæ ¼å¼è¿˜æ˜¯åœ¨å­¦æ ¡åšä¸€ä¸ªè´¢åŠ¡ç®¡ç†ç³»ç»Ÿçš„æ—¶å€™ã€‚åœ¨ä¹‹å‰å˜æˆéƒ½æ˜¯çº¯ç²¹çš„å•æœºç¼–ç¨‹ï¼Œä¸è®¾è®¡åˆ°ç½‘ç»œæ•°æ®ä¼ è¾“çš„é—®é¢˜ã€‚åˆ°äº†è¿™ä¸ªé¡¹ç›®æ‰å¼€å§‹è€ƒè™‘å¦‚ä½•åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯JSONï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå…ˆè®²JSONçš„éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;##JSON&lt;/p&gt;
&lt;p&gt;JSONæ˜¯ä¸€ç§è½»é‡åŒ–çš„æ•°æ®æ ¼å¼ã€‚ä»–çš„ç‰¹ç‚¹å°±æ˜¯æ–¹ä¾¿å·²ç”¨ã€‚ç›®å‰90%çš„ç½‘ç»œä¼ è¾“éƒ½æ˜¯ä¾èµ–äºJSONæ ¼å¼ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ¥çœ‹çœ‹JSONæ ¼å¼æ˜¯æ€ä¹ˆæ ·çš„ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;json&quot;&gt;
&amp;quot;access_token&amp;quot;: &amp;quot;ACCESS_TOKEN&amp;quot;,

   &amp;quot;expires_in&amp;quot;: 1234,

   &amp;quot;remind_in&amp;quot;:&amp;quot;798114&amp;quot;,

   &amp;quot;uid&amp;quot;:&amp;quot;12341234&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„JSONæ ¼å¼ã€‚æ¯”è¾ƒå®¹æ˜“çš„çœ‹å‡ºï¼Œå…¶å®å°±æ˜¯ä¸€ç§key-valueçš„å½¢å¼ã€‚&lt;/p&gt;
&lt;p&gt;keyæˆ‘ä»¬éƒ½å¥½äº†è§£ï¼Œæ˜¯ä¸€ä¸ªstringã€‚é‚£ä¹ˆvalueå°±ä¼šæœ‰ä¸ä¸€æ ·çš„å€¼ã€‚é€šè¿‡å¯¹æ¯”OCçš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“çš„ç†è§£JSONä¸­çš„æ•°æ®ç±»å‹ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;            JSON                    OC

            {}                        NSDictionary

            []                        NSArray

            &amp;quot;&amp;quot;                        NSString

           æ•°å­—                      NSNumber


&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;çŸ¥é“äº†JSONæ‰€å¯¹åº”çš„OCå¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è§£æJSONå¯¹è±¡ï¼Œå°†ç›¸å…³çš„æ•°æ®è½¬æ¢æˆOCå¯¹è±¡æ¥å­˜å‚¨ã€‚åœ¨è¿™é‡Œï¼Œä»‹ç»ä¸€ç§èƒ½å¤Ÿåœ¨æœ¬åœ°æ¨¡æ‹ŸAPIçš„æ–¹å¼ï¼Œè¿™ä¹Ÿæ˜¯ç”±äºè‡ªå·±æ‰¾ä¸åˆ°å¾ˆå¥½çš„å¼€å‘APIæ‰€ä»¥æƒ³åœ¨æœ¬åœ°èƒ½å¤Ÿæ¨¡æ‹ŸAPIçš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;##JSON Server æ¨¡æ‹Ÿ API&lt;/p&gt;
&lt;p&gt;###ç¬¬ä¸€æ­¥ å®‰è£…&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®‰è£…Homebrewã€‚è¿™ä¸ªå¯æ˜¯ä¸ªç¥å™¨ï¼Œèƒ½å¤Ÿç®¡ç†macä¸Šçš„ç¬¬ä¸‰æ–¹çš„åº“çš„å·¥å…·ã€‚æ®è¯´è¢«ä½œè€…å†™ä¸å‡ºåè½¬äºŒå‰æ ‘ä¸ªè°·æ­Œæ‹’äº†ç„¶åå»äº†è‹¹æœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;ruby -e &amp;quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®‰è£…node.js&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;brew install node&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®‰è£…json-server&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;npm install -g json-server&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ ¹æ®éœ€æ±‚åˆ›å»ºJSON&quot;&gt;&lt;a href=&quot;#æ ¹æ®éœ€æ±‚åˆ›å»ºJSON&quot; class=&quot;headerlink&quot; title=&quot;æ ¹æ®éœ€æ±‚åˆ›å»ºJSON&quot;&gt;&lt;/a&gt;æ ¹æ®éœ€æ±‚åˆ›å»ºJSON&lt;/h2&gt;&lt;p&gt;å®‰è£…å®Œæ¯•åï¼Œéšä¾¿æ‰¾ä¸ªä½ å–œæ¬¢çš„æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ªJSONæ ¼å¼çš„æ–‡ä»¶ï¼Œå¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;JSON&quot;&gt;{
  &amp;quot;posts&amp;quot;: [
    { &amp;quot;id&amp;quot;: 1, &amp;quot;title&amp;quot;: &amp;quot;json-server&amp;quot;, &amp;quot;author&amp;quot;: &amp;quot;typicode&amp;quot; }
  ],
  &amp;quot;comments&amp;quot;: [
    { &amp;quot;id&amp;quot;: 1, &amp;quot;body&amp;quot;: &amp;quot;some comment&amp;quot;, &amp;quot;postId&amp;quot;: 1 }
  ],
  &amp;quot;profile&amp;quot;: { &amp;quot;name&amp;quot;: &amp;quot;typicode&amp;quot; }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç„¶åä¿å­˜ã€‚&lt;/p&gt;
&lt;p&gt;###å¯åŠ¨JSON-Server&lt;/p&gt;
&lt;p&gt;é€šè¿‡å‘½ä»¤&lt;code&gt;json-server --watch JSONæ–‡ä»¶çš„åå­—.json&lt;/code&gt;æ¥å¯åŠ¨Server&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±ç›¸å½“äºåœ¨æœ¬åœ°åˆ›å»ºäº†ä¸€ä¸ªæœåŠ¡å™¨èƒ½å¤Ÿç›¸åº”æˆ‘ä»¬æƒ³å¯¹åº”çš„è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šé¢çš„çš„JSONæ–‡ä»¶ä¸ºä¾‹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430769630713.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼ŒåŠŸèƒ½ä¸æ­¢è¿™ä¹ˆä¸€ç‚¹ï¼ŒJSON-Serverè¿˜æœ‰æ›´å¤šæ–¹å¼ï¼Œè¯¦è§github&lt;a href=&quot;https://github.com/typicode/json-server&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;json-server&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;##OCå¯¹è±¡å’ŒJSONå¯¹è±¡çš„è½¬æ¢&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡&lt;code&gt;NSJSONSerialization&lt;/code&gt;æ¥åºåˆ—åŒ–JSON.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;![](/media/14430773793672.jpg)


&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å‡ºçš„ç»“æœ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430774045308.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¯¹æ¯”ä¸Šé¢çš„JSONæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºè§£æçš„ç»“æœæ˜¯æ­£ç¡®çš„&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡ç¬¬ä¸‰æ–¹åº“JSONKitæ¥è§£æ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; ä¸‹è½½åœ°å€ &lt;a href=&quot;https://github.com/johnezang/JSONKit&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;JSONKit&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;/media/14430745214364.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨Mantle&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨é¡¹ç›®ä¸­ç”¨çš„æœ€å¤šçš„æ–¹æ³•ï¼Œä¹Ÿè§‰å¾—éå¸¸å¥½ç”¨&lt;/p&gt;
&lt;p&gt;ä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;https://github.com/Mantle/Mantle&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Mantle&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨æœ¬åœ°åˆ›å»ºå¯¹åº”çš„OCç±»&lt;br&gt;&lt;img src=&quot;/media/14430784491980.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ol&gt;
&lt;li&gt;å®ç°ç›¸å…³çš„æ–¹æ³•&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430794069120.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰ç§æ˜¯ç›´æ¥å°†JSONé€šè¿‡ä¸€å®šçš„æ–¹æ³•è½¬æˆäº†OCçš„ç±»å¯¹è±¡ã€‚åœ¨ä½¿ç”¨çš„æ—¶å€™æ„Ÿè§‰æ›´æ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;p&gt;##XML&lt;/p&gt;
&lt;p&gt;è™½ç„¶JSONåœ¨ç½‘ç»œä¼ è¾“ä¸­æœ‰90%çš„ä½¿ç”¨ç‡ï¼Œä½†æ˜¯æˆ‘ä»¬ä¾ç„¶ä¸èƒ½æ”¾å¼ƒ10%çš„XMLæ˜¯å§ã€‚&lt;/p&gt;
&lt;p&gt;XMLå…¨ç§°æ˜¯Extensible Markup Languageï¼Œè¯‘ä½œâ€œå¯æ‰©å±•æ ‡è®°è¯­è¨€â€&lt;br&gt;è·ŸJSONä¸€æ ·ï¼Œä¹Ÿæ˜¯å¸¸ç”¨çš„ä¸€ç§ç”¨äºäº¤äº’çš„æ•°æ®æ ¼å¼&lt;br&gt;ä¸€èˆ¬ä¹Ÿå«XMLæ–‡æ¡£ï¼ˆXML Documentï¼‰&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„XMLæ–‡ä»¶çš„ç»“æ„&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ä¸€ä¸ªå…ƒç´ åŒ…æ‹¬äº†å¼€å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾
æ‹¥æœ‰å…ƒç´ å†…å®¹ï¼š&amp;lt;city&amp;gt;ä¸Šæµ·&amp;lt;/city&amp;gt;
æ²¡æœ‰å…ƒç´ å†…å®¹ï¼š&amp;lt;city&amp;gt;&amp;lt;/city&amp;gt;
æ²¡æœ‰å…ƒç´ å†…å®¹çš„ç®€å†™ï¼š&amp;lt;city/&amp;gt; 

ä¸€ä¸ªå…ƒç´ å¯ä»¥åµŒå¥—è‹¥å¹²ä¸ªå­å…ƒç´ ï¼ˆä¸èƒ½å‡ºç°äº¤å‰åµŒå¥—ï¼‰
&amp;lt;citys&amp;gt;
    &amp;lt;city&amp;gt;
        &amp;lt;name&amp;gt;ä¸Šæµ·&amp;lt;/name&amp;gt;
        &amp;lt;weather&amp;gt;å¤§æš´é›¨&amp;lt;/weather&amp;gt;
          &amp;lt;air&amp;gt;èˆ’é€‚&amp;lt;/air&amp;gt;
    &amp;lt;/city&amp;gt;
&amp;lt;/citys&amp;gt;

è§„èŒƒçš„XMLæ–‡æ¡£æœ€å¤šåªæœ‰1ä¸ªæ ¹å…ƒç´ ï¼Œå…¶ä»–å…ƒç´ éƒ½æ˜¯æ ¹å…ƒç´ çš„å­å­™å…ƒç´ 
XMLä¸­çš„æ‰€æœ‰ç©ºæ ¼å’Œæ¢è¡Œï¼Œéƒ½ä¼šå½“åšå…·ä½“å†…å®¹å¤„ç†

ä¸€ä¸ªå…ƒç´ å¯ä»¥æ‹¥æœ‰å¤šä¸ªå±æ€§ï¼Œå±æ€§å€¼å¿…é¡»ç”¨ åŒå¼•å·&amp;quot;&amp;quot; æˆ–è€… å•å¼•å·&amp;#39;&amp;#39; æ‹¬ä½ã€‚
&amp;lt;city name=&amp;quot;ä¸Šæµ·&amp;quot; weather=&amp;quot;å¤§æš´é›¨&amp;quot; air=&amp;quot;èˆ’é€‚&amp;quot; /&amp;gt;


å±æ€§è¡¨ç¤ºçš„ä¿¡æ¯ä¹Ÿå¯ä»¥ç”¨å­å…ƒç´ æ¥è¡¨ç¤ºï¼Œæ¯”å¦‚

   &amp;lt;city&amp;gt;
        &amp;lt;weather&amp;gt;å¤§æš´é›¨&amp;lt;/weather&amp;gt;
          &amp;lt;air&amp;gt;èˆ’é€‚&amp;lt;/air&amp;gt;
    &amp;lt;/city&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è§£æXMLæœ‰ä¸¤ç§æ–¹å¼&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;DOMè§£æï¼šä¸€æ¬¡æ€§å°†æ•´ä¸ªXMLæ–‡æ¡£åŠ è½½è¿›å†…å­˜ï¼Œæ¯”è¾ƒé€‚åˆè§£æå°æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;SAXè§£æï¼šä»æ ¹å…ƒç´ å¼€å§‹ï¼ŒæŒ‰é¡ºåºä¸€ä¸ªå…ƒç´ ä¸€ä¸ªå…ƒç´ å¾€ä¸‹è§£æï¼Œæ¯”è¾ƒé€‚åˆè§£æå¤§æ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨iOS SDKé‡Œé¢ï¼Œæä¾›äº†ä¸¤ç§è§£æçš„æ¡†æ¶&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;NSXMLParserï¼šå®ƒæ˜¯åŸºäºobjective-cè¯­è¨€çš„saxè§£ææ¡†æ¶ï¼Œæ˜¯ios sdké»˜è®¤çš„xmlè§£ææ¡†æ¶ï¼Œä¸æ”¯æŒdomæ¨¡å¼ã€‚&lt;/li&gt;
&lt;li&gt;libxml2: å®ƒæ˜¯åŸºäºcè¯­è¨€çš„xmlè§£æå™¨ï¼Œè¢«è‹¹æœæ•´åˆåœ¨ios sdkä¸­ï¼Œæ”¯æŒsaxå’Œdomæ¨¡å¼ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åŒæ ·ï¼Œç¬¬ä¸‰æ–¹ä¹Ÿæœ‰è®¸å¤šè§£æXMLçš„åº“ã€‚è¿™é‡Œä¸æ‰“ç®—è®²ç¬¬ä¸‰æ–¹çš„ï¼Œä¸€ä¸ªXMLä½¿ç”¨çš„æ¯”è¾ƒå°‘ï¼Œä¸€ä¸ªä½¿ç”¨SDKè‡ªèº«çš„æ•ˆç‡å¾€å¾€å·²ç»éå¸¸å¥½äº†ã€‚&lt;/p&gt;
&lt;p&gt;###NSXMLParser&lt;/p&gt;
&lt;p&gt;NSXMLParserå±äºSAXè§£æï¼Œæ˜¯ä»ä¸Šå¾€ä¸‹ä¾æ¬¡è§£ææ¯ä¸ªå…ƒç´ ï¼Œåœ¨è§£æåˆ°æ¯ä¸ªå…ƒç´ çš„æ—¶å€™ä¼šé€šçŸ¥ä»£ç†ï¼Œæ‰€ä»¥ä½¿ç”¨NSXMLParserå¿…é¡»éµå®ˆä»–çš„åè®®ã€‚&lt;br&gt;ä½¿ç”¨éå¸¸ç®€å•&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430815879826.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;ä»å½“å‰é¡¹ç›®è¯»å–XMLæ–‡ä»¶ï¼Œè¯»å‡ºæ•°æ®ï¼Œç©¿ä»¶è§£æå™¨ï¼Œè®¾ç½®ä»£ç†ï¼Œå¼€å§‹è§£æã€‚&lt;/p&gt;
&lt;p&gt;XMLæ–‡ä»¶å†…å®¹å¦‚ä¸‹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430816475695.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;è®¾ç½®ä»£ç†åï¼Œæˆ‘ä»¬è¦å®ç°ä»£ç†æ–¹æ³•ï¼Œä¸»è¦æœ‰ä»¥ä¸‹æ–¹æ³•ï¼Œç›´æ¥ä¸Šå›¾äº†&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430816906329.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430817012681.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430833160910.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430833236999.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;###libxml2&lt;/p&gt;
&lt;p&gt;é‡ç‚¹åœ¨äºå¯¼å…¥libxml2çš„åº“&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430836046841.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430836140287.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430836178120.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430836230051.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14430836285068.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç¼–è¯‘é¡¹ç›®ï¼Œé€šè¿‡äº†å°±æ²¡é—®é¢˜äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨æ³•å‚è§&lt;a href=&quot;https://github.com/neonichu/GDataXML&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;##æ€»ç»“&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¿˜JSONç”¨çš„æ›´å¤šï¼Œæ‰€ä»¥å¯¹äºJSONçš„è§£æè¿‡ç¨‹è¦æ›´åŠ äº†è§£ã€‚å¯¹äºXMLï¼Œæœ‰ä¸€äº›å…¬å¸ä»»ç„¶ä¼šä½¿ç”¨ï¼Œè€Œä¸€äº›ç°å­˜çš„æ•°æ®ä¹Ÿä¼šç”¨XMLå­˜å‚¨ï¼Œæ‰€æœ‰ä¹Ÿè¦æœ‰ä¸€å®šçš„äº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« è®²è§£äº†åœ¨ç½‘ç»œé€šä¿¡ä¸­æ•°æ®çš„æ ¼å¼ã€‚ä¸‹ä¸€ç¯‡çš„è¯å°±è¿›å…¥iOSå†…å¦‚ä½•è¿›è¡Œç½‘ç»œé€šä¿¡äº†ã€‚è™½ç„¶ä½¿ç”¨AFNetWorkingå·²ç»æœ‰æ®µæ—¶é—´äº†ï¼Œä½†æ˜¯å¯¹å†…éƒ¨æ•´ä¸ªæœºåˆ¶å¹¶ä¸äº†è§£ï¼Œè¦å¥½å¥½è¡¥è¯¾äº†ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ç½‘ç»œä¼ è¾“æ ¼å¼-JSON-amp-XML&quot;&gt;&lt;a href=&quot;#ç½‘ç»œä¼ è¾“æ ¼å¼-JSON-amp-XML&quot; class=&quot;headerlink&quot; title=&quot;ç½‘ç»œä¼ è¾“æ ¼å¼ JSON &amp;amp; XML&quot;&gt;&lt;/a&gt;ç½‘ç»œä¼ è¾“æ ¼å¼ JSON &amp;amp; XML&lt;/h1&gt;&lt;
    
    </summary>
    
      <category term="Network" scheme="http://csbzhixing.github.io/categories/Network/"/>
    
    
  </entry>
  
  <entry>
    <title>é‡æ–°è®¤è¯†ARC</title>
    <link href="http://csbzhixing.github.io/2015/09/22/arc/"/>
    <id>http://csbzhixing.github.io/2015/09/22/arc/</id>
    <published>2015-09-22T09:48:06.000Z</published>
    <updated>2015-09-24T09:04:36.000Z</updated>
    
    <content type="html">&lt;p&gt;ç¬¬ä¸€æ¬¡æ¥è§¦ARCè¿˜æ˜¯åœ¨ç¬¬ä¸€æ¬¡æ‹¿åˆ°é¡¹ç›®çš„æ—¶å€™ã€‚å­¦ä¹ OCçš„æ—¶å€™ä½¿ç”¨çš„æ•™æä¸»è¦æ˜¯é€šè¿‡MRCæ¥è®²è§£Retain Counting(å¼•ç”¨è®¡æ•°)çš„ã€‚åé¢åªæ˜¯ç®€å•çš„äº†è§£äº†ä¸‹ARCæ˜¯ç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­è‡ªåŠ¨å»ä¼°ç®—å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ¥è‡ªåŠ¨æ·»åŠ retainå’Œrealseçš„ã€‚è§£æ”¾äº†åŒæ‰‹ï¼Œä¹Ÿå°±æ²¡æœ‰ä»€ä¹ˆåŠ¨åŠ›å»ç ”ç©¶äº†ã€‚ç°åœ¨å¾—ç©ºäº†ï¼Œæ˜¯æ—¶å€™å¢å¼ºè‡ªå·±çš„æŠ€èƒ½æ ‘ã€‚å½“å‰çš„ç›®æ ‡å¦‚ä¸‹&lt;/p&gt;
&lt;p&gt;&amp;lt;!--more--&amp;gt;  
&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¢åŠ ç½‘ç»œç¼–ç¨‹çš„ç›¸å…³çŸ¥è¯†&lt;ul&gt;
&lt;li&gt;TCP/IP HTTP HTTPS åè®®çš„å­¦ä¹ å’Œäº†è§£&lt;/li&gt;
&lt;li&gt;JSONå’ŒXMLçš„è§£æ&lt;/li&gt;
&lt;li&gt;iOSè‡ªèº«å…³äºç½‘ç»œè¯·æ±‚ç›¸å…³çš„ç±»å’ŒAPI&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ–¹åº“AFNetWorkingæºç é˜…è¯»&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¢åŠ iOSå†…æ ¸æ–¹é¢çš„çŸ¥è¯†&lt;ul&gt;
&lt;li&gt;å†…å­˜åŸºæœ¬çŸ¥è¯†å’Œç®¡ç†æ–¹å¼&lt;/li&gt;
&lt;li&gt;ARC&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹çº¿ç¨‹&lt;/li&gt;
&lt;li&gt;RunTime&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç®€å•çš„çœ‹æ˜¯ä¸¤ä¸ªå¤§ç±»ä¸ƒä¸ªç‚¹ï¼Œä½†æ˜¯æ„Ÿè§‰æ¯ä¸€ä¸ªç‚¹éƒ½éå¸¸å¤šä¸œè¥¿ã€‚ç›®å‰æš‚æ—¶æŠŠ1.1çš„ç‚¹ç»™è¡¥å®Œäº†ã€‚ä¸è¿‡ä»»ç„¶éœ€è¦æŠ•å…¥å¤§é‡çš„æ—¶é—´å»å¤ä¹ ã€‚è¿™é‡Œæ‰“ç®—æ•´åˆ2.1å’Œ2.2ã€‚&lt;/p&gt;
&lt;p&gt;##å†…å­˜ç®¡ç†&lt;br&gt;å­¦è¿‡è®¡ç®—æœºåŸºç¡€çš„äººå¯¹äºå†…å­˜éƒ½ä¸é™Œç”Ÿï¼Œå“ªæ€•æ˜¯æ²¡æœ‰è®¡ç®—æœºåŸºç¡€çš„äººä¹Ÿæ˜ç™½å†…å­˜å¯¹äºç”µè„‘ï¼ˆç»ˆç«¯ï¼‰çš„é‡è¦æ€§ã€‚å†…å­˜ç®¡ç†ï¼Œå°±æ˜¯åœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œç”³è¯·ï¼Œä½¿ç”¨ï¼Œé‡Šæ”¾å†…å­˜çš„è¿‡ç¨‹ã€‚ç¨‹åºå†™çš„å¥½ä¸å¥½ï¼Œå°±çœ‹ä½ åœ¨å®ŒæˆåŠŸèƒ½çš„åŒæ—¶æ˜¯ä¸æ˜¯ä½¿ç”¨äº†å°½å¯èƒ½å°‘çš„å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å †å’Œæ ˆ&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å†…å­˜ä¸­ï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œåˆ†åˆ«æ˜¯&lt;code&gt;å †å’Œæ ˆ&lt;/code&gt;ã€‚è¿™é‡Œä¸ä»…ä»…æŒ‡ä»£ä»–ä»¬çš„æ•°æ®ç»“æ„ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä»–ä¼šè¢«å‹å…¥æ ˆä¸­ã€‚æ ˆä¸­çš„å†…å­˜å•å…ƒä¿å­˜äº†å‡½æ•°çš„è¿”å›åœ°å€ï¼Œå±€éƒ¨å˜é‡ï¼Œä¼ å‚ç­‰æ•°æ®ã€‚å½“å‡½æ•°è¢«å¼¹å‡ºæ ˆçš„æ—¶å€™ï¼Œä¸€åˆ‡æ•°æ®éƒ½ä¼šè¢«é”€æ¯ã€‚è€Œ&lt;code&gt;å †&lt;/code&gt;ä¸Šçš„æ•°æ®æ˜¯ç”±å¼€å‘è€…è‡ªè¡Œç”³è¯·ç®¡ç†çš„ï¼Œç”Ÿå‘½å‘¨æœŸç”±å¼€å‘è€…è‡ªè¡ŒæŒæ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å¼•ç”¨è®¡æ•°&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;å­¦è¿‡OCçš„äººéƒ½çŸ¥é“ï¼Œåœ¨OCä¸­ç®¡ç†å†…å­˜çš„æ–¹æ³•æ˜¯&lt;code&gt;å¼•ç”¨è®¡æ•°&lt;/code&gt;(Retain Counting)ã€‚é€šè¿‡å¯¹å †å’Œæ ˆçš„äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºOCä¸Šçš„å¯¹è±¡&lt;em&gt;éƒ½æ˜¯åœ¨å †ä¸Š&lt;/em&gt;çš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è‹¹æœå¼€å‘æ–‡æ¡£é‡Œé¢æœ‰ä¸€å¼ å›¾å¾ˆå¥½çš„è¯´æ˜çš„é€šè¿‡å¼•ç”¨è®¡æ•°æ¥ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14429735006902.jpg&quot; alt=&quot;å¼•ç”¨è®¡æ•°&quot;&gt;&lt;/p&gt;
&lt;p&gt;åŒæ ·ï¼Œå¼•ç”¨è®¡æ•°ä¹Ÿéµå¾ªå‡ å¤§å†…å­˜ç®¡ç†åŸåˆ™&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è°ç”³è¯·è°æ‹¥æœ‰&lt;/li&gt;
&lt;li&gt;è‚¯ä»¥ç”³è¯·æ‹¥æœ‰ä¸€ä¸ªå­˜åœ¨çš„å¯¹è±¡&lt;/li&gt;
&lt;li&gt;å½“ä¸éœ€è¦çš„å†æ‹¥æœ‰å¯¹è±¡çš„æ—¶å€™ï¼Œç”³è¯·é‡Šæ”¾&lt;/li&gt;
&lt;li&gt;ä¸èƒ½é‡Šæ”¾ä¸å±äºè‡ªå·±æ²¡æœ‰æ‹¥æœ‰çš„å¯¹è±¡&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;##Automatic Reference Counting (ARC)&lt;/p&gt;
&lt;p&gt;åœ¨å­¦ä¹ iOSå¼€å‘åŠå¹´åï¼ŒARCç»™æˆ‘ç•™ä¸‹äº†å¾ˆæ·±çš„å°è±¡ã€‚ARCæ˜¯è‹¹æœåœ¨å¼•ç”¨è®¡æ•°çš„åŸºç¡€ä¸Šæ”¹å–„äº†ç¼–è¯‘å™¨å®ç°çš„åŠŸèƒ½ã€‚è¦äº†è§£ARCï¼Œé¦–å…ˆè¦çœ‹çœ‹åœ¨æ²¡æœ‰ARCä¹‹å‰å¼€å‘è€…æ˜¯æ€ä¹ˆå»é€šè¿‡å¼•ç”¨è®¡æ•°ç®¡ç†çš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ARCä¹‹å‰ï¼Œæˆ‘ä»¬ç»Ÿç§°ä¸º&lt;code&gt;MRCï¼ˆManual Reference Counting&lt;/code&gt;ï¼Œå³æ‰‹åŠ¨å¼•ç”¨æŠ€æœ¯ã€‚é€šè¿‡è°ƒç”¨&lt;code&gt;retain&lt;/code&gt;å’Œ&lt;code&gt;release&lt;/code&gt;æ¥ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚æœ‰äº†ARCä¹‹åï¼Œåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡ä¼°ç®—å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»¥æ­¤æ¥è‡ªåŠ¨çš„æ·»åŠ &lt;code&gt;retain&lt;/code&gt;å’Œ&lt;code&gt;release&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼ŒARCåªå¯¹OCå¯¹è±¡æœ‰ä½œç”¨ï¼Œå¯¹äºCçš„ç±»å‹å¯¹è±¡ä¸åˆ™æŒ‰ç…§Cçš„å†…å­˜ç®¡ç†çš„æ–¹æ³•å»ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨å·¥ç¨‹ä¸­å¼€å¯äº†ä½¿ç”¨ARCï¼Œé‚£ä¹ˆå°±è¦éµå¾ªARCå®šä¹‰çš„ä¸€äº›è§„èŒƒ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸èƒ½æ˜¾ç¤ºçš„è°ƒç”¨&lt;code&gt;dealloc&lt;/code&gt;,&lt;code&gt;ratain&lt;/code&gt;,&lt;code&gt;release&lt;/code&gt;,&lt;code&gt;retainCount&lt;/code&gt;,&lt;code&gt;autoRelease&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè¦å¤å†™&lt;code&gt;dealloc&lt;/code&gt;æ–¹æ³•ï¼Œä¸éœ€è¦æ˜¾ç¤ºè°ƒç”¨&lt;code&gt;[super dealloc]&lt;/code&gt;æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;ä¸èƒ½å†ä½¿ç”¨&lt;code&gt;AutoReleasepool&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;em&gt;ARCä¸‹çš„ä¿®é¥°ç¬¦&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;åœ¨@Property ä¸­ï¼Œæœ‰å››ç§ä¿®é¥°ç¬¦æ˜¯ARCæä¾›çš„ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;strong&lt;/li&gt;
&lt;li&gt;weak&lt;/li&gt;
&lt;li&gt;unsafe_unretained&lt;/li&gt;
&lt;li&gt;__autoreleasing&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å…¶ä¸­ï¼Œé‡ç‚¹æ¥è°ˆè°ˆstrongå’Œweak&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;strongã€‚æˆ‘ä»¬ç†è§£ä¸ºå¼ºå¼•ç”¨ã€‚å½“å‰çš„å¯¹è±¡å®é™…æ‹¥æœ‰è¿™ä¸ªå¯¹è±¡ã€‚é»˜è®¤æƒ…å†µä¸‹ARCä½¿ç”¨çš„strongæ¥ä¿®é¥°ã€‚&lt;/li&gt;
&lt;li&gt;weakã€‚ç›¸å¯¹äºstrongçš„å¼ºå¼•ç”¨ï¼ŒweakæŒ‡çš„æ˜¯å¼±å¼•ç”¨ã€‚å½“å¼•ç”¨çš„å¯¹è±¡è¢«é‡Šæ”¾æ‰çš„æ—¶å€™ï¼Œå½“å‰å¼•ç”¨å¯¹è±¡ä¼šè¢«è‡ªåŠ¨ç½®nilã€‚weaké€šå¸¸è¢«ç”¨æ¥è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;__autoreleasing&lt;/code&gt;å’Œ&lt;code&gt;__unsafe_unretained&lt;/code&gt;åœ¨å®é™…åº”ç”¨ä¸­æ˜¯å¾ˆå°‘çš„ã€‚&lt;code&gt;__unsafe_unretained&lt;/code&gt;æ˜¯ä¸ºäº†å…¼å®¹iOS4ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œç°åœ¨åŸºæœ¬ä¸Šä¸ä¼šä½¿ç”¨äº†ï¼Œä¸»è¦æ˜¯ä¸ºäº†å®ç°weakçš„åŠŸèƒ½ã€‚&lt;code&gt;__autoreleasing&lt;/code&gt;æ˜¯è¡¨ç¤ºåœ¨autorelease poolä¸­è‡ªåŠ¨é‡Šæ”¾å¯¹è±¡çš„å¼•ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&quot;block-åœ¨ARCä¸‹&quot;&gt;&lt;a href=&quot;#block-åœ¨ARCä¸‹&quot; class=&quot;headerlink&quot; title=&quot;block åœ¨ARCä¸‹&quot;&gt;&lt;/a&gt;block åœ¨ARCä¸‹&lt;/h2&gt;&lt;p&gt;blockåœ¨ä¹‹å‰å·²ç»å°å°çš„è®¨è®ºè¿‡äº†ï¼Œå‡ºç°çš„å‡ ä¸ªé—®é¢˜éƒ½æœ‰è°ˆè®ºåˆ°ï¼Œè¿™é‡Œä¸»è¦ä»ARCçš„è§’åº¦ä¸Šå†è°ˆä¸€è°ˆã€‚&lt;/p&gt;
&lt;p&gt;blockåœ¨ARCä¸‹æœ€ç‰¹æ®Šçš„åœ°æ–¹å°±æ˜¯æ€ä¹ˆå»è§£å†³å¾ªç¯å¼•ç”¨ã€‚åœ¨blockçš„ç¯‡ç« ä¸­æ²¡æœ‰å¾ˆè¯¦ç»†è®¨è®ºï¼ŒåŸå› ä¹Ÿæ˜¯æ²¡ä»å†…å­˜çš„è§’åº¦æ¥çœ‹ã€‚è¿™é‡Œè¯¦ç»†è®²ä¸‹å¾ªç¯å¼•ç”¨äº§ç”ŸåŸå› å’Œåœ¨ARCä¸‹è§£å†³å¾ªç¯å¼•ç”¨çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&amp;gt;&lt;br&gt;You can use lifetime qualifiers to avoid strong reference cycles. For example, typically if you have a graph of objects arranged in a parent-child hierarchy and parents need to refer to their children and vice versa, then you make the parent-to-child relationship strong and the child-to-parent relationship weak. Other situations may be more subtle, particularly when they involve block objects.&lt;br&gt;&amp;gt;&lt;br&gt;In manual reference counting mode, &lt;strong&gt;block id x; has the effect of not retaining x. In ARC mode, &lt;/strong&gt;block id x; defaults to retaining x (just like all other values). To get the manual reference counting mode behavior under ARC, you could use &lt;strong&gt;unsafe_unretained &lt;/strong&gt;block id x;. As the name &lt;strong&gt;unsafe_unretained implies, however, having a non-retained variable is dangerous (because it can dangle) and is therefore discouraged. Two better options are to either use &lt;/strong&gt;weak (if you donâ€™t need to support iOS 4 or OS X v10.6), or set the __block value to nil to break the retain cycle.&lt;br&gt;&amp;gt;&lt;br&gt;The following code fragment illustrates this issue using a pattern that is sometimes used in manual reference counting.&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æ˜¯è‹¹æœå®˜æ–¹æ–‡æ¡£å¯¹å¾ªç¯å¼•ç”¨çš„è§£é‡Šã€‚é€šè¿‡å¼•ç”¨è®¡æ•°ï¼Œæˆ‘ä»¬äº†è§£åˆ°ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œå¯¹å½¼æ­¤éƒ½æ˜¯å¼ºå¼•ç”¨çš„è¯ï¼ŒåŒæ–¹éƒ½æ— æ³•é‡Šæ”¾å¯¹æ–¹ï¼Œä¹Ÿå°±æ— æ³•é‡Šæ”¾dellocå¯¹è±¡ï¼Œæœ€ç»ˆå°±é€ æˆäº†æ­»å¾ªç¯ã€‚åœ¨iOS5ä»¥ä¸‹çš„ç‰ˆæœ¬é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰‹åŠ¨ä½¿ç”¨&lt;code&gt;unsafe_unretained&lt;/code&gt;æ¥ä½¿å…¶ä¸­ä¸€ä¸ªå˜é‡å˜æˆé‡æŒ‡é’ˆã€‚è€Œåœ¨ARCä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨weakæ¥ä¿®é¥°å…¶ä¸­ä¸€ä¸ªå˜é‡ï¼Œè¿™æ ·åœ¨blockä¸­å°±ä¸å­˜åœ¨åŒæ–¹å¼ºå¼•ç”¨çš„æŠ¢çŸ¿ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œä¸Šé¢çš„å¤„ç†æ–¹æ³•æœ‰ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬ä¸çŸ¥é“weakä¿®é¥°çš„å¯¹è±¡ä»€ä¹ˆæ—¶å€™ä¼šè¢«é‡Šæ”¾æ‰äº†ï¼Œæœ‰å¯èƒ½åœ¨æ‰§è¡Œblocké‡Œé¢çš„å¯¹è±¡åœ¨ä¹‹å‰å°±å·²ç»è¢«é‡Šæ”¾æ‰äº†ã€‚åœ¨AFNetWorkingä¸­ï¼Œæä¾›äº†ä¸€ä¸ªéå¸¸å¥½çš„è§£å†³æ€è·¯&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/14429947239639.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æ–¹æ³•ä¸­ï¼Œåœ¨blockå¤–å…ˆå°†selfç”¨&lt;code&gt;weak&lt;/code&gt;å¼•ç”¨ä¸€ä¸ªweakSelfï¼Œè¿›å…¥blockåå†ä½¿ç”¨ä¸€ä¸ª&lt;code&gt;_strong_typeof&lt;/code&gt;å»åˆ›å»ºä¸€ä¸ªstrongå¼•ç”¨å¯¹è±¡ã€‚è¿™æ ·çš„åšæ³•æ—¢èƒ½é¿å…äº§ç”Ÿå¾ªç¯å¼•ç”¨ï¼Œä¹Ÿèƒ½é¿å…weakå¯¹è±¡æå‰è¢«é‡Šæ”¾æ‰ã€‚&lt;/p&gt;
&lt;p&gt;##ARCä¸Toll-Free Bridging&lt;/p&gt;
&lt;p&gt;Toll-Free Bridingä¿è¯äº†åœ¨ç¨‹åºä¸­ï¼Œå¯ä»¥æ–¹ä¾¿å’Œè°çš„ä½¿ç”¨Core Foundationç±»å‹çš„å¯¹è±¡å’ŒObjective-Cç±»å‹çš„å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåˆ°äº†ARCçš„æ—¶å€™ï¼Œä¸¤è€…çš„å†…å­˜ç®¡ç†æ–¹æ³•ä¸åŒäº†ã€‚å¯¹äºä¸€ç§å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨è¯¥ä¸¤ç§å†…å­˜ç®¡ç†æ–¹æ³•å»ç®¡ç†ã€‚æ‰€ä»¥åœ¨è¿›å…¥ARCä¹‹åï¼ŒToll-Free Bridgingä¹Ÿè¿›è¡Œäº†ç›¸åº”çš„å˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;__bridge&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;åªæ˜¯ç”³æ˜äº†ç±»å‹è½¬å˜ï¼Œå¹¶æ²¡æœ‰æ”¹å˜å†…å­˜ç®¡ç†æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;__bridge_retainedï¼ˆä¿®é¥°ç¬¦ï¼‰ or CFBridgingRetainï¼ˆå‡½æ•°ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;è¡¨ç¤ºå°†æŒ‡é’ˆç±»å‹è½¬å˜çš„åŒæ—¶ï¼Œå°†å†…å­˜ç®¡ç†çš„è´£ä»»ç”±åŸæ¥çš„Objective-Cäº¤ç»™Core Foundationæ¥å¤„ç†ï¼Œä¹Ÿå°±æ˜¯ï¼Œå°†ARCè½¬å˜ä¸ºMRCã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;__bridge_transferï¼ˆä¿®é¥°ç¬¦ï¼‰ or CFBridgingReleaseï¼ˆå‡½æ•°ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªä¿®é¥°ç¬¦å’Œå‡½æ•°çš„åŠŸèƒ½å’Œä¸Šé¢é‚£ä¸ª__bridge_retainedç›¸åï¼Œå®ƒè¡¨ç¤ºå°†ç®¡ç†çš„è´£ä»»ç”±Core Foundationè½¬äº¤ç»™Objective-Cï¼Œå³å°†ç®¡ç†æ–¹å¼ç”±MRCè½¬å˜ä¸ºARCã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢å°±æ˜¯è¦è°ˆçš„ARCçš„å†…å®¹äº†ã€‚å…¶å®ARCçš„å‘æ¯”èµ·MRCå·²ç»å°‘äº†å¾ˆå¤šäº†ï¼Œå¯¹äºæˆ‘ä»¬å¯æ€œçš„ç¨‹åºå‘˜æ¥è¯´å·²ç»æ˜¯å¾ˆå¤§çš„è§£æ”¾äº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå¯¹äºå†…å­˜ç®¡ç†ä»…ä»…æ˜¯åŸºäºOCç®€å•çš„è°ˆäº†è°ˆï¼Œè§‰å¾—è¿˜æ˜¯ä¸å¤Ÿæ·±åˆ»ï¼Œä¸»è¦æ˜¯è‡ªå·±åœ¨è¿™æ–¹é¢çš„çŸ¥è¯†çš„ç¡®å¾ˆæ¬ ç¼ºã€‚è¯»äº†&lt;br&gt;&lt;a href=&quot;http://casatwy.com/ccheng-xu-de-nei-cun-guan-li.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Cç¨‹åºçš„å†…å­˜ç®¡ç†&lt;/a&gt;è¿™ç¯‡æ–‡ç« å­¦åˆ°äº†å¾ˆå¤šï¼Œåœ¨è¿™é‡Œä¹Ÿå®‰åˆ©ä¸€ä¸‹ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ç¬¬ä¸€æ¬¡æ¥è§¦ARCè¿˜æ˜¯åœ¨ç¬¬ä¸€æ¬¡æ‹¿åˆ°é¡¹ç›®çš„æ—¶å€™ã€‚å­¦ä¹ OCçš„æ—¶å€™ä½¿ç”¨çš„æ•™æä¸»è¦æ˜¯é€šè¿‡MRCæ¥è®²è§£Retain Counting(å¼•ç”¨è®¡æ•°)çš„ã€‚åé¢åªæ˜¯ç®€å•çš„äº†è§£äº†ä¸‹ARCæ˜¯ç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­è‡ªåŠ¨å»ä¼°ç®—å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ¥è‡ªåŠ¨æ·»åŠ retainå’Œrealseçš„ã€‚è§£æ”¾äº†åŒæ‰‹ï¼Œä¹Ÿå°±æ²¡æœ‰ä»€ä¹ˆ
    
    </summary>
    
      <category term="Objective-C" scheme="http://csbzhixing.github.io/categories/Objective-C/"/>
    
    
  </entry>
  
</feed>
